// jsgrid custom build from 2016-11-22T14:50:53.835Z
// Selected modules: external/jquery.fmatter.js, js/grid.custom.js, js/grid.filter.js, js/grid.subgrid.js, js/grid.grouping.js, js/grid.treegrid.js, js/grid.pivot.js, js/grid.import.js, external/JsonXml.js, js/grid.jqueryui.js
// Default locale: i18n/grid.locale-en.js

/*
 jqGrid  4.7.0-post - jQuery Grid
 Copyright (c) 2008, Tony Tomov, tony@trirand.com
 Copyright (c) 2014, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 Dual licensed under the MIT and GPL licenses
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl-2.0.html
 Date: 2014-12-28
*/
(function(a){a.jgrid=a.jgrid||{};null==a.jgrid.defaults&&function(a){a.jgrid=a.jgrid||{};a.extend(!0,a.jgrid,{defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",
text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operandTitle:"Click to select search operation.",
resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",
url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",
searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},
currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:"Sun Mon Tue Wed Thr Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" "),AmPm:["am","pm","AM","PM"],S:function(a){return 11>a||13<a?["st","nd","rd","th"][Math.min((a-1)%10,3)]:"th"},srcformat:"Y-m-d",
newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}})}(jQuery);a.extend(!0,a.jgrid,{version:"4.7.0-post",cmTemplate:{integer:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:"eq ne lt le gt ge".split(" ")}},number:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:"eq ne lt le gt ge".split(" ")}},actions:{formatter:"actions",width:53,align:"center",
autoResizable:!1,fixed:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}},formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!1,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id",unused:""},htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,
">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},clearArray:function(a){for(;0<a.length;)a.pop()},format:function(c){var d=a.makeArray(arguments).slice(1);null==c&&(c="");return c.replace(/\{(\d+)\}/g,function(a,f){return d[f]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var a=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&
(a=parseFloat(RegExp.$1));return a},getCellIndex:function(c){c=a(c);if(c.is("tr"))return-1;c=(c.is("td")||c.is("th")?c:c.closest("td,th"))[0];return a.jgrid.msie?a.inArray(c,c.parentNode.cells):c.cellIndex},stripHtml:function(a){a=String(a);var d=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(d,""))&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):"":a},stripPref:function(c,d){var b=a.type(c);if("string"===b||"number"===b)c=String(c),d=""!==c?String(d).replace(String(c),""):d;return d},parse:function(c){"while(1);"===
c.substr(0,9)&&(c=c.substr(9));"/*"===c.substr(0,2)&&(c=c.substr(2,c.length-4));c||(c="{}");return!0===a.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(c):eval("("+c+")")},parseDate:function(c,d,b,f){var g=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,h="string"===typeof d?d.match(g):null,g=function(a,b){a=String(a);for(b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},l={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k=0,m,n,k=function(a,b){0===a?12===b&&(b=0):12!==
b&&(b+=12);return b},p=0;void 0===f&&(f=a.jgrid.formatter.date);void 0===f.parseRe&&(f.parseRe=/[#%\\\/:_;.,\t\s-]/);f.masks.hasOwnProperty(c)&&(c=f.masks[c]);if(d&&null!=d)if(isNaN(d-0)||"u"!==String(c).toLowerCase())if(d.constructor===Date)k=d;else if(null!==h)k=new Date(parseInt(h[1],10)),h[3]&&(p=60*Number(h[5])+Number(h[6]),p*="-"===h[4]?1:-1,p-=k.getTimezoneOffset(),k.setTime(Number(Number(k)+6E4*p)));else{"ISO8601Long"===f.srcformat&&"Z"===d.charAt(d.length-1)&&(p-=(new Date).getTimezoneOffset());
d=String(d).replace(/\T/g,"#").replace(/\t/,"%").split(f.parseRe);c=c.replace(/\T/g,"#").replace(/\t/,"%").split(f.parseRe);m=0;for(n=c.length;m<n;m++)"M"===c[m]&&(h=a.inArray(d[m],f.monthNames),-1!==h&&12>h&&(d[m]=h+1,l.m=d[m])),"F"===c[m]&&(h=a.inArray(d[m],f.monthNames,12),-1!==h&&11<h&&(d[m]=h+1-12,l.m=d[m])),"a"===c[m]&&(h=a.inArray(d[m],f.AmPm),-1!==h&&2>h&&d[m]===f.AmPm[h]&&(d[m]=h,l.h=k(d[m],l.h))),"A"===c[m]&&(h=a.inArray(d[m],f.AmPm),-1!==h&&1<h&&d[m]===f.AmPm[h]&&(d[m]=h-2,l.h=k(d[m],l.h))),
"g"===c[m]&&(l.h=parseInt(d[m],10)),"n"===c[m]&&(l.m=parseInt(d[m],10)),"j"===c[m]&&(l.d=parseInt(d[m],10)),void 0!==d[m]&&(l[c[m].toLowerCase()]=parseInt(d[m],10));l.f&&(l.m=l.f);if(0===l.m&&0===l.y&&0===l.d)return"&#160;";l.m=parseInt(l.m,10)-1;k=l.y;70<=k&&99>=k?l.y=1900+l.y:0<=k&&69>=k&&(l.y=2E3+l.y);k=new Date(l.y,l.m,l.d,l.h,l.i,l.s,l.u);0<p&&k.setTime(Number(Number(k)+6E4*p))}else k=new Date(1E3*parseFloat(d));else k=new Date(l.y,l.m,l.d,l.h,l.i,l.s,l.u);f.userLocalTime&&0===p&&(p-=(new Date).getTimezoneOffset(),
0<p&&k.setTime(Number(Number(k)+6E4*p)));if(void 0===b)return k;f.masks.hasOwnProperty(b)?b=f.masks[b]:b||(b="Y-m-d");c=k.getHours();d=k.getMinutes();l=k.getDate();p=k.getMonth()+1;h=k.getTimezoneOffset();m=k.getSeconds();n=k.getMilliseconds();var r=k.getDay(),q=k.getFullYear(),w=(r+6)%7+1,v=(new Date(q,p-1,l)-new Date(q,0,1))/864E5,y={d:g(l),D:f.dayNames[r],j:l,l:f.dayNames[r+7],N:w,S:f.S(l),w:r,z:v,W:5>w?Math.floor((v+w-1)/7)+1:Math.floor((v+w-1)/7)||(4>((new Date(q-1,0,1)).getDay()+6)%7?53:52),
F:f.monthNames[p-1+12],m:g(p),M:f.monthNames[p-1],n:p,t:"?",L:"?",o:"?",Y:q,y:String(q).substring(2),a:12>c?f.AmPm[0]:f.AmPm[1],A:12>c?f.AmPm[2]:f.AmPm[3],B:"?",g:c%12||12,G:c,h:g(c%12||12),H:g(c),i:g(d),s:g(m),u:n,e:"?",I:"?",O:(0<h?"-":"+")+g(100*Math.floor(Math.abs(h)/60)+Math.abs(h)%60,4),P:"?",T:(String(k).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",
r:"?",U:Math.floor(k/1E3)};return b.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return y.hasOwnProperty(a)?y[a]:a.substring(1)})},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(a){var d;if(null==this||null==this.p||!this.p.id)return"";d=this.p.id;switch(a){case "grid":return d;case "gBox":return"gbox_"+d;case "gView":return"gview_"+d;case "alertMod":return"alertmod_"+d;case "columnResizer":return"rs_m"+
d;case "selectAllCheckbox":return"cb_"+d;case "searchOperationMenu":return"sopt_menu";default:return""}},getGridComponentIdSelector:function(c){var d=a.jgrid;return(c=d.getGridComponentId.call(this,c))?"#"+d.jqID(c):""},getGridComponent:function(c,d,b){if(!(d instanceof jQuery)||0===d.length)return a();var f=d[0];switch(c){case "bTable":return d.hasClass("ui-jqgrid-bdiv")?d.find(">div>.ui-jqgrid-btable"):a();case "hTable":return d.hasClass("ui-jqgrid-hdiv")?d.find(">div>.ui-jqgrid-htable"):a();case "fTable":return d.hasClass("ui-jqgrid-sdiv")?
d.find(">div>.ui-jqgrid-ftable"):a();case "bDiv":return d.hasClass("ui-jqgrid-bdiv")&&null!=f.grid?a(f.grid.bDiv):a();case "hDiv":return d.hasClass("ui-jqgrid-bdiv")&&null!=f.grid?a(f.grid.hDiv):a();case "sDiv":return d.hasClass("ui-jqgrid-bdiv")&&null!=f.grid?a(f.grid.sDiv):a();case "colHeader":return isNaN(b)||null==f.grid||null==f.grid.headers||null==f.grid.headers[b]?a():a(f.grid.headers[b].el);default:return a()}},detectRowEditing:function(c){var d,b,f,g=this.rows,h=this.p;if(!this.grid||null==
g||null==h||void 0===h.savedRow||0===h.savedRow.length)return null;for(d=0;d<h.savedRow.length;d++)if(b=h.savedRow[d],"number"===typeof b.id&&"number"===typeof b.ic&&void 0!==b.name&&void 0!==b.v&&null!=g[b.id]&&g[b.id].id===c&&a.isFunction(a.fn.jqGrid.restoreCell)){if(f=g[b.id],null!=f&&f.id===c)return{mode:"cellEditing",savedRow:b}}else if(b.id===c&&a.isFunction(a.fn.jqGrid.restoreRow))return{mode:"inlineEditing",savedRow:b};return null},guid:1,uidPref:"jqg",randId:function(c){return(c||a.jgrid.uidPref)+
a.jgrid.guid++},getAccessor:function(a,d){var b,f,c=[],h;if("function"===typeof d)return d(a);b=a[d];if(void 0===b)try{if("string"===typeof d&&(c=d.split(".")),h=c.length)for(b=a;b&&h--;)f=c.shift(),b=b[f]}catch(l){}return b},getXmlData:function(c,d,b){var f="string"===typeof d?d.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof d)return d(c);if(f&&f[2])return f[1]?a(f[1],c).attr(f[2]):a(c).attr(f[2]);c=a(d,c);return b?c:0<c.length?a(c).text():void 0},cellWidth:function(){var c=a("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),
d=c.appendTo("body").find("td").width();c.remove();return.1<Math.abs(d-5)},cell_width:!0,ajaxOptions:{},from:function(c){return new function(d,b){"string"===typeof d&&(d=a.data(d));var f=this,c=d,h=!0,l=!1,k=b,m=/[\$,%]/g,n=null,p=null,r=0,q=!1,w="",v=[],y=!0;if("object"===typeof d&&d.push)0<d.length&&(y="object"!==typeof d[0]?!1:!0);else throw"data provides is not an array";this._hasData=function(){return null===c?!1:0===c.length?!1:!0};this._getStr=function(a){var e=[];l&&e.push("jQuery.trim(");
e.push("String("+a+")");l&&e.push(")");h||e.push(".toLowerCase()");return e.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(e){l&&(e=a.trim(e));e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return h?e:e.toLowerCase()};this._funcLoop=function(e){var b=[];a.each(c,function(a,f){b.push(e(f))});return b};this._append=function(a){var e;k=null===k?"":k+(""===w?" && ":
w);for(e=0;e<r;e++)k+="(";q&&(k+="!");k+="("+a+")";q=!1;w="";r=0};this._setCommand=function(a,b){n=a;p=b};this._resetNegate=function(){q=!1};this._repeatCommand=function(a,b){return null===n?f:null!==a&&null!==b?n(a,b):null!==p&&y?n(p,a):n(a)};this._equals=function(a,b){return 0===f._compare(a,b,1)};this._compare=function(a,b,f){var e=Object.prototype.toString;void 0===f&&(f=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b)return 0;if(null===a&&null!==b)return 1;if(null!==a&&null===
b)return-1;if("[object Date]"===e.call(a)&&"[object Date]"===e.call(b))return a<b?-f:a>b?f:0;h||"number"===typeof a||"number"===typeof b||(a=String(a),b=String(b));return a<b?-f:a>b?f:0};this._performSort=function(){0!==v.length&&(c=f._doSort(c,0))};this._doSort=function(a,b){var e=v[b].by,d=v[b].dir,c=v[b].type,h=v[b].datefmt,k=v[b].sfunc;if(b===v.length-1)return f._getOrder(a,e,d,c,h,k);b++;e=f._getGroup(a,e,d,c,h);d=[];for(c=0;c<e.length;c++)for(k=f._doSort(e[c].items,b),h=0;h<k.length;h++)d.push(k[h]);
return d};this._getOrder=function(e,b,d,c,k,g){var l=[],n=[],q="a"===d?1:-1,r,p;void 0===c&&(c="text");p="float"===c||"number"===c||"currency"===c||"numeric"===c?function(a){a=parseFloat(String(a).replace(m,""));return isNaN(a)?Number.NEGATIVE_INFINITY:a}:"int"===c||"integer"===c?function(a){return a?parseFloat(String(a).replace(m,"")):Number.NEGATIVE_INFINITY}:"date"===c||"datetime"===c?function(e){return a.jgrid.parseDate(k,e).getTime()}:a.isFunction(c)?c:function(e){e=e?a.trim(String(e)):"";return h?
e:e.toLowerCase()};a.each(e,function(e,f){r=""!==b?a.jgrid.getAccessor(f,b):f;void 0===r&&(r="");r=p(r,f);n.push({vSort:r,index:e})});a.isFunction(g)?n.sort(function(a,e){a=a.vSort;e=e.vSort;return g.call(this,a,e,q)}):n.sort(function(a,e){a=a.vSort;e=e.vSort;return f._compare(a,e,q)});c=0;for(var x=e.length;c<x;)d=n[c].index,l.push(e[d]),c++;return l};this._getGroup=function(e,b,d,c,h){var k=[],g=null,l=null;a.each(f._getOrder(e,b,d,c,h),function(e,d){var c=a.jgrid.getAccessor(d,b);null==c&&(c="");
f._equals(l,c)||(l=c,null!==g&&k.push(g),g=f._group(b,c));g.items.push(d)});null!==g&&k.push(g);return k};this.ignoreCase=function(){h=!1;return f};this.useCase=function(){h=!0;return f};this.trim=function(){l=!0;return f};this.noTrim=function(){l=!1;return f};this.execute=function(){var e=k,b=[];if(null===e)return f;a.each(c,function(){eval(e)&&b.push(this)});c=b;return f};this.data=function(){return c};this.select=function(e){f._performSort();if(!f._hasData())return[];f.execute();if(a.isFunction(e)){var b=
[];a.each(c,function(a,f){b.push(e(f))});return b}return c};this.hasMatch=function(){if(!f._hasData())return!1;f.execute();return 0<c.length};this.andNot=function(a,b,d){q=!q;return f.and(a,b,d)};this.orNot=function(a,b,d){q=!q;return f.or(a,b,d)};this.not=function(a,b,d){return f.andNot(a,b,d)};this.and=function(a,b,d){w=" && ";return void 0===a?f:f._repeatCommand(a,b,d)};this.or=function(a,b,d){w=" || ";return void 0===a?f:f._repeatCommand(a,b,d)};this.orBegin=function(){r++;return f};this.orEnd=
function(){null!==k&&(k+=")");return f};this.isNot=function(a){q=!q;return f.is(a)};this.is=function(a){f._append("this."+a);f._resetNegate();return f};this._compareValues=function(e,b,d,c,h){var k;k=y?"jQuery.jgrid.getAccessor(this,'"+b+"')":"this";void 0===d&&(d=null);var g=d,l=void 0===h.stype?"text":h.stype;if(null!==d)switch(l){case "int":case "integer":g=isNaN(Number(g))||""===g?"0":g;k="parseInt("+k+",10)";g="parseInt("+g+",10)";break;case "float":case "number":case "numeric":g=String(g).replace(m,
"");g=isNaN(Number(g))||""===g?"0":g;k="parseFloat("+k+")";g="parseFloat("+g+")";break;case "date":case "datetime":g=String(a.jgrid.parseDate(h.newfmt||"Y-m-d",g).getTime());k='jQuery.jgrid.parseDate("'+h.srcfmt+'",'+k+").getTime()";break;default:k=f._getStr(k),g=f._getStr('"'+f._toStr(g)+'"')}f._append(k+" "+c+" "+g);f._setCommand(e,b);f._resetNegate();return f};this.equals=function(a,b,d){return f._compareValues(f.equals,a,b,"==",d)};this.notEquals=function(a,b,d){return f._compareValues(f.equals,
a,b,"!==",d)};this.isNull=function(a,b,d){return f._compareValues(f.equals,a,null,"===",d)};this.greater=function(a,b,d){return f._compareValues(f.greater,a,b,">",d)};this.less=function(a,b,d){return f._compareValues(f.less,a,b,"<",d)};this.greaterOrEquals=function(a,b,d){return f._compareValues(f.greaterOrEquals,a,b,">=",d)};this.lessOrEquals=function(a,b,d){return f._compareValues(f.lessOrEquals,a,b,"<=",d)};this.startsWith=function(e,b){var d=null==b?e:b,d=l?a.trim(d.toString()).length:d.toString().length;
y?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+d+") == "+f._getStr('"'+f._toStr(b)+'"')):(null!=b&&(d=l?a.trim(b.toString()).length:b.toString().length),f._append(f._getStr("this")+".substr(0,"+d+") == "+f._getStr('"'+f._toStr(e)+'"')));f._setCommand(f.startsWith,e);f._resetNegate();return f};this.endsWith=function(e,b){var d=null==b?e:b,d=l?a.trim(d.toString()).length:d.toString().length;y?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+f._getStr("jQuery.jgrid.getAccessor(this,'"+
e+"')")+".length-"+d+","+d+') == "'+f._toStr(b)+'"'):f._append(f._getStr("this")+".substr("+f._getStr("this")+'.length-"'+f._toStr(e)+'".length,"'+f._toStr(e)+'".length) == "'+f._toStr(e)+'"');f._setCommand(f.endsWith,e);f._resetNegate();return f};this.contains=function(a,b){y?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+f._toStr(b)+'",0) > -1'):f._append(f._getStr("this")+'.indexOf("'+f._toStr(a)+'",0) > -1');f._setCommand(f.contains,a);f._resetNegate();return f};this.groupBy=
function(a,b,d,h){return f._hasData()?f._getGroup(c,a,b,d,h):null};this.orderBy=function(e,b,d,c,h){b=null==b?"a":a.trim(b.toString().toLowerCase());null==d&&(d="text");null==c&&(c="Y-m-d");null==h&&(h=!1);if("desc"===b||"descending"===b)b="d";if("asc"===b||"ascending"===b)b="a";v.push({by:e,dir:b,type:d,datefmt:c,sfunc:h});return f};return f}(c,null)},feedback:function(c){var d=this;d instanceof jQuery&&0<d.length&&(d=d[0]);if(null==d.p||"string"!==typeof c||2>c.length)return null;var b="on"===c.substring(0,
2)?"jqGrid"+c.charAt(2).toUpperCase()+c.substring(3):"jqGrid"+c.charAt(0).toUpperCase()+c.substring(1),f=a.makeArray(arguments).slice(1),g=d.p[c],b=a(d).triggerHandler(b,f),b=!1===b||"stop"===b?!1:!0;a.isFunction(g)&&(d=g.apply(d,f),!1===d||"stop"===d)&&(b=!1);return b},getMethod:function(c){return this.getAccessor(a.fn.jqGrid,c)},extend:function(c){a.extend(a.fn.jqGrid,c);this.no_legacy_api||a.fn.extend(c)}});a.fn.jqGrid=function(c){if("string"===typeof c){var d=a.jgrid.getMethod(c);if(!d)throw"jqGrid - No such method: "+
c;var b=a.makeArray(arguments).slice(1);return d.apply(this,b)}return this.each(function(){if(!this.grid){var b=this,d,h=a.jgrid,l=h.clearArray,k=h.feedback,m=h.getGridComponentIdSelector,n=h.getGridComponentId,p=h.getGridComponent,r=h.jqID,q=h.getAccessor,w=h.stripPref,v=h.getCellIndex,y=null!=h.defaults&&a.isFunction(h.defaults.fatalError)?h.defaults.fatalError:alert;null!=c&&void 0!==c.data&&(d=c.data,c.data=[]);if(null==h.defaults)return y("FATAL ERROR!!!\n\nNo locale file was found. It should be included before this file\n"),
!1;null!=h.formatter&&null!=h.formatter.unused||y("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken.");
null!=c&&(void 0===c.datatype&&void 0!==c.dataType&&(c.datatype=c.dataType,delete c.dataType),void 0===c.mtype&&void 0!==c.type&&(c.mtype=c.type,delete c.type));var e=a.extend(!0,{url:"",height:"auto",page:1,rowNum:20,maxRowNum:1E4,autoresizeOnLoad:!1,autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",widthOfVisiblePartOfSortIcon:12,minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,
colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,
beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,fullscreen:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,
gridstate:"visible",cellEdit:!1,cellsubmit:"clientArray",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!0,remapColumns:[],ajaxGridOptions:{},direction:"ltr",
toppager:!1,headertitles:!1,scrollTimeout:40,data:[],lastSelectedData:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},null==c||void 0!==c.datatype?{}:void 0!==d||null==
c.url?{datatype:"local"}:null!=c.jsonReader&&"object"===typeof c.jsonReader?{datatype:"json"}:{datatype:"xml"},h.defaults,c||{});void 0!==d&&(e.data=d,c.data=d);if("TABLE"!==b.tagName.toUpperCase())y("Element is not a table!");else if(""===b.id&&a(b).attr("id",h.randId()),void 0!==document.documentMode&&5>=document.documentMode)y("Grid can not be used in this ('quirks') mode!");else{a(b).empty().attr("tabindex","0");b.p=e;e.id=b.id;e.idSel="#"+h.jqID(b.id);e.gBoxId=n.call(b,"gBox");e.gBox=m.call(b,
"gBox");e.gViewId=n.call(b,"gView");e.gView=m.call(b,"gView");e.rsId=n.call(b,"columnResizer");e.rs=m.call(b,"columnResizer");e.cbId=n.call(b,"selectAllCheckbox");e.cb=m.call(b,"selectAllCheckbox");e.useProp=!!a.fn.prop;e.propOrAttr=e.useProp?"prop":"attr";var x=e.propOrAttr,D=function(b){var e=a(this).data("pageX");e?(e=String(e).split(";"),e=e[e.length-1],a(this).data("pageX",e+";"+b.pageX)):a(this).data("pageX",b.pageX)},u={headers:[],cols:[],footers:[],dragStart:function(b,d,c){var f=a(this.bDiv),
h=f.offset().left;this.resizing={idx:b,startX:d.pageX,sOL:d.pageX-h,moved:!1};this.hDiv.style.cursor="col-resize";this.curGbox=a(e.rs,e.gBox);this.curGbox.css({display:"block",left:d.pageX-h,top:c[1],height:c[2]});this.curGbox.data("idx",b);D.call(this.curGbox,d);k.call(p("bTable",f),"resizeStart",d,b);document.onselectstart=function(){return!1}},dragMove:function(b){var d=this.resizing;if(d){var c=b.pageX-d.startX,f=this.headers;b=f[d.idx];var h="ltr"===e.direction?b.width+c:b.width-c;d.moved=!0;
33<h&&(null==this.curGbox&&(this.curGbox=a(e.rs,e.gBox)),this.curGbox.css({left:d.sOL+c}),!0===e.forceFit?(d=f[d.idx+e.nv],c="ltr"===e.direction?d.width-c:d.width+c,c>e.autoResizing.minColWidth&&(b.newWidth=h,d.newWidth=c)):(this.newWidth="ltr"===e.direction?e.tblwidth+c:e.tblwidth-c,b.newWidth=h))}},resizeColumn:function(b,d,c){var f=this.headers,h=this.footers,g=f[b],l=g.newWidth||g.width,l=parseInt(l,10);e.colModel[b].width=l;g.width=l;g.el.style.width=l+"px";this.cols[b].style.width=l+"px";0<
h.length&&(h[b].style.width=l+"px");!0===e.forceFit?(f=f[b+e.nv],l=f.newWidth||f.width,f.width=l,f.el.style.width=l+"px",this.cols[b+e.nv].style.width=l+"px",0<h.length&&(h[b+e.nv].style.width=l+"px"),e.colModel[b+e.nv].width=l):(e.tblwidth=this.newWidth||e.tblwidth,p("bTable",a(this.bDiv)).css("width",e.tblwidth+"px"),p("hTable",a(this.hDiv)).css("width",e.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,e.footerrow&&(p("fTable",a(this.sDiv)).css("width",e.tblwidth+"px"),this.sDiv.scrollLeft=
this.bDiv.scrollLeft));c||k.call(d,"resizeStop",l,b)},dragEnd:function(){this.hDiv.style.cursor="default";this.resizing&&(null!==this.resizing&&!0===this.resizing.moved&&this.resizeColumn(this.resizing.idx,p("bTable",a(this.bDiv))),a(e.rs).removeData("pageX"),this.resizing=!1,setTimeout(function(){a(e.rs).css("display","none")},e.doubleClickSensitivity));this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var b=this,d=a(b),c=b.grid,f=c.bDiv,h=a(f);c.timer&&clearTimeout(c.timer);
c.timer=null;if(h=h.height()){var k,g;if(b.rows.length)try{g=(k=b.rows[1])?a(k).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(Ga){g=c.prevRowHeight}if(g){c.prevRowHeight=g;k=e.rowNum;c.scrollTop=f.scrollTop;var f=c.scrollTop,l=Math.round(d.position().top)-f,d=l+d.height();g*=k;var n,m,q;d<h&&0>=l&&(void 0===e.lastpage||(parseInt((d+f+g-1)/g,10)||0)<=e.lastpage)&&(m=parseInt((h-d+g-1)/g,10)||1,0<=d||2>m||!0===e.scroll?(n=(Math.round((d+f)/g)||0)+1,l=-1):l=1);0<l&&(n=(parseInt(f/g,10)||0)+1,
m=(parseInt((f+h)/g,10)||0)+2-n,q=!0);!m||e.lastpage&&(n>e.lastpage||1===e.lastpage||n===e.page&&n===e.lastpage)||(c.hDiv.loading?c.timer=setTimeout(function(){c.populateVisible.call(b)},e.scrollTimeout):(e.page=n,q&&(c.selectionPreserver.call(b),c.emptyRows.call(b,!1,!1)),c.populate.call(b,m)))}}},scrollGrid:function(b){var d=p("bTable",a(this)),c;b&&b.stopPropagation();if(0===d.length)return!0;c=d[0].grid;e.scroll&&(b=this.scrollTop,void 0===c.scrollTop&&(c.scrollTop=0),b!==c.scrollTop&&(c.scrollTop=
b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(function(){c.populateVisible.call(d[0])},e.scrollTimeout)));c.hDiv.scrollLeft=this.scrollLeft;e.footerrow&&(c.sDiv.scrollLeft=this.scrollLeft)},selectionPreserver:function(){var b=a(this),d=e.selrow,c=e.selarrrow?a.makeArray(e.selarrrow):null,f=this.grid.bDiv,h=f.scrollLeft,g=function(){var a;e.selrow=null;l(e.selarrrow);if(e.multiselect&&c&&0<c.length)for(a=0;a<c.length;a++)c[a]!==d&&b.jqGrid("setSelection",c[a],!1,null);d&&b.jqGrid("setSelection",
d,!1,null);f.scrollLeft=h;b.unbind(".selectionPreserver",g)};b.bind("jqGridGridComplete.selectionPreserver",g)}};b.grid=u;var t,A;if(0===e.colNames.length)for(t=0;t<e.colModel.length;t++)e.colNames[t]=e.colModel[t].label||e.colModel[t].name;if(e.colNames.length!==e.colModel.length)y(h.errors.model);else{var z=a("<div class='ui-jqgrid-view' role='grid' aria-multiselectable='"+!!e.multiselect+"'></div>");(d=h.msie)&&h.msiever();e.direction=a.trim(e.direction.toLowerCase());-1===a.inArray(e.direction,
["ltr","rtl"])&&(e.direction="ltr");A=e.direction;a(z).insertBefore(this);a(this).removeClass("scroll").appendTo(z);m=a("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");a(m).attr({id:e.gBoxId,dir:A}).insertBefore(z);a(z).attr("id",e.gViewId).appendTo(m);a("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(z);a("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+e.loadtext+"</div>").insertBefore(z);a(this).attr({cellspacing:"0",
cellpadding:"0",border:"0",role:"presentation","aria-labelledby":"gbox_"+this.id});var H=function(a,b){a=parseInt(a,10);return isNaN(a)?b||0:a},B=function(d,c,f,g,k,l){var n=e.colModel[d],m=n.align,q='style="',r=n.classes,p=n.name,C=[];m&&(q+="text-align:"+m+";");!0===n.hidden&&(q+="display:none;");if(0===c)q+="width: "+u.headers[d].width+"px;";else if(a.isFunction(n.cellattr)||"string"===typeof n.cellattr&&null!=h.cellattr&&a.isFunction(h.cellattr[n.cellattr]))if(d=a.isFunction(n.cellattr)?n.cellattr:
h.cellattr[n.cellattr],(g=d.call(b,k,f,g,n,l))&&"string"===typeof g)if(g=g.replace(/style/i,"style").replace(/title/i,"title"),-1<g.indexOf("title")&&(n.title=!1),-1<g.indexOf("class")&&(r=void 0),C=g.replace(/\-style/g,"-sti").split(/style/),2===C.length){C[1]=a.trim(C[1].replace(/\-sti/g,"-style").replace("=",""));if(0===C[1].indexOf("'")||0===C[1].indexOf('"'))C[1]=C[1].substring(1);q+=C[1].replace(/'/gi,'"')}else q+='"';C.length||(C[0]="",q+='"');q+=(void 0!==r?' class="'+r+'"':"")+(n.title&&
f?' title="'+h.stripHtml(f)+'"':"");q+=' aria-describedby="'+e.id+"_"+p+'"';return q+C[0]},E=function(a){return null==a||""===a?"&#160;":e.autoencode?h.htmlEncode(a):String(a)},F=function(d,c,f,h,g){var k=e.colModel[f];if(void 0!==k.formatter){d=""!==String(e.idPrefix)?w(e.idPrefix,d):d;d={rowId:d,colModel:k,gid:e.id,pos:f};if(a.isFunction(k.formatter))return k.formatter.call(b,c,d,h,g);if(a.fmatter)return a.fn.fmatter.call(b,k.formatter,c,d,h,g)}else if(k.name===e.jsonReader.id)return""!==String(e.idPrefix)?
a.jgrid.stripPref(e.idPrefix,d):d;return k.autoResizable&&"actions"!==k.formatter?"<span class='"+e.autoResizing.wrapperClassName+"'>"+E(c)+"</span>":E(c)},R=function(a,b,e,d,c,f){b=F(a,b,e,c,"add");return'<td role="gridcell" '+B(e,d,b,c,a,f)+">"+b+"</td>"},L=function(a,b,d,c){c='<input role="checkbox" type="checkbox" id="jqg_'+e.id+"_"+a+'" class="cbox" name="jqg_'+e.id+"_"+a+'"'+(c?' checked="checked" aria-checked="true"':' aria-checked="false"')+"/>";return'<td role="gridcell" '+B(b,d,"",null,
a,!0)+">"+c+"</td>"},V=function(a,b,e,d){e=(parseInt(e,10)-1)*parseInt(d,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+B(a,b,e,null,b,!0)+">"+e+"</td>"},ba=function(a){var b,d=[],c,f=e.colModel,h=f.length,g;for(c=0;c<h;c++)b=f[c],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(g="xml"===a||"xmlstring"===a?b.xmlmap||b.name:"local"!==a||e.dataTypeOrg?b.name:b.jsonmap||b.name,!1!==e.keyName&&!0===b.key&&(e.keyName=g),d.push(g));return d},ca=function(b){var d=e.remapColumns;
d&&d.length||(d=a.map(e.colModel,function(a,b){return b}));b&&(d=a.map(d,function(a){return a<b?null:a-b}));return d},ea=function(b,d){var c;c=this.rows;var f=this.grid.bDiv;e.deepempty?a(c).slice(1).remove():(c=0<c.length?c[0]:null,a(this.firstChild).empty().append(c));b&&e.scroll&&(a(f.firstChild).css({height:"auto"}),a(f.firstChild.firstChild).css({height:0,display:"none"}),0!==f.scrollTop&&(f.scrollTop=0));!0===d&&e.treeGrid&&(l(e.data),l(e.lastSelectedData),e._index={})},G=function(){var b=e.data,
d=b.length,c,f,g,k,l,n,m,r=e.localReader,p=e.colModel,w=r.cell,u=(!0===e.multiselect?1:0)+(!0===e.subGrid?1:0)+(!0===e.rownumbers?1:0),t=e.scroll?h.randId():1,v,y,x;if("local"===e.datatype&&!0===r.repeatitems){v=ca(u);y=ba("local");l=!1===e.keyName?a.isFunction(r.id)?r.id.call(this,b):r.id:e.keyName;isNaN(l)||(n=Number(l));for(c=0;c<p.length;c++)if(p[c].name===l){n=c;break}for(c=0;c<d;c++){g=b[c];k=w?q(g,w)||g:g;x=a.isArray(k)?v:y;f=!1===e.keyName?q(g,l):q(k,x[n]);void 0===f&&(isNaN(l)||null==p[Number(l)+
u]||(f=q(k,x[Number(l)])),void 0===f&&(f=t+c));g={};g[r.id]=f;for(f=0;f<x.length;f++)m=q(k,x[f]),g[p[f+u].name]=m;a.extend(!0,b[c],g)}}},T=function(){var a=e.data.length,b,d,c;b=!1===e.keyName||e.loadonce?e.localReader.id:e.keyName;e._index={};for(d=0;d<a;d++)c=q(e.data[d],b),void 0===c&&(c=String(d+1)),e._index[c]=d},sa=function(b,d,c,f,g,k){var l="-1",n="",m;d=d?"display:none;":"";c="ui-widget-content jqgrow ui-row-"+e.direction+(c?" "+c:"")+(k?" ui-state-highlight":"");k=a(this).triggerHandler("jqGridRowAttr",
[f,g,b]);"object"!==typeof k&&(k=a.isFunction(e.rowattr)?e.rowattr.call(this,f,g,b):"string"===typeof e.rowattr&&null!=h.rowattr&&a.isFunction(h.rowattr[e.rowattr])?h.rowattr[e.rowattr].call(this,f,g,b):{});if(null!=k&&!a.isEmptyObject(k)){k.hasOwnProperty("id")&&(b=k.id,delete k.id);k.hasOwnProperty("tabindex")&&(l=k.tabindex,delete k.tabindex);k.hasOwnProperty("style")&&(d+=k.style,delete k.style);k.hasOwnProperty("class")&&(c+=" "+k["class"],delete k["class"]);try{delete k.role}catch(Ha){}for(m in k)k.hasOwnProperty(m)&&
(n+=" "+m+"="+k[m])}return'<tr role="row" id="'+b+'" tabindex="'+l+'" class="'+c+'"'+(""===d?"":' style="'+d+'"')+n+">"},ta=function(){a(this).off("mouseover",".ui-inline-button").on("mouseover",".ui-inline-button",function(){a(this).addClass("ui-state-hover")}).off("mouseout",".ui-inline-button").on("mouseout",".ui-inline-button",function(){a(this).removeClass("ui-state-hover")}).off("click",".ui-inline-edit:not(.ui-inline-edit-form)").on("click",".ui-inline-edit:not(.ui-inline-edit-form)",function(b){a.fn.fmatter.rowactions.call(this,
b,"edit")}).off("click",".ui-inline-edit.ui-inline-edit-form").on("click",".ui-inline-edit.ui-inline-edit-form",function(b){a.fn.fmatter.rowactions.call(this,b,"formedit")}).off("click",".ui-inline-del").on("click",".ui-inline-del",function(b){a.fn.fmatter.rowactions.call(this,b,"del")}).off("click",".ui-inline-save").on("click",".ui-inline-save",function(b){a.fn.fmatter.rowactions.call(this,b,"save")}).off("click",".ui-inline-cancel").on("click",".ui-inline-cancel",function(b){a.fn.fmatter.rowactions.call(this,
b,"cancel")})},aa=function(b,d,c,f){var g=a(this),n=new Date,m=h.getXmlData,q="local"!==e.datatype&&e.loadonce||"xmlstring"===e.datatype,r=e.xmlReader,p=e.colModel,u="local"===e.datatype?"local":"xml";q&&(l(e.data),l(e.lastSelectedData),e._index={},e.localReader.id="_id_");e.reccount=0;if(a.isXMLDoc(b)){-1!==e.treeANode||e.scroll?d=1<d?d:1:(ea.call(this,!1,!0),d=1);var C,t,v=0,y,S=!0===e.multiselect?1:0,x=0,D,M=!0===e.rownumbers?1:0,X,z=[],A,G={},B,F,Q=[],E=!0===e.altRows?e.altclass:"",U;!0===e.subGrid&&
(x=1,D=h.getMethod("addSubGridCell"));r.repeatitems||(z=ba(u));X=!1===e.keyName?a.isFunction(r.id)?r.id.call(this,b):r.id:e.keyName;if(isNaN(X)&&r.repeatitems)for(C=0;C<p.length;C++)if(p[C].name===X){X=C-(S+x+M);break}u=-1===String(X).indexOf("[")?z.length?function(b,e){return a(X,b).text()||e}:function(b,e){return a(r.cell,b).eq(X).text()||e}:function(a,b){return a.getAttribute(X.replace(/[\[\]]/g,""))||b};e.userData={};e.page=H(m(b,r.page),e.page);e.lastpage=H(m(b,r.total),1);e.records=H(m(b,r.records));
a.isFunction(r.userdata)?e.userData=r.userdata.call(this,b)||{}:m(b,r.userdata,!0).each(function(){e.userData[this.getAttribute("name")]=a(this).text()});var I=!1,K;b=m(b,r.root,!0);b=m(b,r.row,!0)||[];var T=b.length,Y=0,O=[],J=parseInt(e.rowNum,10),N=e.scroll?h.randId():1,P,aa;0<T&&0>=e.page&&(e.page=1);e.grouping&&(I=!0===e.groupingView.groupCollapse,K=h.getMethod("groupingPrepare"));var W=a(this.tBodies[0]);if(b&&T)for(f&&(J*=f+1),f=function(a){var b=aa[this];if(!b)return!1;y=b.textContent||b.text;
G[p[a+S+x+M].name]=y;Q.push(R(F,y,a+S+x+M,Y+d,B,G))};Y<T;){B=b[Y];F=u(B,N+Y);F=e.idPrefix+F;C=0===d?0:d+1;U=1===(C+Y)%2?E:"";P=Q.length;Q.push("");M&&Q.push(V(0,Y,e.page,e.rowNum));S&&Q.push(L(F,M,Y,!1));x&&Q.push(D.call(g,S+M,Y+d));if(r.repeatitems)A||(A=ca(S+x+M)),aa=m(B,r.cell,!0),a.each(A,f);else for(C=0;C<z.length;C++)y=m(B,z[C]),G[p[C+S+x+M].name]=y,Q.push(R(F,y,C+S+x+M,Y+d,B,G));Q[P]=sa.call(this,F,I,U,G,B,!1);Q.push("</tr>");e.grouping&&(O.push(Q),e.groupingView._locgr||K.call(g,G,Y),Q=[]);
if(q||!0===e.treeGrid)G._id_=w(e.idPrefix,F),e.data.push(G),e._index[G._id_]=e.data.length-1;!1===e.gridview&&(W.append(Q.join("")),k.call(this,"afterInsertRow",F,G,B),l(Q));G={};v++;Y++;if(v===J)break}!0===e.gridview&&(t=-1<e.treeANode?e.treeANode:0,e.grouping?q||(g.jqGrid("groupingRender",O,p.length,e.page,J),O=null):!0===e.treeGrid&&0<t?a(this.rows[t]).after(Q.join("")):(this.firstElementChild?this.firstElementChild.innerHTML+=Q.join(""):W(W.html()+Q.join("")),this.grid.cols=this.rows[0].cells));
if(!0===e.subGrid)try{g.jqGrid("addSubGrid",S+M)}catch(Ba){}e.totaltime=new Date-n;0<v&&0===e.records&&(e.records=T);l(Q);if(!0===e.treeGrid)try{g.jqGrid("setTreeNode",t+1,v+t+1)}catch(Ba){}e.reccount=v;e.treeANode=-1;e.userDataOnFooter&&g.jqGrid("footerData","set",e.userData,!0);q&&(e.records=T,e.lastpage=Math.ceil(T/J));c||this.updatepager(!1,!0);if(q){for(c=function(a){var b=va[this];if(!b)return!1;y=b.textContent||b.text;G[p[a+S+x+M].name]=y};v<T;){B=b[v];F=u(B,v+N);F=e.idPrefix+F;if(r.repeatitems){A||
(A=ca(S+x+M));var va=m(B,r.cell,!0);a.each(A,c)}else for(C=0;C<z.length;C++)y=m(B,z[C]),G[p[C+S+x+M].name]=y;G._id_=w(e.idPrefix,F);e.grouping&&K.call(g,G,v);e.data.push(G);e._index[G._id_]=e.data.length-1;G={};v++}e.grouping&&(e.groupingView._locgr=!0,g.jqGrid("groupingRender",O,p.length,e.page,J),O=null)}ta.call(this)}},U=function(b,d,c,f){var g=a(this),n=new Date;if(b){-1!==e.treeANode||e.scroll?d=1<d?d:1:(ea.call(this,!1,!0),d=1);var m,r,p="local"!==e.datatype&&e.loadonce||"jsonstring"===e.datatype;
p&&(l(e.data),l(e.lastSelectedData),e._index={},e.localReader.id="_id_");e.reccount=0;"local"===e.datatype?(m=e.localReader,r="local"):(m=e.jsonReader,r="json");var u,C,t,v,y=e.multiselect?1:0,x=!0===e.subGrid?1:0,S,D=!0===e.rownumbers?1:0,X=ca(y+x+D);r=ba(r);var M,z,A,G,B={},F,E=[],Q=!0===e.altRows?e.altclass:"",T;e.page=H(q(b,m.page),e.page);e.lastpage=H(q(b,m.total),1);e.records=H(q(b,m.records));e.userData=q(b,m.userdata)||{};x&&(S=h.getMethod("addSubGridCell"));A=!1===e.keyName?a.isFunction(m.id)?
m.id.call(this,b):m.id:e.keyName;isNaN(A)||(G=Number(A));for(C=0;C<e.colModel.length;C++)if(e.colModel[C].name===A){G=C-(y+x+D);break}z=q(b,m.root);null==z&&a.isArray(b)&&(z=b);z||(z=[]);b=z.length;0<b&&0>=e.page&&(e.page=1);var U=parseInt(e.rowNum,10),I=e.scroll?h.randId():1,K=!1,O;f&&(U*=f+1);"local"!==e.datatype||e.deselectAfterSort||(K=!0);var J=[],N=!1,W,P;e.grouping&&(N=!0===e.groupingView.groupCollapse,W=h.getMethod("groupingPrepare"));var aa=a(this.tBodies[0]);for(C=0;C<b&&C<U;C++){v=z[C];
f=m.repeatitems&&m.cell?q(v,m.cell)||v:v;M=m.repeatitems&&a.isArray(f)?X:r;v=!1===e.keyName?q(v,A):q(f,M[G]);void 0===v&&(isNaN(A)||null==e.colModel[Number(A)+y+x+D]||(v=q(f,M[Number(A)])),void 0===v&&(v=I+C));v=e.idPrefix+v;t=1===d?0:d;T=1===(t+C)%2?Q:"";K&&(O=e.multiselect?-1!==a.inArray(v,e.selarrrow):v===e.selrow);P=E.length;E.push("");D&&E.push(V(0,C,e.page,e.rowNum));y&&E.push(L(v,D,C,O));x&&E.push(S.call(g,y+D,C+d));for(t=0;t<M.length;t++)u=q(f,M[t]),B[e.colModel[t+y+x+D].name]=u,E.push(R(v,
u,t+y+x+D,C+d,f,B));E[P]=sa.call(this,v,N,T,B,f,O);E.push("</tr>");e.grouping&&(J.push(E),e.groupingView._locgr||W.call(g,B,C),E=[]);if(p||!0===e.treeGrid)B._id_=w(e.idPrefix,v),e.data.push(B),e._index[B._id_]=e.data.length-1;!1===e.gridview&&(aa.append(E.join("")),k.call(this,"afterInsertRow",v,B,f),l(E));B={}}!0===e.gridview&&(F=-1<e.treeANode?e.treeANode:0,e.grouping?p||(g.jqGrid("groupingRender",J,e.colModel.length,e.page,U),J=null):!0===e.treeGrid&&0<F?a(this.rows[F]).after(E.join("")):(this.firstElementChild?
this.firstElementChild.innerHTML+=E.join(""):aa.html(aa.html()+E.join("")),this.grid.cols=this.rows[0].cells));if(!0===e.subGrid)try{g.jqGrid("addSubGrid",y+D)}catch(Ca){}e.totaltime=new Date-n;0<C&&0===e.records&&(e.records=b);l(E);if(!0===e.treeGrid)try{g.jqGrid("setTreeNode",F+1,C+F+1)}catch(Ca){}e.reccount=C;e.treeANode=-1;e.userDataOnFooter&&g.jqGrid("footerData","set",e.userData,!0);p&&(e.records=b,e.lastpage=Math.ceil(b/U));c||this.updatepager(!1,!0);if(p){for(d=C;d<b&&z[d];d++)if(v=z[d],f=
m.repeatitems&&m.cell?q(v,m.cell)||v:v,M=m.repeatitems&&a.isArray(f)?X:r,v=!1===e.keyName?q(v,A):q(f,M[G]),void 0===v&&(isNaN(A)||null==e.colModel[Number(A)+y+x+D]||(v=q(f,M[Number(A)])),void 0===v&&(v=I+d)),f){for(t=0;t<M.length;t++)B[e.colModel[t+y+x+D].name]=q(f,M[t]);B._id_=w(e.idPrefix,v);e.grouping&&W.call(g,B,d);e.data.push(B);e._index[B._id_]=e.data.length-1;B={}}e.grouping&&(e.groupingView._locgr=!0,g.jqGrid("groupingRender",J,e.colModel.length,e.page,U))}ta.call(this)}},va=function(){function b(a){var e=
0,d,c,f,g,h;if(null!=a.groups){(c=a.groups.length&&"OR"===a.groupOp.toString().toUpperCase())&&t.orBegin();for(d=0;d<a.groups.length;d++){0<e&&c&&t.or();try{b(a.groups[d])}catch(ua){y(ua)}e++}c&&t.orEnd()}if(null!=a.rules)try{(f=a.rules.length&&"OR"===a.groupOp.toString().toUpperCase())&&t.orBegin();for(d=0;d<a.rules.length;d++)h=a.rules[d],g=a.groupOp.toString().toUpperCase(),u[h.op]&&h.field&&(0<e&&g&&"OR"===g&&(t=t.or()),t=u[h.op](t,g)(h.field,h.data,k[h.field])),e++;f&&t.orEnd()}catch(ua){y(ua)}}
var d=a(this),c=e.multiSort?[]:"",f=[],g=!1,k={},l=[],n=[],m,r,q;if(!a.isArray(e.data))return{};var p=e.grouping?e.groupingView:!1,v,w;a.each(e.colModel,function(){var a=this.index||this.name;r=this.sorttype||"text";"date"===r||"datetime"===r?(this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?(m=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:h.formatter.date.srcformat,q=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:
h.formatter.date.newformat):m=q=this.datefmt||"Y-m-d",k[this.name]={stype:r,srcfmt:m,newfmt:q,sfunc:this.sortfunc||null}):k[this.name]={stype:r,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null};if(e.grouping)for(w=0,v=p.groupField.length;w<v;w++)this.name===p.groupField[w]&&(l[w]=k[a],n[w]=a);e.multiSort?this.lso&&(c.push(this.name),a=this.lso.split("-"),f.push(a[a.length-1])):g||this.index!==e.sortname&&this.name!==e.sortname||(c=this.name,g=!0)});if(e.treeGrid)return d.jqGrid("SortTree",c,e.sortorder,
null!=k[c]&&k[c].stype?k[c].stype:"text",null!=k[c]&&k[c].srcfmt?k[c].srcfmt:""),{};var u={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},
en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},t=h.from(e.data);e.ignoreCase&&(t=t.ignoreCase());if(!0===e.search){var x=e.postData.filters;if(x)"string"===typeof x&&(x=h.parse(x)),b(x);else try{t=u[e.postData.searchOper](t)(e.postData.searchField,
e.postData.searchString,k[e.postData.searchField])}catch(Q){}}if(e.grouping)for(w=0;w<v;w++)t.orderBy(n[w],p.groupOrder[w],l[w].stype,l[w].srcfmt);e.multiSort?a.each(c,function(a){t.orderBy(this,f[a],k[this].stype,k[this].srcfmt,k[this].sfunc)}):c&&e.sortorder&&g&&("DESC"===e.sortorder.toUpperCase()?t.orderBy(e.sortname,"d",k[c].stype,k[c].srcfmt,k[c].sfunc):t.orderBy(e.sortname,"a",k[c].stype,k[c].srcfmt,k[c].sfunc));e.lastSelectedData=t.select();var x=parseInt(e.rowNum,10),D=e.lastSelectedData.length,
z=parseInt(e.page,10),A=Math.ceil(D/x),G={};if((e.search||e.resetsearch)&&e.grouping&&e.groupingView._locgr){e.groupingView.groups=[];var B,F=h.getMethod("groupingPrepare"),E,H;if(e.footerrow&&e.userDataOnFooter){for(E in e.userData)e.userData.hasOwnProperty(E)&&(e.userData[E]=0);H=!0}for(B=0;B<D;B++){if(H)for(E in e.userData)e.userData.hasOwnProperty(E)&&(e.userData[E]+=parseFloat(e.lastSelectedData[B][E]||0));F.call(d,e.lastSelectedData[B],B,x)}}k=t=null;d=e.localReader;G[d.total]=A;G[d.page]=z;
G[d.records]=D;G[d.root]=e.lastSelectedData.slice((z-1)*x,z*x);G[d.userdata]=e.userData;ta.call(self);return G},ka=function(){this.grid.hDiv.loading=!0;e.hiddengrid||a(this).jqGrid("progressBar",{method:"show",loadtype:e.loadui,htmlcontent:e.loadtext})},ga=function(){this.grid.hDiv.loading=!1;a(this).jqGrid("progressBar",{method:"hide",loadtype:e.loadui})},da=function(d){var c=this,f=a(c),g=c.grid;if(!g.hDiv.loading){var l=e.scroll&&!1===d,n={},m,r=e.prmNames;0>=e.page&&(e.page=Math.min(1,e.lastpage));
null!==r.search&&(n[r.search]=e.search);null!==r.nd&&(n[r.nd]=(new Date).getTime());if(isNaN(parseInt(e.rowNum,10))||0>=parseInt(e.rowNum,10))e.rowNum=e.maxRowNum;null!==r.rows&&(n[r.rows]=e.rowNum);null!==r.page&&(n[r.page]=e.page);null!==r.sort&&(n[r.sort]=e.sortname);null!==r.order&&(n[r.order]=e.sortorder);null!==e.rowTotal&&null!==r.totalrows&&(n[r.totalrows]=e.rowTotal);var q=a.isFunction(e.loadComplete),p=q?e.loadComplete:null,w=0;d=d||1;1<d?null!==r.npage?(n[r.npage]=d,w=d-1,d=1):p=function(a){e.page++;
g.hDiv.loading=!1;q&&e.loadComplete.call(c,a);da.call(c,d-1)}:null!==r.npage&&delete e.postData[r.npage];if(e.grouping){f.jqGrid("groupingSetup");var t=e.groupingView,v,u="",x,C=function(a,b){b.name===x&&b.index&&(x=b.index)};for(v=0;v<t.groupField.length;v++)x=t.groupField[v],a.each(e.colModel,C),u+=x+" "+t.groupOrder[v]+", ";n[r.sort]=u+n[r.sort]}a.extend(e.postData,n);var y=e.scroll?c.rows.length-1:1;if(k.call(c,"beforeRequest"))if(a.isFunction(e.datatype))e.datatype.call(c,e.postData,"load_"+
e.id,y,d,w);else if(null!=e.url&&"local"!=e.datatype){var D=function(b){if("object"===typeof b)return e.datatype="json",b;if("function"===typeof b)return e.datatype="json",b();try{return b=a.parseJSON(b),e.datatype="json",b}catch(Ia){try{return b=a.parseXML(b),e.datatype="xml",b}catch(Ja){throw e.datatype=null,"invalid or malformed data.";}}},z=function(a){"json"===e.datatype?U.call(c,a,y,1<d,w):"xml"===e.datatype&&aa.call(c,a,y,1<d,w)};!("string"==typeof e.url||e.url instanceof String)||"/"!==e.url.substr(0,
1)&&"http"!==e.url.substr(0,4)?z(D(e.url)):a.ajax(a.extend({url:e.url,type:e.mtype,data:a.isFunction(e.serializeGridData)?e.serializeGridData.call(c,e.postData):e.postData,success:function(b,k,h){if(a.isFunction(e.beforeProcessing)&&!1===e.beforeProcessing.call(c,b,k,h))ga.call(c);else{void 0!==h.responseJSON?e.datatype="json":void 0!==h.responseXML?e.datatype="xml":b=D(b);z(b);f.triggerHandler("jqGridLoadComplete",[b]);p&&p.call(c,b);e.autoresizeOnLoad&&f.jqGrid("autoResizeAllColumns");f.triggerHandler("jqGridAfterLoadComplete",
[b]);l&&g.populateVisible();if(e.loadonce||e.treeGrid)e.dataTypeOrg=e.datatype,e.datatype="local";1===d&&ga.call(c)}},error:function(b,f,g){a.isFunction(e.loadError)&&e.loadError.call(c,b,f,g);1===d&&ga.call(c)},beforeSend:function(b,d){if(a.isFunction(e.loadBeforeSend)&&!1===e.loadBeforeSend.call(c,b,d))return!1;ka.call(c)}},h.ajaxOptions,e.ajaxGridOptions))}else switch(n=e.datatype.toLowerCase(),n){case "xmlstring":ka.call(c),m="string"!==typeof e.datastr?e.datastr:a.parseXML(e.datastr),aa.call(c,
m);case "jsonstring":ka.call(c),m="string"===typeof e.datastr?a.jgrid.parse(e.datastr):e.datastr,U.call(c,m);case "xmlstring":case "jsonstring":k.call(c,"loadComplete",m);b.p.autoresizeOnLoad&&f.jqGrid("autoResizeAllColumns");f.triggerHandler("jqGridAfterLoadComplete",[m]);e.datatype="local";e.datastr=null;ga.call(c);break;case "local":case "clientside":ka.call(c),e.datatype="local",m=va.call(c),U.call(c,m,y,1<d,w),f.triggerHandler("jqGridLoadComplete",[m]),p&&p.call(c,m),e.autoresizeOnLoad&&f.jqGrid("autoResizeAllColumns"),
f.triggerHandler("jqGridAfterLoadComplete",[m]),l&&g.populateVisible.call(c),ga.call(c)}}},na=function(b){var d=this.grid;a(e.cb,d.hDiv)[e.propOrAttr]("checked",b);if(e.frozenColumns&&e.id+"_frozen")a(e.cb,d.fhDiv)[e.propOrAttr]("checked",b)},n=function(d,c){var f="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;"+("left"===e.pagerpos?"margin-right:auto;":"right"===e.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",
k="",n,m,q,p,w=function(d){var c;a.isFunction(e.onPaging)&&(c=e.onPaging.call(b,d));if("stop"===c)return!1;e.selrow=null;e.multiselect&&(l(e.selarrrow),na.call(b,!1));l(e.savedRow);return!0};c+="_"+d;n="pg_"+d;m=d+"_left";q=d+"_center";p=d+"_right";a("#"+r(d)).append("<div id='"+n+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+m+"' style='text-align:left;'></td><td id='"+
q+"' style='text-align:center;white-space:pre;'></td><td id='"+p+"' style='text-align:right;'></td></tr></tbody></table></div>").attr("dir","ltr");n="#"+r(n);if(0<e.rowList.length){k="<td dir='"+A+"'>";k+="<select class='ui-pg-selbox' role='listbox' "+(e.pgrecs?"title='"+e.pgrecs+"'":"")+">";for(m=0;m<e.rowList.length;m++)q=e.rowList[m].toString().split(":"),1===q.length&&(q[1]=q[0]),k+='<option role="option" value="'+q[0]+'"'+(H(e.rowNum,0)===H(q[0],0)?' selected="selected"':"")+">"+q[1]+"</option>";
k+="</select></td>"}"rtl"===A&&(g+=k);!0===e.pginput&&(f="<td dir='"+A+"'>"+h.format(e.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+d+"'></span>")+"</td>");d="#"+r(d);!0===e.pgbuttons?(m=["first"+c,"prev"+c,"next"+c,"last"+c],"rtl"===A&&m.reverse(),g+="<td id='"+m[0]+"' class='ui-pg-button ui-corner-all' "+(e.pgfirst?"title='"+e.pgfirst+"'":"")+"><span class='ui-icon ui-icon-seek-first'></span></td>",g+="<td id='"+m[1]+"' class='ui-pg-button ui-corner-all' "+
(e.pgprev?"title='"+e.pgprev+"'":"")+"><span class='ui-icon ui-icon-seek-prev'></span></td>",g=g+(""!==f?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+f+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+m[2]+"' class='ui-pg-button ui-corner-all' "+(e.pgnext?"title='"+e.pgnext+"'":"")+"><span class='ui-icon ui-icon-seek-next'></span></td>"),g+="<td id='"+m[3]+"' class='ui-pg-button ui-corner-all' "+
(e.pglast?"title='"+e.pglast+"'":"")+"><span class='ui-icon ui-icon-seek-end'></span></td>"):""!==f&&(g+=f);"ltr"===A&&(g+=k);g+="</tr></tbody></table>";!0===e.viewrecords&&a("td"+d+"_"+e.recordpos,n).append("<div dir='"+A+"' style='text-align:"+e.recordpos+"' class='ui-paging-info'></div>");a("td"+d+"_"+e.pagerpos,n).append(g);k=a(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";a(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ></div>");
g=a(g).clone().appendTo("#testpg").width();a("#testpg").remove();0<g&&(""!==f&&(g+=50),a("td"+d+"_"+e.pagerpos,n).width(g));e._nvtd=[];e._nvtd[0]=g?Math.floor((e.width-g)/2):Math.floor(e.width/3);e._nvtd[1]=0;g=null;a(".ui-pg-selbox",n).bind("change",function(){if(!w("records"))return!1;e.page=Math.round(e.rowNum*(e.page-1)/this.value-.5)+1;e.rowNum=this.value;e.pager&&a(".ui-pg-selbox",e.pager).val(this.value);e.toppager&&a(".ui-pg-selbox",e.toppager).val(this.value);da.call(b);return!1});!0===e.pgbuttons&&
(a(".ui-pg-button",n).hover(function(){a(this).hasClass("ui-state-disabled")?this.style.cursor="default":(a(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){a(this).hasClass("ui-state-disabled")||(a(this).removeClass("ui-state-hover"),this.style.cursor="default")}),a("#first"+r(c)+", #prev"+r(c)+", #next"+r(c)+", #last"+r(c)).click(function(){if(a(this).hasClass("ui-state-disabled"))return!1;var d=H(e.page,1),f=H(e.lastpage,1),g=!1,k=!0,h=!0,l=!0,n=!0;0===f||1===f?n=l=h=k=
!1:1<f&&1<=d?1===d?h=k=!1:d===f&&(n=l=!1):1<f&&0===d&&(n=l=!1,d=f-1);if(!w(this.id))return!1;this.id==="first"+c&&k&&(e.page=1,g=!0);this.id==="prev"+c&&h&&(e.page=d-1,g=!0);this.id==="next"+c&&l&&(e.page=d+1,g=!0);this.id==="last"+c&&n&&(e.page=f,g=!0);g&&da.call(b);return!1}));!0===e.pginput&&a("input.ui-pg-input",n).keypress(function(d){if(13===(d.charCode||d.keyCode||0)){if(!w("user"))return!1;a(this).val(H(a(this).val(),1));e.page=0<a(this).val()?a(this).val():e.page;da.call(b);return!1}return this})},
Da=function(d,c){var f,g="",k=e.colModel,h=!1,l;l=e.frozenColumns?c:b.grid.headers[d].el;var n="";a("span.ui-grid-ico-sort",l).addClass("ui-state-disabled");a(l).attr("aria-selected","false");if(k[d].lso)if("asc"===k[d].lso)k[d].lso+="-desc",n="desc";else if("desc"===k[d].lso)k[d].lso+="-asc",n="asc";else{if("asc-desc"===k[d].lso||"desc-asc"===k[d].lso)k[d].lso=""}else k[d].lso=n=k[d].firstsortorder||"asc";n?(a("span.s-ico",l).show(),a("span.ui-icon-"+n,l).removeClass("ui-state-disabled"),a(l).attr("aria-selected",
"true")):e.viewsortcols[0]||a("span.s-ico",l).hide();e.sortorder="";a.each(k,function(a){this.lso&&(0<a&&h&&(g+=", "),f=this.lso.split("-"),g+=k[a].index||k[a].name,g+=" "+f[f.length-1],h=!0,e.sortorder=f[f.length-1])});l=g.lastIndexOf(e.sortorder);g=g.substring(0,l);e.sortname=g},xa=function(b,d,c,f,g){if(e.colModel[d].sortable&&!(0<e.savedRow.length)){c||(e.lastsort===d&&""!==e.sortname?"asc"===e.sortorder?e.sortorder="desc":"desc"===e.sortorder&&(e.sortorder="asc"):e.sortorder=e.colModel[d].firstsortorder||
"asc",e.page=1);if(e.multiSort)Da(d,g);else{if(f){if(e.lastsort===d&&e.sortorder===f&&!c)return;e.sortorder=f}c=this.grid.headers[e.lastsort]?this.grid.headers[e.lastsort].el:null;g=e.frozenColumns?g:this.grid.headers[d].el;a("span.ui-grid-ico-sort",c).addClass("ui-state-disabled");a(c).attr("aria-selected","false");e.frozenColumns&&(this.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),this.grid.fhDiv.find("th").attr("aria-selected","false"));a("span.ui-icon-"+e.sortorder,g).removeClass("ui-state-disabled");
a(g).attr("aria-selected","true");e.viewsortcols[0]||(e.lastsort!==d?(e.frozenColumns&&this.grid.fhDiv.find("span.s-ico").hide(),a("span.s-ico",c).hide(),a("span.s-ico",g).show()):""===e.sortname&&a("span.s-ico",g).show());b=b.substring(5+e.id.length+1);e.sortname=e.colModel[d].index||b}k.call(this,"onSortCol",e.sortname,d,e.sortorder)?("local"===e.datatype?e.deselectAfterSort&&a(this).jqGrid("resetSelection"):(e.selrow=null,e.multiselect&&na.call(this,!1),l(e.selarrrow),l(e.savedRow)),e.scroll&&
(g=this.grid.bDiv.scrollLeft,ea.call(this,!0,!1),this.grid.hDiv.scrollLeft=g),e.subGrid&&"local"===e.datatype&&a("td.sgexpanded","#"+r(e.id)).each(function(){a(this).trigger("click")}),da.call(this),e.lastsort=d,e.sortname!==b&&d&&(e.lastsort=d)):e.lastsort=d}},Ea=function(d){d=a(b.grid.headers[d].el);d=[d.position().left+d.outerWidth()];"rtl"===e.direction&&(d[0]=e.width-d[0]);d[0]-=b.grid.bDiv.scrollLeft;d.push(a(b.grid.hDiv).position().top);d.push(a(b.grid.bDiv).offset().top-a(b.grid.hDiv).offset().top+
a(b.grid.bDiv).height());return d},ya=function(a){var d,e=b.grid.headers,c=v(a);for(d=0;d<e.length;d++)if(a===e[d].el){c=d;break}return c},K;-1===a.inArray(e.multikey,["shiftKey","altKey","ctrlKey"])&&(e.multikey=!1);e.keyName=!1;for(t=0;t<e.colModel.length;t++)K="string"===typeof e.colModel[t].template?null!=h.cmTemplate&&"object"===typeof h.cmTemplate[e.colModel[t].template]?h.cmTemplate[e.colModel[t].template]:{}:e.colModel[t].template,e.colModel[t]=a.extend(!0,{},e.cmTemplate,K||{},e.colModel[t]),
!1===e.keyName&&!0===e.colModel[t].key&&(e.keyName=e.colModel[t].name);e.sortorder=e.sortorder.toLowerCase();h.cell_width=h.cellWidth();!0===e.grouping&&(e.scroll=!1,e.rownumbers=!1,e.treeGrid=!1,e.gridview=!0);if(!0===e.treeGrid){try{a(this).jqGrid("setTreeGrid")}catch(C){}"local"!==e.datatype&&(e.localReader={id:"_id_"})}if(e.subGrid)try{a(b).jqGrid("setSubGrid")}catch(C){}e.multiselect&&(e.colNames.unshift("<input role='checkbox' id='"+e.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),
e.colModel.unshift({name:"cb",width:h.cell_width?e.multiselectWidth+e.cellLayout:e.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));e.rownumbers&&(e.colNames.unshift(""),e.colModel.unshift({name:"rn",width:e.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));e.xmlReader=a.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",
row:"row",repeatitems:!0,cell:"cell"}},e.xmlReader);e.jsonReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},e.jsonReader);e.localReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},e.localReader);e.scroll&&(e.pgbuttons=!1,e.pginput=!1,e.rowList=
[]);e.data.length&&(G.call(b),T());K="<thead><tr class='ui-jqgrid-labels' role='row'>";var W,O,oa,la,ha,I,ia,N,J,ja;I=ja="";var ma=[],za=[];O=[];if(!0===e.shrinkToFit&&!0===e.forceFit)for(t=e.colModel.length-1;0<=t;t--)if(!0!==e.colModel[t].hidden){e.colModel[t].resizable=!1;break}"horizontal"===e.viewsortcols[1]&&(ja=" ui-i-asc",I=" ui-i-desc");W=d?"ui-th-div-ie":"";ja="<span class='s-ico' style='display:none'><span class='ui-grid-ico-sort ui-icon-asc"+ja+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+
A+"'></span>"+("<span class='ui-grid-ico-sort ui-icon-desc"+I+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+A+"'></span></span>");if(e.multiSort)for(ma=e.sortname.split(","),t=0;t<ma.length;t++)O=a.trim(ma[t]).split(" "),ma[t]=a.trim(O[0]),za[t]=O[1]?a.trim(O[1]):e.sortorder||"asc";for(t=0;t<e.colNames.length;t++){I=e.colModel[t];O=e.headertitles?' title="'+h.stripHtml(e.colNames[t])+'"':"";K+="<th id='"+e.id+"_"+I.name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+
A+"'"+O+">";O=I.index||I.name;switch(I.labelAlign){case "left":ia="text-align:left;";break;case "right":ia="text-align:right;"+(!1===I.sortable?"":"padding-right:"+e.autoResizing.widthOfVisiblePartOfSortIcon+"px;");break;case "likeData":ia=void 0===I.align||"left"===I.align?"text-align:left;":"right"===I.align?"text-align:right;"+(!1===I.sortable?"":"padding-right:"+e.autoResizing.widthOfVisiblePartOfSortIcon+"px;"):"";break;default:ia=""}K+="<div id='jqgh_"+e.id+"_"+I.name+"'"+(""!==W||I.labelClasses?
" class='"+(""!==W?W+" ":"")+I.labelClasses+"'":"")+(""===ia?"":" style='"+ia+"'")+">"+(I.autoResizable&&"actions"!==I.formatter?"<span class='"+e.autoResizing.wrapperClassName+"'>"+e.colNames[t]+"</span>":e.colNames[t]);I.width=I.width?parseInt(I.width,10):150;"boolean"!==typeof I.title&&(I.title=!0);I.lso="";O===e.sortname&&(e.lastsort=t);e.multiSort&&(O=a.inArray(O,ma),-1!==O&&(I.lso=za[O]));K+=ja+"</div></th>"}K+="</tr></thead>";ja=null;a(this).append(K);a("thead tr:first th",this).hover(function(){a(this).addClass("ui-state-hover")},
function(){a(this).removeClass("ui-state-hover")});if(e.multiselect){var wa=[],pa;a(e.cb,this).bind("click",function(){l(e.selarrrow);var d=!0===e.frozenColumns?e.id+"_frozen":"";this.checked?(a(b.rows).each(function(c){0<c&&!(a(this).hasClass("ui-subgrid")||a(this).hasClass("jqgroup")||a(this).hasClass("ui-state-disabled")||a(this).hasClass("jqfoot"))&&(a("#jqg_"+r(e.id)+"_"+r(this.id))[e.propOrAttr]("checked",!0),a(this).addClass("ui-state-highlight").attr("aria-selected","true"),e.selarrrow.push(this.id),
e.selrow=this.id,d&&(a("#jqg_"+r(e.id)+"_"+r(this.id),b.grid.fbDiv)[e.propOrAttr]("checked",!0),a("#"+r(this.id),b.grid.fbDiv).addClass("ui-state-highlight")))}),pa=!0,wa=[]):(a(b.rows).each(function(c){0<c&&!(a(this).hasClass("ui-subgrid")||a(this).hasClass("jqgroup")||a(this).hasClass("ui-state-disabled")||a(this).hasClass("jqfoot"))&&null===h.detectRowEditing.call(b,this.id)&&(a("#jqg_"+r(e.id)+"_"+r(this.id))[e.propOrAttr]("checked",!1),a(this).removeClass("ui-state-highlight").attr("aria-selected",
"false"),wa.push(this.id),d&&(a("#jqg_"+r(e.id)+"_"+r(this.id),b.grid.fbDiv)[e.propOrAttr]("checked",!1),a("#"+r(this.id),b.grid.fbDiv).removeClass("ui-state-highlight")))}),e.selrow=null,pa=!1);k.call(b,"onSelectAll",pa?e.selarrrow:wa,pa)})}!0===e.autowidth&&(K=a(m).innerWidth(),e.width=0<K?K:"nw");e.widthOrg=e.width;(function(){var b=0,d=h.cell_width?0:H(e.cellLayout,0),c=0,f,g=H(e.scrollOffset,0),k,l=!1,n,m=0,r;a.each(e.colModel,function(){void 0===this.hidden&&(this.hidden=!1);if(e.grouping&&
e.autowidth){var f=a.inArray(this.name,e.groupingView.groupField);0<=f&&e.groupingView.groupColumnShow.length>f&&(this.hidden=!e.groupingView.groupColumnShow[f])}this.widthOrg=k=H(this.width,0);!1===this.hidden&&(b+=k+d,this.fixed?m+=k+d:c++)});isNaN(e.width)&&(e.width=b+(!1!==e.shrinkToFit||isNaN(e.height)?0:g));u.width=e.width;e.tblwidth=b;!1===e.shrinkToFit&&!0===e.forceFit&&(e.forceFit=!1);!0===e.shrinkToFit&&0<c&&(n=u.width-d*c-m,isNaN(e.height)||(n-=g,l=!0),b=0,a.each(e.colModel,function(a){!1!==
this.hidden||this.fixed||(this.width=k=Math.round(n*this.width/(e.tblwidth-d*c-m)),b+=k,f=a)}),r=0,l?u.width-m-(b+d*c)!==g&&(r=u.width-m-(b+d*c)-g):l||1===Math.abs(u.width-m-(b+d*c))||(r=u.width-m-(b+d*c)),e.colModel[f].width+=r,e.tblwidth=b+r+d*c+m,e.tblwidth>e.width&&(e.colModel[f].width-=e.tblwidth-parseInt(e.width,10),e.tblwidth=e.width))})();a(m).css("width",u.width+"px").append("<div class='ui-jqgrid-resize-mark' id='"+e.rsId+"'>&#160;</div>");a(e.rs).click(D).dblclick(function(d){var c=a(this).data("idx"),
f=a(this).data("pageX"),g,h,l=e.colModel[c];if(null==f)return!1;f=String(f).split(";");g=parseFloat(f[0]);h=parseFloat(f[1]);if(2===f.length&&(5<Math.abs(g-h)||5<Math.abs(d.pageX-g)||5<Math.abs(d.pageX-h)))return!1;k.call(b,"resizeDblClick",c,l,d)&&null!=l&&l.autoResizable&&a(b).jqGrid("autoResizeColumn",c);return!1});a(z).css("width",u.width+"px");K=a("thead:first",b).get(0);var qa="";e.footerrow&&(qa+="<table role='presentation' style='width:"+e.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+
A+"'>");var z=a("tr:first",K),ra="<tr class='jqgfirstrow' role='row' style='height:auto'>";e.disableClick=!1;a("th",z).each(function(b){oa=e.colModel[b].width;void 0===e.colModel[b].resizable&&(e.colModel[b].resizable=!0);e.colModel[b].resizable?(la=document.createElement("span"),a(la).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+A).css("cursor","col-resize"),a(this).addClass(e.resizeclass)):la="";a(this).css("width",oa+"px").prepend(la);la=null;var d="";!0===e.colModel[b].hidden&&
(a(this).css("display","none"),d="display:none;");ra+="<td role='gridcell' style='height:0;width:"+oa+"px;"+d+"'></td>";u.headers[b]={width:oa,el:this};ha=e.colModel[b].sortable;"boolean"!==typeof ha&&(ha=e.colModel[b].sortable=!0);d=e.colModel[b].name;"cb"!==d&&"subgrid"!==d&&"rn"!==d&&e.viewsortcols[2]&&ha&&a(">div",this).addClass("ui-jqgrid-sortable");ha&&(e.multiSort?e.viewsortcols[0]?(a("div span.s-ico",this).show(),e.colModel[b].lso&&a("div span.ui-icon-"+e.colModel[b].lso,this).removeClass("ui-state-disabled")):
e.colModel[b].lso&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+e.colModel[b].lso,this).removeClass("ui-state-disabled")):e.viewsortcols[0]?(a("div span.s-ico",this).show(),b===e.lastsort&&a("div span.ui-icon-"+e.sortorder,this).removeClass("ui-state-disabled")):b===e.lastsort&&""!==e.sortname&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+e.sortorder,this).removeClass("ui-state-disabled")));e.footerrow&&(qa+="<td role='gridcell' "+B(b,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(b){if(1===
a(b.target).closest("th>span.ui-jqgrid-resize").length){var d=ya(this);if(!0===e.forceFit){var c=d,f;for(f=d+1;f<e.colModel.length;f++)if(!0!==e.colModel[f].hidden){c=f;break}e.nv=c-d}u.dragStart(d,b,Ea(d));return!1}}).click(function(d){if(e.disableClick)return e.disableClick=!1;var c="th>div.ui-jqgrid-sortable",f,g;e.viewsortcols[2]||(c="th>div>span>span.ui-grid-ico-sort");d=a(d.target).closest(c);if(1===d.length){var k;if(e.frozenColumns){var h=a(this)[0].id.substring(e.id.length+1);a(e.colModel).each(function(a){if(this.name===
h)return k=a,!1})}else k=ya(this);e.viewsortcols[2]||(f=!0,g=d.hasClass("ui-icon-desc")?"desc":"asc");null!=k&&xa.call(b,a("div",this)[0].id,k,f,g,this);return!1}});if(e.sortable&&a.fn.sortable)try{a(b).jqGrid("sortableColumns",z)}catch(C){}e.footerrow&&(qa+="</tr></tbody></table>");ra+="</tr>";z=document.createElement("tbody");this.appendChild(z);a(this).addClass("ui-jqgrid-btable").append(ra);var ra=null,z=a("<table class='ui-jqgrid-htable' style='width:"+e.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+
this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(K),Z=e.caption&&!0===e.hiddengrid?!0:!1;t=a("<div class='ui-jqgrid-hbox"+("rtl"===A?"-rtl":"")+"'></div>");K=null;u.hDiv=document.createElement("div");a(u.hDiv).css({width:u.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(t);a(t).append(z);z=null;Z&&a(u.hDiv).hide();e.pager&&("string"===typeof e.pager&&"#"!==e.pager.substr(0,1)?(z=e.pager,K=a("#"+r(e.pager))):(K=a(e.pager),z=K.attr("id")),0<K.length?(K.css({width:u.width+
"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(m),Z&&K.hide(),n(z,""),e.pager="#"+r(z)):e.pager="");!1===e.cellEdit&&!0===e.hoverrows&&a(b).bind("mouseover",function(b){J=a(b.target).closest("tr.jqgrow");"ui-subgrid"!==a(J).attr("class")&&a(J).addClass("ui-state-hover")}).bind("mouseout",function(b){J=a(b.target).closest("tr.jqgrow");a(J).removeClass("ui-state-hover")});var P,fa,Aa;a(b).before(u.hDiv).click(function(d){N=d.target;J=a(N,b.rows).closest("tr.jqgrow");if(0===
a(J).length||-1<J[0].className.indexOf("ui-state-disabled")||(a(N,b).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==b.id)return this;P=J[0].id;var c=a(N).hasClass("cbox"),f=k.call(b,"beforeSelectRow",P,d),g=h.detectRowEditing.call(b,P),g=null!=g&&"cellEditing"!==g.mode;if("A"!==N.tagName&&(!g||c))if(N=a(N).closest("tr.jqgrow>td"),0<N.length&&(fa=v(N),Aa=a(N).closest("td,th").html(),k.call(b,"onCellSelect",P,fa,Aa,d)),!0===e.cellEdit)if(e.multiselect&&c&&f)a(b).jqGrid("setSelection",
P,!0,d);else{if(0<N.length){P=J[0].rowIndex;try{a(b).jqGrid("editCell",P,fa,!0)}catch(Fa){}}}else if(f)if(e.multikey)d[e.multikey]?a(b).jqGrid("setSelection",P,!0,d):e.multiselect&&c&&(c=a("#jqg_"+r(e.id)+"_"+P).is(":checked"),a("#jqg_"+r(e.id)+"_"+P)[x]("checked",c));else if(e.multiselect&&e.multiboxonly){if(!c){var n=e.frozenColumns?e.id+"_frozen":"";a(e.selarrrow).each(function(d,c){var f=a(b).jqGrid("getGridRowById",c);f&&a(f).removeClass("ui-state-highlight");a("#jqg_"+r(e.id)+"_"+r(c))[e.propOrAttr]("checked",
!1);n&&(a("#"+r(c),"#"+r(n)).removeClass("ui-state-highlight"),a("#jqg_"+r(e.id)+"_"+r(c),"#"+r(n))[e.propOrAttr]("checked",!1))});l(e.selarrrow)}a(b).jqGrid("setSelection",P,!0,d)}else c=e.selrow,a(b).jqGrid("setSelection",P,!0,d),"toggle"===e.singleSelectClickMode&&c===P&&(N.parent().removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),e.selrow=null)}).bind("reloadGrid",function(b,d){var c=this.grid,f=a(this);!0===e.treeGrid&&(e.datatype=e.treedatatype);d=d||{};"local"===
e.datatype&&e.dataTypeOrg&&e.loadonce&&d.fromServer&&(e.datatype=String(e.dataTypeOrg),delete e.dataTypeOrg);d.current&&c.selectionPreserver.call(this);"local"===e.datatype?(f.jqGrid("resetSelection"),e.data.length&&(G.call(this),T())):e.treeGrid||(e.selrow=null,e.multiselect&&(l(e.selarrrow),na.call(this,!1)),l(e.savedRow));e.scroll&&ea.call(this,!0,!1);if(d.page){var g=parseInt(d.page,10);g>e.lastpage&&(g=e.lastpage);1>g&&(g=1);e.page=g;c.bDiv.scrollTop=c.prevRowHeight?(g-1)*c.prevRowHeight*e.rowNum:
0}c.prevRowHeight&&e.scroll?(delete e.lastpage,c.populateVisible.call(this)):c.populate.call(this);!0===e._inlinenav&&f.jqGrid("showAddEditButtons");return!1}).dblclick(function(d){N=d.target;J=a(N,b.rows).closest("tr.jqgrow");if(0!==a(J).length&&(P=J[0].rowIndex,fa=v(N),!k.call(b,"ondblClickRow",a(J).attr("id"),P,fa,d)))return!1}).bind("contextmenu",function(d){N=d.target;J=a(N,b.rows).closest("tr.jqgrow");if(0!==a(J).length&&(e.multiselect||a(b).jqGrid("setSelection",J[0].id,!0,d),P=J[0].rowIndex,
fa=v(N),!k.call(b,"onRightClickRow",a(J).attr("id"),P,fa,d)))return!1});u.bDiv=document.createElement("div");d&&"auto"===String(e.height).toLowerCase()&&(e.height="100%");a(u.bDiv).append(a('<div style="position:relative;"></div>').append("<div></div>").append(b)).addClass("ui-jqgrid-bdiv").css({height:e.height+(isNaN(e.height)?"":"px"),width:u.width+"px"}).scroll(u.scrollGrid);a(b).css({width:e.tblwidth+"px"});a.support.tbody||2===a(">tbody",this).length&&a(">tbody:gt(0)",this).remove();e.multikey&&
(h.msie?a(u.bDiv).bind("selectstart",function(){return!1}):a(u.bDiv).bind("mousedown",function(){return!1}));Z&&a(u.bDiv).hide();u.cDiv=document.createElement("div");a(u.cDiv).append("<span class='ui-jqgrid-title'>"+e.caption+"</span>").append(function(){if(e.caption&&!0===e.hidegrid){var d=e.datatype;return a('<a role="link" class="ui-button ui-icon ui-icon-circle-triangle-n" '+(e.showhide?'title="'+e.showhide+'"':"")+' style="float:'+("rtl"===A?"left":"right")+';" />').click(function(c){var f=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",
g,h=this;!0===e.toolbar[0]&&("both"===e.toolbar[1]&&(f+=",#"+r(a(u.ubDiv).attr("id"))),f+=",#"+r(a(u.uDiv).attr("id")));g=a(f,e.gView).length;e.toppager&&(f+=","+e.toppager);"visible"===e.gridstate?a(f,e.gBox).slideUp("fast",function(){g--;0===g&&(a(h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),e.gridstate="hidden",a(e.gBox).hasClass("ui-resizable")&&a(".ui-resizable-handle",e.gBox).hide(),a(u.cDiv).addClass("ui-corner-bottom"),Z||k.call(b,"onHeaderClick",e.gridstate,
c))}):"hidden"===e.gridstate&&(a(u.cDiv).removeClass("ui-corner-bottom"),a(f,e.gBox).slideDown("fast",function(){g--;0===g&&(a(h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),Z&&(e.datatype=d,da.call(b),Z=!1),e.gridstate="visible",a(e.gBox).hasClass("ui-resizable")&&a(".ui-resizable-handle",e.gBox).show(),Z||k.call(b,"onHeaderClick",e.gridstate,c))}));return!1})}return""}).append(function(){return e.caption&&!0===e.fullscreen&&screenfull.enabled?(e.heightOrg=e.height,
a('<a role="link" class="ui-button ui-icon ui-icon-arrow-4-diag" '+(e.fsHint?'title="'+e.fsHint+'"':"")+' style="float:'+("rtl"===A?"left":"right")+';" />').click(function(){screenfull.toggle(document.getElementById(e.gBoxId));a(e.idSel).jqGrid("setGridWidth",parseInt(a(window).width())).jqGrid("setGridHeight",parseInt(a(window).height()));document.addEventListener(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen||a(e.idSel).jqGrid("setGridWidth",e.widthOrg).jqGrid("setGridHeight",
e.heightOrg)})})):""}).addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===A?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");a(u.cDiv).insertBefore(u.hDiv);e.toolbar[0]&&(u.uDiv=document.createElement("div"),"top"===e.toolbar[1]?a(u.uDiv).insertBefore(u.hDiv):"bottom"===e.toolbar[1]&&a(u.uDiv).insertAfter(u.hDiv),"both"===e.toolbar[1]?(u.ubDiv=document.createElement("div"),a(u.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(u.hDiv),a(u.ubDiv).addClass("ui-userdata ui-state-default").attr("id",
"tb_"+this.id).insertAfter(u.hDiv),Z&&a(u.ubDiv).hide()):a(u.uDiv).width(u.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),Z&&a(u.uDiv).hide());e.datatype=e.datatype.toLowerCase();e.toppager?(e.toppager=e.id+"_toppager",u.topDiv=a("<div id='"+e.toppager+"'></div>")[0],a(u.topDiv).addClass("ui-state-default ui-jqgrid-toppager").css({width:u.width+"px"}).insertBefore(u.hDiv),n(e.toppager,"_t"),e.toppager="#"+r(e.toppager)):""!==e.pager||e.scroll||(e.rowNum=e.maxRowNum);e.footerrow&&
(u.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0],t=a("<div class='ui-jqgrid-hbox"+("rtl"===A?"-rtl":"")+"'></div>"),a(u.sDiv).append(t).width(u.width).insertAfter(u.hDiv),a(t).append(qa),u.footers=a(".ui-jqgrid-ftable",u.sDiv)[0].rows[0].cells,e.rownumbers&&(u.footers[0].className="ui-state-default jqgrid-rownum"),Z&&a(u.sDiv).hide());t=null;e.caption?Z&&(e.datatype="local",a(".ui-jqgrid-titlebar-close",u.cDiv).trigger("click")):(a(u.cDiv).hide(),a(u.cDiv).nextAll("div:visible").filter(":first").addClass("ui-corner-top"));
a(u.hDiv).after(u.bDiv).mousemove(function(a){if(u.resizing)return u.dragMove(a),!1});a(m).click(D).dblclick(function(d){var c,f,g,h=a(e.rs),l=h.offset(),n=h.data("idx"),m=e.colModel[n];c=a(this).data("pageX")||h.data("pageX");if(null==c)return!1;c=String(c).split(";");f=parseFloat(c[0]);g=parseFloat(c[1]);if(2===c.length&&(5<Math.abs(f-g)||5<Math.abs(d.pageX-f)||5<Math.abs(d.pageX-g)))return!1;k.call(b,"resizeDblClick",n,m)&&l.left-1<=d.pageX&&d.pageX<=l.left+h.outerWidth()+1&&null!=m&&m.autoResizable&&
a(b).jqGrid("autoResizeColumn",n);return!1});e.pager||a(u.cDiv).nextAll("div:visible").filter(":last").addClass("ui-corner-bottom");a(".ui-jqgrid-labels",u.hDiv).bind("selectstart",function(){return!1});a(document).bind("mouseup.jqGrid"+e.id,function(){return!1!==u.resizing?(u.dragEnd(),!1):!0});b.formatCol=B;b.sortData=xa;b.updatepager=function(b,d){var c=a(this),f=this.grid,g,l,n,m,r,q,w=e.pager||"",t=e.pager?"_"+e.pager.substr(1):"";g=f.bDiv;var v=e.toppager?"_"+e.toppager.substr(1):"";l=parseInt(e.page,
10)-1;0>l&&(l=0);l*=parseInt(e.rowNum,10);m=l+e.reccount;if(e.scroll){q=a(p("bTable",a(g))[0].rows).slice(1);l=m-q.length;e.reccount=q.length;if(q=q.outerHeight()||f.prevRowHeight)n=l*q,r=parseInt(e.records,10)*q,a(">div",g).filter(":first").css({height:r}).children("div").filter(":first").css({height:n,display:n?"":"none"}),0===g.scrollTop&&1<e.page&&(g.scrollTop=e.rowNum*(e.page-1)*q);g.scrollLeft=f.hDiv.scrollLeft}if(w+=e.toppager?(w?",":"")+e.toppager:"")q=h.formatter.integer||{},f=H(e.page),
g=H(e.lastpage),a(".selbox",w)[x]("disabled",!1),!0===e.pginput&&(a(".ui-pg-input",w).val(e.page),n=e.toppager?"#sp_1"+t+",#sp_1"+v:"#sp_1"+t,a(n).html(a.fmatter?a.fmatter.util.NumberFormat(e.lastpage,q):e.lastpage)),e.viewrecords&&(0===e.reccount?a(".ui-paging-info",w).html(e.emptyrecords):(n=l+1,r=e.records,a.fmatter&&(n=a.fmatter.util.NumberFormat(n,q),m=a.fmatter.util.NumberFormat(m,q),r=a.fmatter.util.NumberFormat(r,q)),a(".ui-paging-info",w).html(h.format(e.recordtext,n,m,r)))),!0===e.pgbuttons&&
(0>=f&&(f=g=0),1===f||0===f?(a("#first"+t+", #prev"+t).addClass("ui-state-disabled").removeClass("ui-state-hover"),e.toppager&&a("#first_t"+v+", #prev_t"+v).addClass("ui-state-disabled").removeClass("ui-state-hover")):(a("#first"+t+", #prev"+t).removeClass("ui-state-disabled"),e.toppager&&a("#first_t"+v+", #prev_t"+v).removeClass("ui-state-disabled")),f===g||0===f?(a("#next"+t+", #last"+t).addClass("ui-state-disabled").removeClass("ui-state-hover"),e.toppager&&a("#next_t"+v+", #last_t"+v).addClass("ui-state-disabled").removeClass("ui-state-hover")):
(a("#next"+t+", #last"+t).removeClass("ui-state-disabled"),e.toppager&&a("#next_t"+v+", #last_t"+v).removeClass("ui-state-disabled")));!0===b&&!0===e.rownumbers&&a(">td.jqgrid-rownum",this.rows).each(function(b){a(this).html(l+1+b)});d&&e.jqgdnd&&c.jqGrid("gridDnD","updateDnD");k.call(this,"gridComplete");c.triggerHandler("jqGridAfterGridComplete")};b.refreshIndex=T;b.setHeadCheckBox=na;b.constructTr=sa;b.formatter=function(a,b,d,e,c){return F(a,b,d,e,c)};a.extend(u,{populate:da,emptyRows:ea,beginReq:ka,
endReq:ga});this.grid=u;b.addXmlData=function(a){aa.call(b,a)};b.addJSONData=function(a){U.call(b,a)};this.grid.cols=this.rows[0].cells;k.call(b,"onInitGrid");da.call(b);e.hiddengrid=!1}}}})};a.jgrid.extend({getGridParam:function(a){var d=this[0];return d&&d.grid?a?void 0!==d.p[a]?d.p[a]:null:d.p:null},setGridParam:function(c,d){return this.each(function(){null==d&&(d=!1);this.grid&&"object"===typeof c&&(!0===d?this.p=a.extend({},this.p,c):a.extend(!0,this.p,c))})},getGridRowById:function(c){if(null==
c)return null;var d,b=c.toString();this.each(function(){var f,g=this.rows,h;try{for(f=g.length;f--;)if(h=g[f],b===h.id){d=h;break}}catch(l){d=a(this.grid.bDiv).find("#"+a.jgrid.jqID(c)),d=0<d.length?d[0]:null}});return d},getDataIDs:function(){var c=[];this.each(function(){var d=this.rows,b=d.length,f,g;if(b&&0<b)for(f=0;f<b;f++)g=d[f],a(g).hasClass("jqgrow")&&c.push(g.id)});return c},setSelection:function(c,d,b){return this.each(function(){var f=this.p,g,h,l,k,m;g=a.jgrid;var n=g.jqID,p=g.feedback;
if(void 0!==c&&(d=!1===d?!1:!0,(h=a(this).jqGrid("getGridRowById",c))&&h.className&&!(-1<h.className.indexOf("ui-state-disabled")))){if(!0===f.scrollrows&&(l=a(this).jqGrid("getGridRowById",c).rowIndex,0<=l)){var r=this.rows[l];l=this.grid.bDiv;k=l.clientHeight;var q=l.scrollTop,w=a(r).position().top,r=r.clientHeight;w+r>=k+q?l.scrollTop=w-(k+q)+r+q:w<k+q&&w<q&&(l.scrollTop=w)}!0===f.frozenColumns&&(m=f.id+"_frozen");f.multiselect?(this.setHeadCheckBox(!1),f.selrow=h.id,l=a.inArray(f.selrow,f.selarrrow),
-1===l?("ui-subgrid"!==h.className&&a(h).addClass("ui-state-highlight").attr("aria-selected","true"),g=!0,f.selarrrow.push(f.selrow)):null!==g.detectRowEditing.call(this,h.id)?g=!0:("ui-subgrid"!==h.className&&a(h).removeClass("ui-state-highlight").attr("aria-selected","false"),g=!1,f.selarrrow.splice(l,1),k=f.selarrrow[0],f.selrow=void 0===k?null:k),a("#jqg_"+n(f.id)+"_"+n(h.id))[f.propOrAttr]("checked",g),m&&(-1===l||g?a("#"+n(c),"#"+n(m)).addClass("ui-state-highlight"):a("#"+n(c),"#"+n(m)).removeClass("ui-state-highlight"),
a("#jqg_"+n(f.id)+"_"+n(c),"#"+n(m))[f.propOrAttr]("checked",g)),d&&p.call(this,"onSelectRow",h.id,g,b)):"ui-subgrid"!==h.className&&(f.selrow!==h.id?(null!==f.selrow&&(g=a(this).jqGrid("getGridRowById",f.selrow))&&a(g).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),a(h).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),m&&(a("#"+n(f.selrow),"#"+n(m)).removeClass("ui-state-highlight"),a("#"+n(c),"#"+n(m)).addClass("ui-state-highlight")),g=
!0):g=!1,f.selrow=h.id,d&&p.call(this,"onSelectRow",h.id,g,b))}})},resetSelection:function(c){return this.each(function(){var d=this,b=d.p,f,g=!0===b.frozenColumns,h=a.jgrid,l=h.clearArray,k=h.jqID,m=k(b.id),h=b.idSel;f=b.id+"_frozen";var n="#"+k(f);!0===b.frozenColumns&&(f=b.id+"_frozen");if(void 0!==c){f=c===b.selrow?b.selrow:c;a(h+">tbody>tr#"+k(f)).removeClass("ui-state-highlight").attr("aria-selected","false");g&&a("#"+k(f),n).removeClass("ui-state-highlight");if(b.multiselect){a("#jqg_"+k(b.id)+
"_"+k(f),h)[b.propOrAttr]("checked",!1);if(g)a("#jqg_"+m+"_"+k(f),n)[b.propOrAttr]("checked",!1);d.setHeadCheckBox(!1);h=a.inArray(k(f),b.selarrrow);-1!==h&&b.selarrrow.splice(h,1)}f=null}else b.multiselect?(a(b.selarrrow).each(function(c,f){var h=k(f);a(a(d).jqGrid("getGridRowById",f)).removeClass("ui-state-highlight").attr("aria-selected","false");a("#jqg_"+m+"_"+h)[b.propOrAttr]("checked",!1);g&&(a("#"+h,n).removeClass("ui-state-highlight"),a("#jqg_"+m+"_"+h,n)[b.propOrAttr]("checked",!1))}),d.setHeadCheckBox(!1),
l(b.selarrrow),b.selrow=null):b.selrow&&(a(h+">tbody>tr#"+k(b.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),g&&a("#"+k(b.selrow),n).removeClass("ui-state-highlight"),b.selrow=null);!0===b.cellEdit&&0<=parseInt(b.iCol,10)&&0<=parseInt(b.iRow,10)&&(a("td:eq("+b.iCol+")",d.rows[b.iRow]).removeClass("edit-cell ui-state-highlight"),a(d.rows[b.iRow]).removeClass("selected-row ui-state-hover"));l(b.savedRow)})},getRowData:function(c){var d={},b;this.each(function(){var f=this,
g=f.p,h=!1,l,k=2,m=0,n=f.rows;if(void 0===c)h=!0,b=[],k=n.length;else if(l=a(f).jqGrid("getGridRowById",c),!l)return d;for(var p=function(b){var c=g.colModel[b],k=c.name;if("cb"!==k&&"subgrid"!==k&&"rn"!==k)if(!0===g.treeGrid&&k===g.ExpandColumn)d[k]=a.jgrid.htmlDecode(a("span",this).filter(":first").html());else try{d[k]=a.unformat.call(f,this,{rowId:l.id,colModel:c},b)}catch(v){d[k]=a.jgrid.htmlDecode(a(this).html())}};m<k;)h&&(l=n[m]),a(l).hasClass("jqgrow")&&(a('td[role="gridcell"]',l).each(p),
h&&(b.push(d),d={})),m++});return b||d},delRowData:function(c){var d=!1,b,f,g;this.each(function(){var h=this.p;b=a(this).jqGrid("getGridRowById",c);if(!b)return!1;h.subGrid&&(g=a(b).next(),g.hasClass("ui-subgrid")&&g.remove());a(b).remove();h.records--;h.reccount--;this.updatepager(!0,!1);d=!0;h.multiselect&&(f=a.inArray(c,h.selarrrow),-1!==f&&h.selarrrow.splice(f,1));h.selrow=h.multiselect&&0<h.selarrrow.length?h.selarrrow[h.selarrrow.length-1]:null;if("local"===h.datatype){var l=a.jgrid.stripPref(h.idPrefix,
c),l=h._index[l];void 0!==l&&(h.data.splice(l,1),this.refreshIndex())}if(!0===h.altRows&&d){var k=h.altclass;a(this.rows).each(function(b){1===b%2?a(this).addClass(k):a(this).removeClass(k)})}});return d},setRowData:function(c,d,b){var f=!0;this.each(function(){var g=this,h=g.p,l,k,m=typeof b,n={};if(!g.grid)return!1;k=a(g).jqGrid("getGridRowById",c);if(!k)return!1;if(d)try{if(a(h.colModel).each(function(b){var f=this.name,m;m=a.jgrid.getAccessor(d,f);void 0!==m&&(n[f]=this.formatter&&"string"===
typeof this.formatter&&"date"===this.formatter?a.unformat.date.call(g,m,this):m,l=g.formatter(c,n[f],b,d,"edit"),m=this.title?{title:a.jgrid.stripHtml(l)}:{},!0===h.treeGrid&&f===h.ExpandColumn?a("td[role='gridcell']:eq("+b+") > span:first",k).html(l).attr(m):a("td[role='gridcell']:eq("+b+")",k).html(l).attr(m))}),"local"===h.datatype){var p=a.jgrid.stripPref(h.idPrefix,c),r=h._index[p],q;if(h.treeGrid)for(q in h.treeReader)h.treeReader.hasOwnProperty(q)&&delete n[h.treeReader[q]];void 0!==r&&(h.data[r]=
a.extend(!0,h.data[r],n));n=null}}catch(w){f=!1}f&&("string"===m?a(k).addClass(b):null!==b&&"object"===m&&a(k).css(b),a(g).triggerHandler("jqGridAfterGridComplete"))});return f},addRowData:function(c,d,b,f){-1===["first","last","before","after"].indexOf(b)&&(b="last");var g=!1,h,l,k,m,n,p,r,q,w="",v,y,e,x,D,u;d&&(a.isArray(d)?(v=!0,y=c):(d=[d],v=!1),this.each(function(){var t=this.p,A=d.length,z=a.jgrid,H=z.feedback,z=z.randId;n=!0===t.rownumbers?1:0;k=!0===t.multiselect?1:0;m=!0===t.subGrid?1:0;
v||(void 0!==c?c=String(c):(c=z(),!1!==t.keyName&&(y=t.keyName,void 0!==d[0][y]&&(c=d[0][y]))));e=t.altclass;for(var B=0,E="",F={};B<A;){x=d[B];l=[];if(v){try{c=x[y],void 0===c&&(c=z())}catch(R){c=z()}E=!0===t.altRows?0===(this.rows.length-1)%2?e:"":""}u=c;c=t.idPrefix+c;n&&(w=this.formatCol(0,1,"",null,c,!0),l.push('<td role="gridcell" class="ui-state-default jqgrid-rownum" '+w+">0</td>"));k&&(q='<input role="checkbox" type="checkbox" id="jqg_'+t.id+"_"+c+'" class="cbox" aria-checked="false"/>',
w=this.formatCol(n,1,"",null,c,!0),l.push('<td role="gridcell" '+w+">"+q+"</td>"));m&&l.push(a(this).jqGrid("addSubGridCell",k+n,1));for(r=k+m+n;r<t.colModel.length;r++)D=t.colModel[r],h=D.name,F[h]=x[h],q=this.formatter(c,a.jgrid.getAccessor(x,h),r,x),w=this.formatCol(r,1,q,x,c,F),l.push('<td role="gridcell" '+w+">"+q+"</td>");l.unshift(this.constructTr(c,!1,E,F,x,!1));l.push("</tr>");l=l.join("");if(0===this.rows.length)a("table:first",this.grid.bDiv).append(l);else switch(b){case "last":a(this.rows[this.rows.length-
1]).after(l);p=this.rows.length-1;break;case "first":a(this.rows[0]).after(l);p=1;break;case "after":if(p=a(this).jqGrid("getGridRowById",f))a(this.rows[p.rowIndex+1]).hasClass("ui-subgrid")?(a(this.rows[p.rowIndex+1]).after(l),p=p.rowIndex+2):(a(p).after(l),p=p.rowIndex+1);break;case "before":if(p=a(this).jqGrid("getGridRowById",f))a(p).before(l),p=p.rowIndex-1}!0===t.subGrid&&a(this).jqGrid("addSubGrid",k+n,p);t.records++;t.reccount++;H.call(this,"afterInsertRow",c,x,x);B++;"local"===t.datatype&&
(F[t.localReader.id]=u,t._index[u]=t.data.length,t.data.push(F),F={})}!0!==t.altRows||v||("last"===b?1===(this.rows.length-1)%2&&a(this.rows[this.rows.length-1]).addClass(e):a(this.rows).each(function(b){1===b%2?a(this).addClass(e):a(this).removeClass(e)}));this.updatepager(!0,!0);g=!0}));return g},footerData:function(c,d,b){function f(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var g,h=!1,l={},k;void 0===c&&(c="get");"boolean"!==typeof b&&(b=!0);c=c.toLowerCase();this.each(function(){var m=
this,n=m.p,p;if(!m.grid||!n.footerrow||"set"===c&&f(d))return!1;h=!0;a(n.colModel).each(function(f){g=this.name;"set"===c?void 0!==d[g]&&(p=b?m.formatter("",d[g],f,d,"edit"):d[g],k=this.title?{title:a.jgrid.stripHtml(p)}:{},a("tr.footrow td:eq("+f+")",m.grid.sDiv).html(p).attr(k),h=!0):"get"===c&&(l[g]=a("tr.footrow td:eq("+f+")",m.grid.sDiv).html())})});return"get"===c?l:h},showHideCol:function(c,d){return this.each(function(){var b=this,f=!1,g=b.p,h=a.jgrid,l=h.feedback,k=h.cell_width?0:g.cellLayout,
m;if(b.grid){"string"===typeof c&&(c=[c]);d="none"!==d?"":"none";var n=""===d?!0:!1;(h=g.groupHeader&&("object"===typeof g.groupHeader||a.isFunction(g.groupHeader)))&&a(b).jqGrid("destroyGroupHeader",!1);a(g.colModel).each(function(h){if(-1!==a.inArray(this.name,c)&&this.hidden===n){if(!0===g.frozenColumns&&!0===this.frozen)return!0;a("tr[role=row]",b.grid.hDiv).each(function(){a(this.cells[h]).css("display",d)});a(b.rows).each(function(){a(this).hasClass("jqgroup")||a(this.cells[h]).css("display",
d)});g.footerrow&&a("tr.footrow td:eq("+h+")",b.grid.sDiv).css("display",d);m=parseInt(this.width,10);g.tblwidth="none"===d?g.tblwidth-(m+k):g.tblwidth+(m+k);this.hidden=!n;f=!0;l.call(b,"onShowHideCol",n,this.name,h)}});!0===f&&(!0!==g.shrinkToFit||isNaN(g.height)||(g.tblwidth+=parseInt(g.scrollOffset,10)),a(b).jqGrid("setGridWidth",!0===g.shrinkToFit?g.tblwidth:g.width));h&&a(b).jqGrid("setGroupHeaders",g.groupHeader)}})},hideCol:function(c){return this.each(function(){a(this).jqGrid("showHideCol",
c,"none")})},showCol:function(c){return this.each(function(){a(this).jqGrid("showHideCol",c,"")})},remapColumns:function(c,d,b){function f(b){var d;d=b.length?a.makeArray(b):a.extend({},b);a.each(c,function(a){b[a]=d[this]})}function g(b,d){a(">tr"+(d||""),b).each(function(){var b=this,d=a.makeArray(b.cells);a.each(c,function(){var a=d[this];a&&b.appendChild(a)})})}var h=this.get(0),l=h.p,k=h.grid;f(l.colModel);f(l.colNames);f(k.headers);g(a("thead:first",k.hDiv),b&&":not(.ui-jqgrid-labels)");d&&
g(a(h.tBodies[0]),".jqgfirstrow, tr.jqgrow, tr.jqfoot");l.footerrow&&g(a("tbody:first",k.sDiv));l.remapColumns&&(l.remapColumns.length?f(l.remapColumns):l.remapColumns=a.makeArray(c));l.lastsort=a.inArray(l.lastsort,c);l.treeGrid&&(l.expColInd=a.inArray(l.expColInd,c));a.jgrid.feedback.call(h,"onRemapColumns",c,d,b)},setGridWidth:function(c,d){return this.each(function(){var b=this.p,f,g=this.grid,h=0,l,k=0,m=!1,n,p=0;if(g&&null!=b){var r=b.colModel,q=b.scrollOffset,w=a.jgrid.cell_width?0:b.cellLayout,
v=g.headers,y=g.footers,e=g.bDiv,x=g.hDiv,D=g.sDiv,u=g.cols;"boolean"!==typeof d&&(d=b.shrinkToFit);if(!isNaN(c)){c=parseInt(c,10);g.width=b.width=c;a(b.gBox).css("width",c+"px");a(b.gView).css("width",c+"px");a(e).css("width",c+"px");a(x).css("width",c+"px");b.pager&&a(b.pager).css("width",c+"px");b.toppager&&a(b.toppager).css("width",c+"px");!0===b.toolbar[0]&&(a(g.uDiv).css("width",c+"px"),"both"===b.toolbar[1]&&a(g.ubDiv).css("width",c+"px"));b.footerrow&&a(D).css("width",c+"px");!1===d&&!0===
b.forceFit&&(b.forceFit=!1);if(!0===d){a.each(r,function(){!1===this.hidden&&(f=this.widthOrg,h+=f+w,this.fixed?p+=f+w:k++)});if(0===k)return;b.tblwidth=h;n=c-w*k-p;!isNaN(b.height)&&(e.clientHeight<e.scrollHeight||1===this.rows.length)&&(m=!0,n-=q);var h=0,t=0<u.length;a.each(r,function(a){!1!==this.hidden||this.fixed||(f=this.widthOrg,f=Math.round(n*f/(b.tblwidth-w*k-p)),0>f||(this.width=f,h+=f,v[a].width=f,v[a].el.style.width=f+"px",b.footerrow&&(y[a].style.width=f+"px"),t&&(u[a].style.width=f+
"px"),l=a))});if(!l)return;g=0;m?c-p-(h+w*k)!==q&&(g=c-p-(h+w*k)-q):1!==Math.abs(c-p-(h+w*k))&&(g=c-p-(h+w*k));m=r[l];m.width+=g;b.tblwidth=h+g+w*k+p;b.tblwidth>c&&(g=b.tblwidth-parseInt(c,10),b.tblwidth=c,m.width-=g);f=m.width;m=v[l];m.width=f;m.el.style.width=f+"px";t&&(u[l].style.width=f+"px");b.footerrow&&(y[l].style.width=f+"px")}b.tblwidth&&(a("table:first",e).css("width",b.tblwidth+"px"),a("table:first",x).css("width",b.tblwidth+"px"),x.scrollLeft=e.scrollLeft,b.footerrow&&a("table:first",
D).css("width",b.tblwidth+"px"))}}})},setGridHeight:function(c){return this.each(function(){var d=this.grid,b=this.p;if(this.grid){var f=a(d.bDiv);f.css({height:c+(isNaN(c)?"":"px")});!0===b.frozenColumns&&a(b.idSel+"_frozen").parent().height(f.height()-16);b.height=c;b.scroll&&d.populateVisible.call(this)}})},setCaption:function(c){return this.each(function(){var d=this.grid.cDiv;this.p.caption=c;a("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",d).html(c);a(d).show();a(d).nextAll("div").removeClass("ui-corner-top")})},
setLabel:function(c,d,b,f){return this.each(function(){var g=-1;if(this.grid&&void 0!==c&&(a(this.p.colModel).each(function(a){if(this.name===c)return g=a,!1}),0<=g)){var h=a("tr.ui-jqgrid-labels th:eq("+g+")",this.grid.hDiv);if(d){var l=a(".s-ico",h);a("[id^=jqgh_]",h).empty().html(d).append(l);this.p.colNames[g]=d}b&&("string"===typeof b?a(h).addClass(b):a(h).css(b));"object"===typeof f&&a(h).attr(f)}})},setCell:function(c,d,b,f,g,h){return this.each(function(){var l=-1,k,m;if(this.grid&&(isNaN(d)?
a(this.p.colModel).each(function(a){if(this.name===d)return l=a,!1}):l=parseInt(d,10),0<=l&&(k=a(this).jqGrid("getGridRowById",c)))){var n=a("td:eq("+l+")",k);m=0;var p=[];if(""!==b||!0===h){for(;m<k.cells.length;)p.push(k.cells[m].innerHTML),m++;k=this.formatter(c,b,l,p,"edit");m=this.p.colModel[l].title?{title:a.jgrid.stripHtml(k)}:{};this.p.treeGrid&&0<a(".tree-wrap",a(n)).length?a("span",a(n)).html(k).attr(m):a(n).html(k).attr(m);"local"===this.p.datatype&&(k=this.p.colModel[l],b=k.formatter&&
"string"===typeof k.formatter&&"date"===k.formatter?a.unformat.date.call(this,b,k):b,m=this.p._index[a.jgrid.stripPref(this.p.idPrefix,c)],void 0!==m&&(this.p.data[m][k.name]=b))}"string"===typeof f?a(n).addClass(f):f&&a(n).css(f);"object"===typeof g&&a(n).attr(g)}})},getCell:function(c,d){var b=!1;this.each(function(){var f=-1;if(this.grid&&(isNaN(d)?a(this.p.colModel).each(function(a){if(this.name===d)return f=a,!1}):f=parseInt(d,10),0<=f)){var g=a(this).jqGrid("getGridRowById",c);if(g)try{b=a.unformat.call(this,
a("td:eq("+f+")",g),{rowId:g.id,colModel:this.p.colModel[f]},f)}catch(h){b=a.jgrid.htmlDecode(a("td:eq("+f+")",g).html())}}});return b},getCol:function(c,d,b){var f=[],g,h=0,l,k,m;d="boolean"!==typeof d?!1:d;void 0===b&&(b=!1);this.each(function(){var n=-1;if(this.grid&&(isNaN(c)?a(this.p.colModel).each(function(a){if(this.name===c)return n=a,!1}):n=parseInt(c,10),0<=n)){var p=this.rows.length,r=0,q=0;if(p&&0<p){for(;r<p;){if(a(this.rows[r]).hasClass("jqgrow")){try{g=a.unformat.call(this,a(this.rows[r].cells[n]),
{rowId:this.rows[r].id,colModel:this.p.colModel[n]},n)}catch(w){g=a.jgrid.htmlDecode(this.rows[r].cells[n].innerHTML)}b?(m=parseFloat(g),isNaN(m)||(h+=m,void 0===k&&(k=l=m),l=Math.min(l,m),k=Math.max(k,m),q++)):d?f.push({id:this.rows[r].id,value:g}):f.push(g)}r++}if(b)switch(b.toLowerCase()){case "sum":f=h;break;case "avg":f=h/q;break;case "count":f=p-1;break;case "min":f=l;break;case "max":f=k}}}});return f},clearGridData:function(c){return this.each(function(){var d=this.p,b=a.jgrid,f=b.clearArray,
b=b.jqID(d.id);if(this.grid){"boolean"!==typeof c&&(c=!1);if(d.deepempty)a("#"+b+" tbody:first tr:gt(0)").remove();else{var g=a("#"+b+" tbody:first tr:first")[0];a("#"+b+" tbody:first").empty().append(g)}d.footerrow&&c&&a(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");d.selrow=null;f(d.selarrrow);f(d.savedRow);d.records=0;d.page=1;d.lastpage=0;d.reccount=0;f(d.data);f(d.lastSelectedData);d._index={};this.updatepager(!0,!1)}})},getInd:function(c,d){var b=!1,f;this.each(function(){(f=a(this).jqGrid("getGridRowById",
c))&&(b=!0===d?f:f.rowIndex)});return b},bindKeys:function(c){var d=a.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},c||{});return this.each(function(){var b=this;a("body").is("[role]")||a("body").attr("role","application");b.p.scrollrows=d.scrollingRows;a(b).keydown(function(c){var f=a(b).find("tr[tabindex=0]")[0],h,l,k,m=b.p.treeReader.expanded_field;if(f)if(k=b.p._index[a.jgrid.stripPref(b.p.idPrefix,f.id)],37===c.keyCode||38===c.keyCode||39===c.keyCode||40===
c.keyCode){if(38===c.keyCode){l=f.previousSibling;h="";if(l)if(a(l).is(":hidden"))for(;l;){if(l=l.previousSibling,!a(l).is(":hidden")&&a(l).hasClass("jqgrow")){h=l.id;break}}else h=l.id;a(b).jqGrid("setSelection",h,!0,c);c.preventDefault()}if(40===c.keyCode){l=f.nextSibling;h="";if(l)if(a(l).is(":hidden"))for(;l;){if(l=l.nextSibling,!a(l).is(":hidden")&&a(l).hasClass("jqgrow")){h=l.id;break}}else h=l.id;a(b).jqGrid("setSelection",h,!0,c);c.preventDefault()}37===c.keyCode&&(b.p.treeGrid&&b.p.data[k][m]&&
a(f).find("div.treeclick").trigger("click"),a(b).triggerHandler("jqGridKeyLeft",[b.p.selrow]),a.isFunction(d.onLeftKey)&&d.onLeftKey.call(b,b.p.selrow));39===c.keyCode&&(b.p.treeGrid&&!b.p.data[k][m]&&a(f).find("div.treeclick").trigger("click"),a(b).triggerHandler("jqGridKeyRight",[b.p.selrow]),a.isFunction(d.onRightKey)&&d.onRightKey.call(b,b.p.selrow))}else 13===c.keyCode?(a(b).triggerHandler("jqGridKeyEnter",[b.p.selrow]),a.isFunction(d.onEnter)&&d.onEnter.call(b,b.p.selrow)):32===c.keyCode&&(a(b).triggerHandler("jqGridKeySpace",
[b.p.selrow]),a.isFunction(d.onSpace)&&d.onSpace.call(b,b.p.selrow))})})},unbindKeys:function(){return this.each(function(){a(this).unbind("keydown")})},getLocalRow:function(c){var d=!1,b;this.each(function(){void 0!==c&&(b=this.p._index[a.jgrid.stripPref(this.p.idPrefix,c)],0<=b&&(d=this.p.data[b]))});return d},progressBar:function(c){c=a.extend({htmlcontent:"",method:"hide",loadtype:"disable"},c||{});return this.each(function(){var d="show"===c.method?!0:!1,b=a.jgrid.jqID(this.p.id);""!==c.htmlcontent&&
a("#load_"+b).html(c.htmlcontent);switch(c.loadtype){case "enable":a("#load_"+b).toggle(d);break;case "block":a("#lui_"+b).toggle(d),a("#load_"+b).toggle(d)}})},setColWidth:function(c,d,b){return this.each(function(){var f=a(this),g=this.grid,h,l,k,m;if("string"===typeof c){h=c;l=f.jqGrid("getGridParam","colModel");k=0;for(m=l.length;k<m;k++)if(l[k].name===h){c=k;break}if(k>=m)return}else if("number"!==typeof c)return;g.headers[c].newWidth=d;g.newWidth=this.p.tblwidth+d-g.headers[c].width;g.resizeColumn(c,
this,!0);!1!==b&&f.jqGrid("setGridWidth",g.newWidth,!1)})},autoResizeColumn:function(c){return this.each(function(){var d,b,f,g,h,l=this.p,k=l.colModel[c];h=a(a(this.grid.hDiv).find(".ui-jqgrid-labels>.ui-th-column")[c]);d=h.find(">div");g=parseFloat(h.css("padding-left"));b=parseFloat(h.css("padding-right"));f=d.find("span.s-ico");var m=d.find(">."+l.autoResizing.wrapperClassName),n=m.outerWidth(),p=parseFloat(m.css("width"));h=0;var r=l.autoResizing.wrapperClassName;if(null!=k&&k.autoResizable&&
0!==m.length&&!k.hidden&&!k.fixed){(null!=k.autoResizing&&void 0!==k.autoResizingOption.compact?k.autoResizingOption.compact:l.autoResizing.compact)&&!f.is(":visible")&&"none"===f.css("display")||(h=l.autoResizing.widthOfVisiblePartOfSortIcon,"center"===d.css("text-align")&&(h+=h),"horizontal"===l.viewsortcols[1]&&(h+=h));h+=n+g+(p===n?g+b:0)+parseFloat(d.css("margin-left"))+parseFloat(d.css("margin-right"));g=0;for(d=this.rows;g<d.length;g++)b=d[g],a(b).hasClass("jqgrow")&&(f=b.cells[c],null!=f&&
(b=a(f),f=a(f.firstChild),f.hasClass(r)&&(h=Math.max(h,f.outerWidth()+(a.jgrid.cell_width?parseFloat(b.css("padding-left"))+parseFloat(b.css("padding-right")):0)+parseFloat(f.css("margin-left"))+parseFloat(f.css("margin-right"))))));h=Math.max(h,null!=k.autoResizing&&void 0!==k.autoResizingOption.minColWidth?k.autoResizingOption.minColWidth:l.autoResizing.minColWidth);a(this).jqGrid("setColWidth",c,Math.min(h,null!=k.autoResizing&&void 0!==k.autoResizingOption.maxColWidth?k.autoResizingOption.maxColWidth:
l.autoResizing.maxColWidth),l.autoResizing.adjustGridWidth&&!l.autoResizing.fixWidthOnShrink);l.autoResizing.fixWidthOnShrink&&l.shrinkToFit&&(k.fixed=!0,h=k.widthOrg,k.widthOrg=k.width,a(this).jqGrid("setGridWidth",l.width,!0),k.widthOrg=h,k.fixed=!1)}})},autoResizeAllColumns:function(){return this.each(function(){var c=a(this),d=this.p.colModel,b=d.length,f,g,h=a.jgrid.getMethod("autoResizeColumn");for(f=0;f<b;f++)g=d[f],g.autoResizable&&"actions"!==g.formatter&&h.call(c,f)})}})})(jQuery);
(function(a){a.fmatter={};a.extend(a.fmatter,{isObject:function(d){return d&&("object"===typeof d||a.isFunction(d))||!1},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||"boolean"===typeof a},isEmpty:function(d){if(!this.isString(d)&&this.isValue(d))return!1;if(!this.isValue(d))return!0;d=a.trim(d).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===
d}});a.fn.fmatter=function(d,b,c,g,h){c=a.extend({},a.jgrid.formatter,c);try{b=a.fn.fmatter[d].call(this,b,c,g,h)}catch(l){}return b};a.fmatter.util={NumberFormat:function(d,b){var c=a.fmatter.isNumber;c(d)||(d*=1);if(c(d)){var g=0>d,h=String(d),l=b.decimalSeparator||".";if(c(b.decimalPlaces)){var k=b.decimalPlaces,h=Math.pow(10,k),h=String(Math.round(d*h)/h),c=h.lastIndexOf(".");if(0<k)for(0>c?(h+=l,c=h.length-1):"."!==l&&(h=h.replace(".",l));h.length-1-c<k;)h+="0"}if(b.thousandsSeparator){var k=
b.thousandsSeparator,c=h.lastIndexOf(l),c=-1<c?c:h.length,l=h.substring(c),m=-1,n;for(n=c;0<n;n--)m++,0===m%3&&n!==c&&(!g||1<n)&&(l=k+l),l=h.charAt(n-1)+l;h=l}h=b.prefix?b.prefix+h:h;return h=b.suffix?h+b.suffix:h}return d}};a.fn.fmatter.defaultFormat=function(d,b){return a.fmatter.isValue(d)&&""!==d?d:b.defaultValue||"&#160;"};a.fn.fmatter.email=function(d,b){return a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,b):'<a href="mailto:'+d+'">'+d+"</a>"};a.fn.fmatter.checkbox=function(d,b){var c=
a.extend({},b.checkbox),g="";void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=a.extend({},c,b.colModel.formatoptions));!0===c.disabled&&(g='disabled="disabled"');if(a.fmatter.isEmpty(d)||void 0===d)d=a.fn.fmatter.defaultFormat(d,c);d=String(d);d=(d+"").toLowerCase();return'<input type="checkbox" '+(0>d.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+d+'" offval="no" '+g+"/>"};a.fn.fmatter.link=function(d,b){var c={target:b.target},g="";void 0!==b.colModel&&
void 0!==b.colModel.formatoptions&&(c=a.extend({},c,b.colModel.formatoptions));c.target&&(g="target="+c.target);return a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,b):"<a "+g+' href="'+d+'">'+d+"</a>"};a.fn.fmatter.showlink=function(d,b){var c={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},g="";void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=a.extend({},c,b.colModel.formatoptions));c.target&&(g="target="+c.target);c=c.baseLinkUrl+
c.showAction+"?"+c.idName+"="+b.rowId+c.addParam;return a.fmatter.isString(d)||a.fmatter.isNumber(d)?"<a "+g+' href="'+c+'">'+d+"</a>":a.fn.fmatter.defaultFormat(d,b)};var c=function(d,b,c){c=a.extend({},b[c]);void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=a.extend({},c,b.colModel.formatoptions));return a.fmatter.isEmpty(d)?c.defaultValue:a.fmatter.util.NumberFormat(d,c)};a.fn.fmatter.integer=function(a,b){return c(a,b,"integer")};a.fn.fmatter.number=function(a,b){return c(a,b,"number")};
a.fn.fmatter.currency=function(a,b){return c(a,b,"currency")};a.fn.fmatter.date=function(d,b,c,g){c=a.extend({},b.date);void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=a.extend({},c,b.colModel.formatoptions));return c.reformatAfterEdit||"edit"!==g?a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,b):a.jgrid.parseDate(c.srcformat,d,c.newformat,c):a.fn.fmatter.defaultFormat(d,b)};a.fn.fmatter.select=function(d,b){d=String(d);var c=!1,g=[],h,l;void 0!==b.colModel.formatoptions?(c=b.colModel.formatoptions.value,
h=void 0===b.colModel.formatoptions.separator?":":b.colModel.formatoptions.separator,l=void 0===b.colModel.formatoptions.delimiter?";":b.colModel.formatoptions.delimiter):void 0!==b.colModel.editoptions&&(c=b.colModel.editoptions.value,h=void 0===b.colModel.editoptions.separator?":":b.colModel.editoptions.separator,l=void 0===b.colModel.editoptions.delimiter?";":b.colModel.editoptions.delimiter);if(c){var k=!0===(null!=b.colModel.editoptions&&!0===b.colModel.editoptions.multiple)?!0:!1,m=[];k&&(m=
d.split(","),m=a.map(m,function(b){return a.trim(b)}));if(a.fmatter.isString(c)){var n=c.split(l),p=0,r;for(r=0;r<n.length;r++)if(l=n[r].split(h),2<l.length&&(l[1]=a.map(l,function(a,b){if(0<b)return a}).join(h)),k)-1<a.inArray(l[0],m)&&(g[p]=l[1],p++);else if(a.trim(l[0])===a.trim(d)){g[0]=l[1];break}}else a.fmatter.isObject(c)&&(k?g=a.map(m,function(a){return c[a]}):g[0]=c[d]||"")}d=g.join(", ");return""===d?a.fn.fmatter.defaultFormat(d,b):d};a.fn.fmatter.rowactions=function(d,b){var c=a(this).closest("tr.jqgrow"),
g=c.attr("id"),h=a(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),h=a("#"+a.jgrid.jqID(h)),l=h[0],k=l.p,m=k.colModel[a.jgrid.getCellIndex(this)],n=m.frozen?a("tr#"+a.jgrid.jqID(g)+" td:eq("+a.jgrid.getCellIndex(this)+") > div",h):a(this).parent(),p={extraparam:{}},r=function(b){a.isFunction(p.afterRestore)&&p.afterRestore.call(l,b);n.find("div.ui-inline-edit,div.ui-inline-del").show();n.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==m.formatoptions&&
(p=a.extend(p,m.formatoptions));void 0!==k.editOptions&&(p.editOptions=k.editOptions);void 0!==k.delOptions&&(p.delOptions=k.delOptions);c.hasClass("jqgrid-new-row")&&(p.extraparam[k.prmNames.oper]=k.prmNames.addoper);c={keys:p.keys,oneditfunc:p.onEdit,successfunc:p.onSuccess,url:p.url,extraparam:p.extraparam,aftersavefunc:function(b,d){a.isFunction(p.afterSave)&&p.afterSave.call(l,b,d);n.find("div.ui-inline-edit,div.ui-inline-del").show();n.find("div.ui-inline-save,div.ui-inline-cancel").hide()},
errorfunc:p.onError,afterrestorefunc:r,restoreAfterError:p.restoreAfterError,mtype:p.mtype};(!k.multiselect&&g!==k.selrow||k.multiselect&&0>a.inArray(g,k.selarrrow))&&h.jqGrid("setSelection",g,d);switch(b){case "edit":h.jqGrid("editRow",g,c);n.find("div.ui-inline-edit,div.ui-inline-del").hide();n.find("div.ui-inline-save,div.ui-inline-cancel").show();h.triggerHandler("jqGridAfterGridComplete");break;case "save":h.jqGrid("saveRow",g,c)&&(n.find("div.ui-inline-edit,div.ui-inline-del").show(),n.find("div.ui-inline-save,div.ui-inline-cancel").hide(),
h.triggerHandler("jqGridAfterGridComplete"));break;case "cancel":h.jqGrid("restoreRow",g,r);n.find("div.ui-inline-edit,div.ui-inline-del").show();n.find("div.ui-inline-save,div.ui-inline-cancel").hide();h.triggerHandler("jqGridAfterGridComplete");break;case "del":h.jqGrid("delGridRow",g,p.delOptions);break;case "formedit":h.jqGrid("editGridRow",g,p.editOptions)}d.stopPropagation&&d.stopPropagation();return!1};a.fn.fmatter.actions=function(d,b){var c={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},
g=a.jgrid.nav,h=a.jgrid.edit,l=b.rowId,k="";void 0!==b.colModel.formatoptions&&(c=a.extend(c,b.colModel.formatoptions));if(void 0===l||a.fmatter.isEmpty(l))return"";l=a(this)[0].p.idPrefix+"_"+l;c.editformbutton?k+="<div id='jEditButton_"+l+"' title='"+g.edittitle+"' class='ui-pg-div ui-inline-button ui-inline-edit ui-inline-edit-form'><span class='ui-icon ui-icon-pencil'></span></div>":c.editbutton&&(k+="<div id='jEditButton_"+l+"' title='"+g.edittitle+"' class='ui-pg-div ui-inline-button ui-inline-edit'><span class='ui-icon ui-icon-pencil'></span></div>");
c.delbutton&&(k+="<div id='jDeleteButton_"+l+"' title='"+g.deltitle+"' class='ui-pg-div ui-inline-button ui-inline-del'><span class='ui-icon ui-icon-trash'></span></div>");k+="<div id='jSaveButton_"+l+"' title='"+h.bSubmit+"' class='ui-pg-div ui-inline-button ui-inline-save'><span class='ui-icon ui-icon-disk'></span></div>";return k+("<div id='jCancelButton_"+l+"' title='"+h.bCancel+"' class='ui-pg-div ui-inline-button ui-inline-cancel'><span class='ui-icon ui-icon-cancel'></span></div>")};a.unformat=
function(d,b,c,g){var f,l=b.colModel.formatter,k=b.colModel.formatoptions||{},m=/([\.\*\_\'\(\)\{\}\+\?\\])/g,n=b.colModel.unformat||a.fn.fmatter[l]&&a.fn.fmatter[l].unformat;d instanceof jQuery&&0<d.length&&(d=d[0]);b.colModel.autoResizable&&null!=d&&a(d.firstChild).hasClass(this.p.autoResizing.wrapperClassName)&&(d=d.firstChild);if(void 0!==n&&a.isFunction(n))f=n.call(this,a(d).text(),b,d);else if(void 0!==l&&a.fmatter.isString(l))switch(f=a.jgrid.formatter||{},l){case "integer":k=a.extend({},f.integer,
k);b=k.thousandsSeparator.replace(m,"\\$1");b=new RegExp(b,"g");f=a(d).text().replace(b,"");break;case "number":k=a.extend({},f.number,k);b=k.thousandsSeparator.replace(m,"\\$1");b=new RegExp(b,"g");f=a(d).text().replace(b,"").replace(k.decimalSeparator,".");break;case "currency":k=a.extend({},f.currency,k);b=k.thousandsSeparator.replace(m,"\\$1");b=new RegExp(b,"g");f=a(d).text();k.prefix&&k.prefix.length&&(f=f.substr(k.prefix.length));k.suffix&&k.suffix.length&&(f=f.substr(0,f.length-k.suffix.length));
f=f.replace(b,"").replace(k.decimalSeparator,".");break;case "checkbox":k=null!=b.colModel.editoptions&&"string"===typeof b.colModel.editoptions.value?b.colModel.editoptions.value.split(":"):["Yes","No"];f=a("input",d).is(":checked")?k[0]:k[1];break;case "select":f=a.unformat.select(d,b,c,g);break;case "actions":return"";default:f=a(d).text()}return f=void 0!==f?f:!0===g?a(d).text():a.jgrid.htmlDecode(a(d).html())};a.unformat.select=function(d,b,c,g){c=[];d=a(d).text();if(!0===g)return d;g=a.extend({},
void 0!==b.colModel.formatoptions?b.colModel.formatoptions:b.colModel.editoptions);b=void 0===g.separator?":":g.separator;var f=void 0===g.delimiter?";":g.delimiter;if(g.value){var l=g.value;g=!0===g.multiple?!0:!1;var k=[];g&&(k=d.split(","),k=a.map(k,function(b){return a.trim(b)}));if(a.fmatter.isString(l)){var m=l.split(f),n=0,p;for(p=0;p<m.length;p++)if(f=m[p].split(b),2<f.length&&(f[1]=a.map(f,function(a,b){if(0<b)return a}).join(b)),g)-1<a.inArray(f[1],k)&&(c[n]=f[0],n++);else if(a.trim(f[1])===
a.trim(d)){c[0]=f[0];break}}else if(a.fmatter.isObject(l)||a.isArray(l))g||(k[0]=d),c=a.map(k,function(b){var d;a.each(l,function(a,c){if(c===b)return d=a,!1});if(void 0!==d)return d});return c.join(", ")}return d||""};a.unformat.date=function(d,b){var c=a.jgrid.formatter.date||{};void 0!==b.formatoptions&&(c=a.extend({},c,b.formatoptions));return a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,b):a.jgrid.parseDate(c.newformat,d,c.srcformat,c)}})(jQuery);
(function(a){a.jgrid.extend({getColProp:function(a){var d={},b=this[0];if(!b.grid)return!1;var b=b.p.colModel,c;for(c=0;c<b.length;c++)if(b[c].name===a){d=b[c];break}return d},setColProp:function(c,d){return this.each(function(){if(this.grid&&d){var b=this.p.colModel,f;for(f=0;f<b.length;f++)if(b[f].name===c){a.extend(!0,this.p.colModel[f],d);break}}})},sortGrid:function(a,d,b){return this.each(function(){var c=this.grid,g=this.p,h=g.colModel,l=h.length,k,m,n=!1;if(c)for(a||(a=g.sortname),"boolean"!==
typeof d&&(d=!1),m=0;m<l;m++)if(k=h[m],k.index===a||k.name===a){!0===g.frozenColumns&&!0===k.frozen&&(n=c.fhDiv.find("#"+g.id+"_"+a));n&&0!==n.length||(n=c.headers[m].el);c=k.sortable;("boolean"!==typeof c||c)&&this.sortData("jqgh_"+g.id+"_"+a,m,d,b,n);break}})},clearBeforeUnload:function(){return this.each(function(){var c=this.p,d=this.grid,b,f=a.jgrid.clearArray;a.isFunction(d.emptyRows)&&d.emptyRows.call(this,!0,!0);a(document).unbind("mouseup.jqGrid"+c.id);a(d.hDiv).unbind("mousemove");a(this).unbind();
var g,h=d.headers.length;for(g=0;g<h;g++)d.headers[g].el=null;for(b in d)d.hasOwnProperty(b)&&(d.propOrMethod=null);d="formatCol sortData updatepager refreshIndex setHeadCheckBox constructTr formatter addXmlData addJSONData nav grid p".split(" ");h=d.length;for(g=0;g<h;g++)this.hasOwnProperty(d[g])&&(this[d[g]]=null);this._index={};f(c.data);f(c.lastSelectedData);f(c.selarrrow);f(c.savedRow)})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();
try{a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+a.jgrid.jqID(this.id)).remove(),a("#alertmod_"+a.jgrid.jqID(this.id)).remove()}catch(c){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var c=a(this).attr("id"),d=a(this).attr("class");this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var b=document.createElement("table");a(b).attr({id:c});b.className=d;c=a.jgrid.jqID(this.id);a(b).removeClass("ui-jqgrid-btable");1===a(this.p.pager).parents("#gbox_"+
c).length?(a(b).insertBefore("#gbox_"+c).show(),a(this.p.pager).insertBefore("#gbox_"+c)):a(b).insertBefore("#gbox_"+c).show();a(this).jqGrid("clearBeforeUnload");a("#gbox_"+c).remove()}})},setGridState:function(c){return this.each(function(){this.grid&&("hidden"===c?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&
a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===c&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),
!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(c){var d=a("body");c=a.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,
afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},a.jgrid.search,c||{});return this.each(function(){var b=this;if(!this.ftoolbar){var f=function(){var d={},f=0,g,h,l={},q;a.each(b.p.colModel,function(){var e=a("#gs_"+a.jgrid.jqID(this.name),!0===this.frozen&&!0===b.p.frozenColumns?
b.grid.fhDiv:b.grid.hDiv);h=this.index||this.name;q=c.searchOperators?e.parent().prev("a").attr("soper")||c.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":c.defaultSearch;if((g=(g="custom"===this.stype&&a.isFunction(this.searchoptions.custom_value)&&0<e.length&&"SPAN"===e[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(b,e.children(".customelement:first"),"get"):e.val())&&this.formatter&&"string"===typeof this.formatter&&
"date"===this.formatter?a.unformat.date.call(b,g,this):g)||"nu"===q||"nn"===q)d[h]=g,l[h]=q,f++;else try{delete b.p.postData[h]}catch(u){}});var w=0<f?!0:!1;if(!0===c.stringResult||"local"===b.p.datatype||!0===c.searchOperators){var v='{"groupOp":"'+c.groupOp+'","rules":[',y=0;a.each(d,function(a,b){0<y&&(v+=",");v+='{"field":"'+a+'",';v+='"op":"'+l[a]+'",';v+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';y++});v+="]}";a.extend(b.p.postData,{filters:v});a.each(["searchField","searchString",
"searchOper"],function(a,c){b.p.postData.hasOwnProperty(c)&&delete b.p.postData[c]})}else a.extend(b.p.postData,d);var e;b.p.searchurl&&(e=b.p.url,a(b).jqGrid("setGridParam",{url:b.p.searchurl}));var x="stop"===a(b).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!x&&a.isFunction(c.beforeSearch)&&(x=c.beforeSearch.call(b));x||a(b).jqGrid("setGridParam",{search:w}).trigger("reloadGrid",[{page:1}]);e&&a(b).jqGrid("setGridParam",{url:e});a(b).triggerHandler("jqGridToolbarAfterSearch");a.isFunction(c.afterSearch)&&
c.afterSearch.call(b)},g=function(g,h,l){h=parseInt(h,10);l=parseInt(l,10)+18;h='<div id="sopt_menu" class="ui-search-menu" role="menu" style="left:'+h+"px;top:"+l+'px;">';a(g).attr("soper");var k=a("#sopt_menu"),n=[],m;l=0;var w=a(g).attr("colname");m=b.p.colModel.length;for(k.remove();l<m&&b.p.colModel[l].name!==w;)l++;l=b.p.colModel[l];w=a.extend({},l.searchoptions);w.sopt||(w.sopt=[],w.sopt[0]="select"===l.stype?"eq":c.defaultSearch);a.each(c.odata,function(){n.push(this.oper)});for(l=0;l<w.sopt.length;l++)m=
a.inArray(w.sopt[l],n),-1!==m&&(h+='<a class="ui-corner-all g-menu-item" role="menuitem" value="'+c.odata[m].oper+'" oper="'+c.operands[c.odata[m].oper]+'"><span class="sopt-menu-operand">'+c.operands[c.odata[m].oper]+"</span> <span>"+c.odata[m].text+"</span></a>");d.append(h+"</div>");k=a("#sopt_menu");k.addClass("ui-menu ui-widget");a("a",k).hover(function(){a(this).addClass("ui-state-hover").css("font-weight","normal")},function(){a(this).removeClass("ui-state-hover")}).click(function(){var d=
a(this).attr("value"),h=a(this).attr("oper");a(b).triggerHandler("jqGridToolbarSelectOper",[d,h,g]);k.hide();a(g).text(h).attr("soper",d);!0===c.autosearch&&(h=a(g).parent().next().children()[0],(a(h).val()||"nu"===d||"nn"===d)&&f())})},h=a("<tr class='ui-search-toolbar' role='row'></tr>"),l;a.each(b.p.colModel,function(d){var g=this,k;d="";var p="=",r,q=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+b.p.direction+"'><span class='ui-search-input'></span></th>");!0===this.hidden&&
a(q).css("display","none");this.search=!1===this.search?!1:!0;k=a.extend({},this.searchoptions||{});if(this.search){void 0===this.stype&&(this.stype="text");if(c.searchOperators&&"checkbox"!==g.edittype){d=k.sopt?k.sopt[0]:"select"===g.stype?"eq":c.defaultSearch;for(r=0;r<c.odata.length;r++)if(c.odata[r].oper===d){p=c.operands[d]||"";break}d="<a title='"+(null!=k.searchtitle?k.searchtitle:c.operandTitle)+"' soper='"+d+"' class='soptclass' colname='"+this.name+"'>"+p+"</a>";a(q).prepend(d)}null!=k.sopt&&
1!==k.sopt.length||a("td.ui-search-oper",q).hide();void 0===k.clearSearch&&(k.clearSearch="text"===this.stype?!0:!1);k.clearSearch&&"select"!==g.stype&&a(q).append("<a title='Clear Search Value' class='clearsearchclass'>x</a>");switch(this.stype){case "select":if(d=this.surl||k.dataUrl)a.ajax(a.extend({url:d,dataType:"html",success:function(d){void 0!==k.buildSelect?(d=k.buildSelect(d))&&a("span.ui-search-input",q).append(d):a("span.ui-search-input",q).append(d);a(q).append(stbl);d=a("select",q);
void 0!==k.defaultValue&&d.val(k.defaultValue);d.attr({name:g.index||g.name,id:"gs_"+g.name});k.attr&&d.attr(k.attr);a.jgrid.bindEv.call(b,d[0],k);!0===c.autosearch&&d.change(function(){f();return!1});d=null}},a.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{}));else{var w,v,y;g.searchoptions?(w=void 0===g.searchoptions.value?!1:g.searchoptions.value,v=void 0===g.searchoptions.separator?":":g.searchoptions.separator,y=void 0===g.searchoptions.delimiter?";":g.searchoptions.delimiter):g.editoptions&&(w=
void 0===g.editoptions.value?!1:g.editoptions.value,v=void 0===g.editoptions.separator?":":g.editoptions.separator,y=void 0===g.editoptions.delimiter?";":g.editoptions.delimiter);if(!1!==w){var e=document.createElement("select");a(e).attr({name:g.index||g.name,id:"gs_"+g.name});var x;if("string"===typeof w)for(d=w.split(y),x=0;x<d.length;x++)w=d[x].split(v),y=document.createElement("option"),y.value=w[0],y.innerHTML=w[1],e.appendChild(y);else if("object"===typeof w)for(x in w)w.hasOwnProperty(x)&&
(y=document.createElement("option"),y.value=x,y.innerHTML=w[x],e.appendChild(y));void 0!==k.defaultValue&&a(e).val(k.defaultValue);k.attr&&a(e).attr(k.attr);a("span.ui-search-input",q).append(e);a(q).append(q);a.jgrid.bindEv.call(b,e,k);!0===c.autosearch&&a(e).change(function(){f();return!1})}}break;case "text":v=void 0!==k.defaultValue?k.defaultValue:"";a("span.ui-search-input",q).append("<input type='text' name='"+(g.index||g.name)+"' id='gs_"+g.name+"' value='"+v+"'/>");v=a("input",q);k.attr&&
v.attr(k.attr);a.jgrid.bindEv.call(b,v[0],k);!0===c.autosearch&&(c.searchOnEnter?v.keypress(function(a){return 13===(a.charCode||a.keyCode||0)?(f(),!1):this}):v.keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:l&&clearTimeout(l),l=setTimeout(function(){f()},c.autosearchDelay)}}));break;case "custom":a("span.ui-search-input",q).append("<span style='width:95%;padding:0;' name='"+(g.index||g.name)+"' id='gs_"+g.name+"'/>");try{if(a.isFunction(k.custom_element))if(e=
k.custom_element.call(b,void 0!==k.defaultValue?k.defaultValue:"",k))e=a(e).addClass("customelement"),a(q).find("span[name='"+(g.index||g.name)+"']").append(e);else throw"e2";else throw"e1";}catch(D){"e1"===D&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===D?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"===
typeof D?D:D.message,a.jgrid.edit.bClose)}}}a(h).append(q);c.searchOperators||a("a:first-child",q).hide()});a("table thead",b.grid.hDiv).append(h);c.searchOperators&&(a(".soptclass",h).click(function(b){var d=a(this).offset();g(this,d.left,d.top);b.stopPropagation()}),d.on("click",function(b){"soptclass"!==b.target.className&&a("#sopt_menu").hide()}));a(".clearsearchclass",h).click(function(){var d=a(this).parents("tr:first"),g=a("th",d).index(a(this).parents("th:first")),h=a.extend({},b.p.colModel[g].searchoptions||
{}).defaultValue||"";"select"===b.p.colModel[g].stype?h?a(".ui-search-input select",d).val(h):a(".ui-search-input select",d)[0].selectedIndex=0:a(".ui-search-input input",d).val(h);!0===c.autosearch&&f()});this.ftoolbar=!0;this.triggerToolbar=f;this.clearToolbar=function(d){var f={},g=0,k;d="boolean"!==typeof d?!0:d;a.each(b.p.colModel,function(){var d,c=a("#gs_"+a.jgrid.jqID(this.name),!0===this.frozen&&!0===b.p.frozenColumns?b.grid.fhDiv:b.grid.hDiv);this.searchoptions&&void 0!==this.searchoptions.defaultValue&&
(d=this.searchoptions.defaultValue);k=this.index||this.name;switch(this.stype){case "select":c.find("option").each(function(b){0===b&&(this.selected=!0);if(a(this).val()===d)return this.selected=!0,!1});if(void 0!==d)f[k]=d,g++;else try{delete b.p.postData[k]}catch(D){}break;case "text":c.val(d||"");if(void 0!==d)f[k]=d,g++;else try{delete b.p.postData[k]}catch(D){}break;case "custom":a.isFunction(this.searchoptions.custom_value)&&0<c.length&&"SPAN"===c[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(b,
c.children(".customelement:first"),"set",d||"")}});var h=0<g?!0:!1;b.p.resetsearch=!0;if(!0===c.stringResult||"local"===b.p.datatype){var l='{"groupOp":"'+c.groupOp+'","rules":[',w=0;a.each(f,function(a,b){0<w&&(l+=",");l+='{"field":"'+a+'",';l+='"op":"eq",';l+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';w++});l+="]}";a.extend(b.p.postData,{filters:l});a.each(["searchField","searchString","searchOper"],function(a,d){b.p.postData.hasOwnProperty(d)&&delete b.p.postData[d]})}else a.extend(b.p.postData,
f);var v;b.p.searchurl&&(v=b.p.url,a(b).jqGrid("setGridParam",{url:b.p.searchurl}));var y="stop"===a(b).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!y&&a.isFunction(c.beforeClear)&&(y=c.beforeClear.call(b));y||d&&a(b).jqGrid("setGridParam",{search:h}).trigger("reloadGrid",[{page:1}]);v&&a(b).jqGrid("setGridParam",{url:v});a(b).triggerHandler("jqGridToolbarAfterClear");a.isFunction(c.afterClear)&&c.afterClear()};this.toggleToolbar=function(){var d=a("tr.ui-search-toolbar",b.grid.hDiv),c=!0===
b.p.frozenColumns?a("tr.ui-search-toolbar",b.grid.fhDiv):!1;"none"===d.css("display")?(d.show(),c&&c.show()):(d.hide(),c&&c.hide())}}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(c){void 0===c&&(c=!0);return this.each(function(){var d,b,f,g,h,l;b=this.grid;var k=a("table.ui-jqgrid-htable thead",
b.hDiv),m=this.p.colModel;if(b){a(this).unbind(".setGroupHeaders");d=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");g=b.headers;b=0;for(f=g.length;b<f;b++){h=m[b].hidden?"none":"";h=a(g[b].el).width(g[b].width).css("display",h);try{h.removeAttr("rowSpan")}catch(n){h.attr("rowSpan",1)}d.append(h);l=h.children("span.ui-jqgrid-resize");0<l.length&&(l[0].style.height="");h.children("div")[0].style.top=""}a(k).children("tr.ui-jqgrid-labels").remove();a(k).prepend(d);!0===c&&a(this).jqGrid("setGridParam",
{groupHeader:null})}})},setGroupHeaders:function(c){c=a.extend({useColSpanStyle:!1,groupHeaders:[]},c||{});return this.each(function(){this.p.groupHeader=c;var d,b,f=0,g,h,l,k,m,n=this.p.colModel,p=n.length,r=this.grid.headers,q=a("table.ui-jqgrid-htable",this.grid.hDiv),w=q.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");g=q.children("thead");var v=q.find(".jqg-first-row-header");void 0===v[0]?v=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height",
"auto"):v.empty();var y,e=function(a,b){var d=b.length,c;for(c=0;c<d;c++)if(b[c].startColumnName===a)return c;return-1};a(this).prepend(g);g=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(d=0;d<p;d++)if(l=r[d].el,k=a(l),b=n[d],h={height:"0",width:r[d].width+"px",display:b.hidden?"none":""},a("<th>",{role:"gridcell"}).css(h).addClass("ui-first-th-"+this.p.direction).appendTo(v),l.style.width="",h=e(b.name,c.groupHeaders),0<=h){h=c.groupHeaders[h];f=h.numberOfColumns;m=
h.titleText;for(h=b=0;h<f&&d+h<p;h++)n[d+h].hidden||b++;h=a("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0 none"}).html(m);0<b&&h.attr("colspan",String(b));this.p.headertitles&&h.attr("title",h.text());0===b&&h.hide();k.before(h);g.append(l);--f}else 0===f?c.useColSpanStyle?k.attr("rowspan","2"):(a("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:b.hidden?
"none":"","border-top":"0 none"}).insertBefore(k),g.append(l)):(g.append(l),f--);n=a(this).children("thead");n.prepend(v);g.insertAfter(w);q.append(n);c.useColSpanStyle&&(q.find("span.ui-jqgrid-resize").each(function(){var b=a(this).parent();b.is(":visible")&&(this.style.cssText="height: "+b.height()+"px !important; cursor: col-resize;")}),q.find("div.ui-jqgrid-sortable").each(function(){var b=a(this),d=b.parent();d.is(":visible")&&d.is(":has(span.ui-jqgrid-resize)")&&b.css("top",(d.height()-b.outerHeight())/
2+"px")}));y=n.find("tr.jqg-first-row-header");a(this).bind("jqGridResizeStop.setGroupHeaders",function(a,b,d){y.find("th").eq(d).width(b)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var c=this,d=c.p,b=d.colModel,f=0,g=b.length,h=-1,l=!1;if(!0!==d.subGrid&&!0!==d.treeGrid&&!0!==d.cellEdit&&!d.sortable&&!d.scroll){d.rownumbers&&f++;for(d.multiselect&&f++;f<g;){if(!0===b[f].frozen)l=!0,h=f;else break;f++}if(0<=h&&l){b=d.caption?a(c.grid.cDiv).outerHeight():0;f=a(".ui-jqgrid-htable",
"#gview_"+a.jgrid.jqID(d.id)).height();d.toppager&&(b+=a(c.grid.topDiv).outerHeight());!0===d.toolbar[0]&&"bottom"!==d.toolbar[1]&&(b+=a(c.grid.uDiv).outerHeight());c.grid.fhDiv=a('<div style="position:absolute;left:0;top:'+b+"px;height:"+f+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');c.grid.fbDiv=a('<div style="position:absolute;left:0;top:'+(parseInt(b,10)+parseInt(f,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');a("#gview_"+a.jgrid.jqID(d.id)).append(c.grid.fhDiv);
g=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(d.id)).clone(!0);if(d.groupHeader){a("tr.jqg-first-row-header, tr.jqg-third-row-header",g).each(function(){a("th:gt("+h+")",this).remove()});var k=-1,m=-1,n,p;a("tr.jqg-second-row-header th",g).each(function(){n=parseInt(a(this).attr("colspan"),10);if(p=parseInt(a(this).attr("rowspan"),10))k++,m++;n&&(k+=n,m++);if(k===h)return!1});k!==h&&(m=h);a("tr.jqg-second-row-header",g).each(function(){a("th:gt("+m+")",this).remove()})}else a("tr",g).each(function(){a("th:gt("+
h+")",this).remove()});a(g).width(1);a(c.grid.fhDiv).append(g).mousemove(function(a){if(c.grid.resizing)return c.grid.dragMove(a),!1});d.footerrow&&(g=a(".ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(d.id)).height(),c.grid.fsDiv=a('<div style="position:absolute;left:0;top:'+(parseInt(b,10)+parseInt(f,10)+parseInt(g,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),a("#gview_"+a.jgrid.jqID(d.id)).append(c.grid.fsDiv),b=a(".ui-jqgrid-ftable","#gview_"+a.jgrid.jqID(d.id)).clone(!0),a("tr",b).each(function(){a("td:gt("+
h+")",this).remove()}),a(b).width(1),a(c.grid.fsDiv).append(b));a(c).bind("jqGridResizeStop.setFrozenColumns",function(b,f,g){b=a(".ui-jqgrid-htable",c.grid.fhDiv);a("th:eq("+g+")",b).width(f);b=a(".ui-jqgrid-btable",c.grid.fbDiv);a("tr:first td:eq("+g+")",b).width(f);d.footerrow&&(b=a(".ui-jqgrid-ftable",c.grid.fsDiv),a("tr:first td:eq("+g+")",b).width(f))});a(c).bind("jqGridSortCol.setFrozenColumns",function(b,f,g){b=a("tr.ui-jqgrid-labels:last th:eq("+d.lastsort+")",c.grid.fhDiv);f=a("tr.ui-jqgrid-labels:last th:eq("+
g+")",c.grid.fhDiv);a("span.ui-grid-ico-sort",b).addClass("ui-state-disabled");a(b).attr("aria-selected","false");a("span.ui-icon-"+d.sortorder,f).removeClass("ui-state-disabled");a(f).attr("aria-selected","true");d.viewsortcols[0]||d.lastsort===g||(a("span.s-ico",b).hide(),a("span.s-ico",f).show())});a("#gview_"+a.jgrid.jqID(d.id)).append(c.grid.fbDiv);a(c.grid.bDiv).scroll(function(){a(c.grid.fbDiv).scrollTop(a(this).scrollTop())});!0===d.hoverrows&&a("#"+a.jgrid.jqID(d.id)).unbind("mouseover").unbind("mouseout");
a(c).bind("jqGridAfterGridComplete.setFrozenColumns",function(){a("#"+a.jgrid.jqID(d.id)+"_frozen").remove();a(c.grid.fbDiv).height(a(c.grid.bDiv).height()-16);var b=a("#"+a.jgrid.jqID(d.id)).clone(!0);a("tr[role=row]",b).each(function(){a("td[role=gridcell]:gt("+h+")",this).remove()});a(b).width(1).attr("id",d.id+"_frozen");a(c.grid.fbDiv).append(b);!0===d.hoverrows&&(a("tr.jqgrow",b).hover(function(){a(this).addClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(d.id)).addClass("ui-state-hover")},
function(){a(this).removeClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(d.id)).removeClass("ui-state-hover")}),a("tr.jqgrow","#"+a.jgrid.jqID(d.id)).hover(function(){a(this).addClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(d.id)+"_frozen").addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(d.id)+"_frozen").removeClass("ui-state-hover")}));b=null});c.grid.hDiv.loading||a(c).triggerHandler("jqGridAfterGridComplete");
d.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){a(this.grid.fhDiv).remove();a(this.grid.fbDiv).remove();this.grid.fhDiv=null;this.grid.fbDiv=null;this.p.footerrow&&(a(this.grid.fsDiv).remove(),this.grid.fsDiv=null);a(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var c;a("#"+a.jgrid.jqID(this.p.id)).bind("mouseover",function(d){c=a(d.target).closest("tr.jqgrow");"ui-subgrid"!==a(c).attr("class")&&a(c).addClass("ui-state-hover")}).bind("mouseout",
function(d){c=a(d.target).closest("tr.jqgrow");a(c).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})})(jQuery);
(function(a){a.fn.jqFilter=function(c){if("string"===typeof c){var d=a.fn.jqFilter[c];if(!d)throw"jqFilter - No such method: "+c;var b=a.makeArray(arguments).slice(1);return d.apply(this,b)}var f=a.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),strarr:["text","string","blob"],groupOps:[{op:"AND",
text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},a.jgrid.filter,c||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]};var b,d=this.p.columns.length,c,k=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=a.extend(!0,{},this.p.filter);if(d){for(b=0;b<d;b++)c=this.p.columns[b],c.stype?c.inputtype=c.stype:c.inputtype||(c.inputtype="text"),
c.sorttype?c.searchtype=c.sorttype:c.searchtype||(c.searchtype="string"),void 0===c.hidden&&(c.hidden=!1),c.label||(c.label=c.name),c.index&&(c.name=c.index),c.hasOwnProperty("searchoptions")||(c.searchoptions={}),c.hasOwnProperty("searchrules")||(c.searchrules={});this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var m=
function(b,d){var c=[!0,""],g=a("#"+a.jgrid.jqID(f.id))[0]||null;if(a.isFunction(d.searchrules))c=d.searchrules.call(g,b,d);else if(a.jgrid&&a.jgrid.checkValues)try{c=a.jgrid.checkValues.call(g,b,-1,d.searchrules,d.label)}catch(w){}c&&c.length&&!1===c[0]&&(f.error=!c[0],f.errmsg=c[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(f.filter,
null);a(this).append(b);a.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(b,d){var c=this,g,k=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),h="left";"rtl"===this.p.direction&&(h="right",k.attr("dir","rtl"));null===d&&k.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+h+"'></th></tr>");var l=a("<tr></tr>");k.append(l);h=a("<th colspan='5' align='"+
h+"'></th>");l.append(h);if(!0===this.p.ruleButtons){var e=a("<select class='opsel'></select>");h.append(e);var l="",m;for(g=0;g<f.groupOps.length;g++)m=b.groupOp===c.p.groupOps[g].op?" selected='selected'":"",l+="<option value='"+c.p.groupOps[g].op+"'"+m+">"+c.p.groupOps[g].text+"</option>";e.append(l).bind("change",function(){b.groupOp=a(e).val();c.onchange()})}l="<span></span>";this.p.groupButton&&(l=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),l.bind("click",
function(){void 0===b.groups&&(b.groups=[]);b.groups.push({groupOp:f.groupOps[0].op,rules:[],groups:[]});c.reDraw();c.onchange();return!1}));h.append(l);if(!0===this.p.ruleButtons){var l=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),n;l.bind("click",function(){void 0===b.rules&&(b.rules=[]);for(g=0;g<c.p.columns.length;g++){var d=void 0===c.p.columns[g].search?!0:c.p.columns[g].search,e=!0===c.p.columns[g].hidden;if(!0===c.p.columns[g].searchoptions.searchhidden&&
d||d&&!e){n=c.p.columns[g];break}}d=n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==a.inArray(n.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts;b.rules.push({field:n.name,op:d[0],data:""});c.reDraw();return!1});h.append(l)}null!==d&&(l=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),h.append(l),l.bind("click",function(){for(g=0;g<d.groups.length;g++)if(d.groups[g]===b){d.groups.splice(g,1);break}c.reDraw();c.onchange();return!1}));if(void 0!==b.groups)for(g=
0;g<b.groups.length;g++)h=a("<tr></tr>"),k.append(h),l=a("<td class='first'></td>"),h.append(l),l=a("<td colspan='4'></td>"),l.append(this.createTableForGroup(b.groups[g],b)),h.append(l);void 0===b.groupOp&&(b.groupOp=c.p.groupOps[0].op);if(void 0!==b.rules)for(g=0;g<b.rules.length;g++)k.append(this.createTableRowForRule(b.rules[g],b));return k};this.createTableRowForRule=function(b,d){var c=this,g=a("#"+a.jgrid.jqID(f.id))[0]||null,h=a("<tr></tr>"),l,m,e,n,p="",u;h.append("<td class='first'></td>");
var t=a("<td class='columns'></td>");h.append(t);var A=a("<select></select>"),z,H=[];t.append(A);A.bind("change",function(){b.field=a(A).val();e=a(this).parents("tr:first");for(l=0;l<c.p.columns.length;l++)if(c.p.columns[l].name===b.field){n=c.p.columns[l];break}if(n){n.searchoptions.id=a.jgrid.randId();k&&"text"===n.inputtype&&!n.searchoptions.size&&(n.searchoptions.size=10);var d=a.jgrid.createEl.call(g,n.inputtype,n.searchoptions,"",!0,c.p.ajaxSelectOptions||{},!0);a(d).addClass("input-elm");m=
n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==a.inArray(n.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts;var f="",h=0;H=[];a.each(c.p.ops,function(){H.push(this.oper)});for(l=0;l<m.length;l++)z=a.inArray(m[l],H),-1!==z&&(0===h&&(b.op=c.p.ops[z].oper),f+="<option value='"+c.p.ops[z].oper+"'>"+c.p.ops[z].text+"</option>",h++);a(".selectopts",e).empty().append(f);a(".selectopts",e)[0].selectedIndex=0;a.jgrid.msie&&9>a.jgrid.msiever()&&(f=parseInt(a("select.selectopts",e)[0].offsetWidth,
10)+1,a(".selectopts",e).width(f),a(".selectopts",e).css("width","auto"));a(".data",e).empty().append(d);a.jgrid.bindEv.call(g,d,n.searchoptions);a(".input-elm",e).bind("change",function(d){d=d.target;b.data="SPAN"===d.nodeName.toUpperCase()&&n.searchoptions&&a.isFunction(n.searchoptions.custom_value)?n.searchoptions.custom_value.call(g,a(d).children(".customelement:first"),"get"):d.value;c.onchange()});setTimeout(function(){b.data=a(d).val();c.onchange()},0)}});for(l=t=0;l<c.p.columns.length;l++){u=
void 0===c.p.columns[l].search?!0:c.p.columns[l].search;var B=!0===c.p.columns[l].hidden;if(!0===c.p.columns[l].searchoptions.searchhidden&&u||u&&!B)u="",b.field===c.p.columns[l].name&&(u=" selected='selected'",t=l),p+="<option value='"+c.p.columns[l].name+"'"+u+">"+c.p.columns[l].label+"</option>"}A.append(p);p=a("<td class='operators'></td>");h.append(p);n=f.columns[t];n.searchoptions.id=a.jgrid.randId();k&&"text"===n.inputtype&&!n.searchoptions.size&&(n.searchoptions.size=10);t=a.jgrid.createEl.call(g,
n.inputtype,n.searchoptions,b.data,!0,c.p.ajaxSelectOptions||{},!0);if("nu"===b.op||"nn"===b.op)a(t).attr("readonly","true"),a(t).attr("disabled","true");var E=a("<select class='selectopts'></select>");p.append(E);E.bind("change",function(){b.op=a(E).val();e=a(this).parents("tr:first");var d=a(".input-elm",e)[0];"nu"===b.op||"nn"===b.op?(b.data="","SELECT"!==d.tagName.toUpperCase()&&(d.value=""),d.setAttribute("readonly","true"),d.setAttribute("disabled","true")):("SELECT"===d.tagName.toUpperCase()&&
(b.data=d.value),d.removeAttribute("readonly"),d.removeAttribute("disabled"));c.onchange()});m=n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==a.inArray(n.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts;p="";a.each(c.p.ops,function(){H.push(this.oper)});for(l=0;l<m.length;l++)z=a.inArray(m[l],H),-1!==z&&(u=b.op===c.p.ops[z].oper?" selected='selected'":"",p+="<option value='"+c.p.ops[z].oper+"'"+u+">"+c.p.ops[z].text+"</option>");E.append(p);p=a("<td class='data'></td>");h.append(p);
p.append(t);a.jgrid.bindEv.call(g,t,n.searchoptions);a(t).addClass("input-elm").bind("change",function(){b.data="custom"===n.inputtype?n.searchoptions.custom_value.call(g,a(this).children(".customelement:first"),"get"):a(this).val();c.onchange()});p=a("<td></td>");h.append(p);!0===this.p.ruleButtons&&(t=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),p.append(t),t.bind("click",function(){for(l=0;l<d.rules.length;l++)if(d.rules[l]===b){d.rules.splice(l,1);break}c.reDraw();
c.onchange();return!1}));return h};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(q){alert(q)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(q){alert(q)}b+=")";return"()"===b?"":b};this.getStringForRule=function(b){var c="",d="",g,k;for(g=0;g<this.p.ops.length;g++)if(this.p.ops[g].oper===
b.op){c=this.p.operands.hasOwnProperty(b.op)?this.p.operands[b.op]:"";d=this.p.ops[g].oper;break}for(g=0;g<this.p.columns.length;g++)if(this.p.columns[g].name===b.field){k=this.p.columns[g];break}if(void 0===k)return"";g=b.data;if("bw"===d||"bn"===d)g+="%";if("ew"===d||"en"===d)g="%"+g;if("cn"===d||"nc"===d)g="%"+g+"%";if("in"===d||"ni"===d)g=" ("+g+")";f.errorcheck&&m(b.data,k);return-1!==a.inArray(k.searchtype,["int","integer","float","number","currency"])||"nn"===d||"nu"===d?b.field+" "+c+" "+
g:b.field+" "+c+' "'+g+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function a(c){var d="(",f;if(void 0!==c.groups)for(f=0;f<c.groups.length;f++)1<
d.length&&(d="OR"===c.groupOp?d+" || ":d+" && "),d+=a(c.groups[f]);if(void 0!==c.rules)for(f=0;f<c.rules.length;f++){1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && ");var g=c.rules[f];if(b.p.errorcheck){var k,e=void 0;for(k=0;k<b.p.columns.length;k++)if(b.p.columns[k].name===g.field){e=b.p.columns[k];break}e&&m(g.data,e)}d+=g.op+"(item."+g.field+",'"+g.data+"')"}d+=")";return"()"===d?"":d}var b=this;return a(this.p.filter)};this.reDraw();if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,
{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(c){"string"===typeof c&&(c=a.jgrid.parse(c));this.each(function(){this.p.filter=c;this.reDraw();this.onchange()})}})})(jQuery);
(function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var c,d;this.p.subGridOptions=a.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,
search:!1,fixed:!0});c=this.p.subGridModel;if(c[0])for(c[0].align=a.extend([],c[0].align||[]),d=0;d<c[0].name.length;d++)c[0].align[d]=c[0].align[d]||"left"})},addSubGridCell:function(a,d){var b="",c,g;this.each(function(){b=this.formatCol(a,d);g=this.p.id;c=this.p.subGridOptions.plusicon});return'<td role="gridcell" aria-describedby="'+g+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+b+"><a style='cursor:pointer;'><span class='ui-icon "+c+"'></span></a></td>"},addSubGrid:function(c,d){return this.each(function(){var b=
this;if(b.grid){var f=function(d,c,f){c=a("<td align='"+b.p.subGridModel[0].align[f]+"'></td>").html(c);a(d).append(c)},g=function(d,c){var e,g,k,h=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=a("<tr></tr>");for(g=0;g<b.p.subGridModel[0].name.length;g++)e=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+b.p.direction+"'></th>"),a(e).html(b.p.subGridModel[0].name[g]),a(e).width(b.p.subGridModel[0].width[g]),a(l).append(e);a(h).append(l);d&&(k=b.p.xmlReader.subgrid,
a(k.root+" "+k.row,d).each(function(){l=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===k.repeatitems)a(k.cell,this).each(function(b){f(l,a(this).text()||"&#160;",b)});else{var d=b.p.subGridModel[0].mapping||b.p.subGridModel[0].name;if(d)for(g=0;g<d.length;g++)f(l,a(d[g],this).text()||"&#160;",g)}a(h).append(l)}));e=a("table:first",b.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(e+c)).append(h);b.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(b.p.id)).hide();return!1},h=function(d,c){var e,
g,k,h,l,m=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),n=a("<tr></tr>");for(g=0;g<b.p.subGridModel[0].name.length;g++)e=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+b.p.direction+"'></th>"),a(e).html(b.p.subGridModel[0].name[g]),a(e).width(b.p.subGridModel[0].width[g]),a(n).append(e);a(m).append(n);if(d&&(h=b.p.jsonReader.subgrid,e=a.jgrid.getAccessor(d,h.root),void 0!==e))for(g=0;g<e.length;g++){k=e[g];n=a("<tr class='ui-widget-content ui-subtblcell'></tr>");
if(!0===h.repeatitems)for(h.cell&&(k=k[h.cell]),l=0;l<k.length;l++)f(n,k[l]||"&#160;",l);else{var p=b.p.subGridModel[0].mapping||b.p.subGridModel[0].name;if(p.length)for(l=0;l<p.length;l++)f(n,k[p[l]]||"&#160;",l)}a(m).append(n)}g=a("table:first",b.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(g+c)).append(m);b.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(b.p.id)).hide();return!1},l=function(d){var c,e,f,k;c=a(d).attr("id");e={nd_:(new Date).getTime()};e[b.p.prmNames.subgridid]=c;if(!b.p.subGridModel[0])return!1;
if(b.p.subGridModel[0].params)for(k=0;k<b.p.subGridModel[0].params.length;k++)for(f=0;f<b.p.colModel.length;f++)b.p.colModel[f].name===b.p.subGridModel[0].params[k]&&(e[b.p.colModel[f].name]=a("td:eq("+f+")",d).text().replace(/\&#160\;/ig,""));if(!b.grid.hDiv.loading)switch(b.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(b.p.id)).show(),b.p.subgridtype||(b.p.subgridtype=b.p.datatype),a.isFunction(b.p.subgridtype)?b.p.subgridtype.call(b,e):b.p.subgridtype=b.p.subgridtype.toLowerCase(),b.p.subgridtype){case "xml":case "json":a.ajax(a.extend({type:b.p.mtype,
url:a.isFunction(b.p.subGridUrl)?b.p.subGridUrl.call(b,e):b.p.subGridUrl,dataType:b.p.subgridtype,data:a.isFunction(b.p.serializeSubGridData)?b.p.serializeSubGridData.call(b,e):e,complete:function(d){"xml"===b.p.subgridtype?g(d.responseXML,c):h(a.jgrid.parse(d.responseText),c)}},a.jgrid.ajaxOptions,b.p.ajaxSubgridOptions||{}))}return!1},k,m,n,p=1,r,q;a.each(b.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||p++});var w=b.rows.length,v=1;void 0!==d&&0<d&&(v=d,w=d+1);for(var y=
function(){var d=a(this).parent("tr")[0];m=b.p.id;k=d.id;q=a("#"+a.jgrid.jqID(m+"_"+k)+"_expandedContent");if(a(this).hasClass("sgcollapsed")){if(!0===b.p.subGridOptions.reloadOnExpand||!1===b.p.subGridOptions.reloadOnExpand&&!q.hasClass("ui-subgrid")){n=1<=c?"<td colspan='"+c+"'>&#160;</td>":"";r=a(b).triggerHandler("jqGridSubGridBeforeExpand",[m+"_"+k,k]);(r=!1===r||"stop"===r?!1:!0)&&a.isFunction(b.p.subGridBeforeExpand)&&(r=b.p.subGridBeforeExpand.call(b,m+"_"+k,k));if(!1===r)return!1;a(d).after("<tr role='row' id='"+
m+"_"+k+"_expandedContent' class='ui-subgrid'>"+n+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+b.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(b.p.colNames.length-p,10)+"' class='ui-widget-content subgrid-data'><div id="+m+"_"+k+" class='tablediv'></div></td></tr>");a(b).triggerHandler("jqGridSubGridRowExpanded",[m+"_"+k,k]);a.isFunction(b.p.subGridRowExpanded)?b.p.subGridRowExpanded.call(b,m+"_"+k,k):l(d)}else q.show();a(this).html("<a style='cursor:pointer;'><span class='ui-icon "+
b.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");b.p.subGridOptions.selectOnExpand&&a(b).jqGrid("setSelection",k)}else if(a(this).hasClass("sgexpanded")){r=a(b).triggerHandler("jqGridSubGridRowColapsed",[m+"_"+k,k]);(r=!1===r||"stop"===r?!1:!0)&&a.isFunction(b.p.subGridRowColapsed)&&(r=b.p.subGridRowColapsed.call(b,m+"_"+k,k));if(!1===r)return!1;!0===b.p.subGridOptions.reloadOnExpand?q.remove(".ui-subgrid"):q.hasClass("ui-subgrid")&&q.hide();a(this).html("<a style='cursor:pointer;'><span class='ui-icon "+
b.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");b.p.subGridOptions.selectOnCollapse&&a(b).jqGrid("setSelection",k)}return!1};v<w;)a(b.rows[v]).hasClass("jqgrow")&&(b.p.scroll&&a(b.rows[v].cells[c]).unbind("click"),a(b.rows[v].cells[c]).bind("click",y)),v++;!0===b.p.subGridOptions.expandOnLoad&&a(b.rows).filter(".jqgrow").each(function(b,d){a(d.cells[0]).click()});b.subGridXml=function(a,b){g(a,b)};b.subGridJson=function(a,b){h(a,b)}}})},expandSubGridRow:function(c){return this.each(function(){if((this.grid||
c)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",c,!0);d&&(d=a("td.sgcollapsed",d)[0])&&a(d).trigger("click")}})},collapseSubGridRow:function(c){return this.each(function(){if((this.grid||c)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",c,!0);d&&(d=a("td.sgexpanded",d)[0])&&a(d).trigger("click")}})},toggleSubGridRow:function(c){return this.each(function(){if((this.grid||c)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",c,!0);if(d){var b=a("td.sgcollapsed",d)[0];b?a(b).trigger("click"):
(b=a("td.sgexpanded",d)[0])&&a(b).trigger("click")}}})}})})(jQuery);
(function(a){a.extend(a.jgrid,{template:function(c){var d=a.makeArray(arguments).slice(1),b,f=d.length;null==c&&(c="");return c.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(c,h){var g,k;if(!isNaN(parseInt(h,10)))return d[parseInt(h,10)];for(b=0;b<f;b++)if(a.isArray(d[b]))for(g=d[b],k=g.length;k--;)if(h===g[k].nm)return g[k].v})}});a.jgrid.extend({groupingSetup:function(){return this.each(function(){var c,d,b=this.p.colModel,f=this.p.groupingView,g=function(){return""};if(null===
f||"object"!==typeof f&&!a.isFunction(f))this.p.grouping=!1;else if(f.groupField.length){void 0===f.visibiltyOnNextGrouping&&(f.visibiltyOnNextGrouping=[]);f.lastvalues=[];f._locgr||(f.groups=[]);f.counters=[];for(c=0;c<f.groupField.length;c++)f.groupOrder[c]||(f.groupOrder[c]="asc"),f.groupText[c]||(f.groupText[c]="{0}"),"boolean"!==typeof f.groupColumnShow[c]&&(f.groupColumnShow[c]=!0),"boolean"!==typeof f.groupSummary[c]&&(f.groupSummary[c]=!1),f.groupSummaryPos[c]||(f.groupSummaryPos[c]="footer"),
!0===f.groupColumnShow[c]?(f.visibiltyOnNextGrouping[c]=!0,a(this).jqGrid("showCol",f.groupField[c])):(f.visibiltyOnNextGrouping[c]=a("#"+a.jgrid.jqID(this.p.id+"_"+f.groupField[c])).is(":visible"),a(this).jqGrid("hideCol",f.groupField[c]));f.summary=[];f.hideFirstGroupCol&&(f.formatDisplayField[0]=function(a){return a});c=0;for(d=b.length;c<d;c++)f.hideFirstGroupCol&&!b[c].hidden&&f.groupField[0]===b[c].name&&(b[c].formatter=g),b[c].summaryType&&(b[c].summaryDivider?f.summary.push({nm:b[c].name,
st:b[c].summaryType,v:"",sd:b[c].summaryDivider,vd:"",sr:b[c].summaryRound,srt:b[c].summaryRoundType||"round"}):f.summary.push({nm:b[c].name,st:b[c].summaryType,v:"",sr:b[c].summaryRound,srt:b[c].summaryRoundType||"round"}))}else this.p.grouping=!1})},groupingPrepare:function(c,d){this.each(function(){var b=this.p.groupingView,f=this,g,h=b.groupField.length,l,k,m,n,p=0,r=function(){a.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,c):(this.v=a(f).jqGrid("groupingCalculations.handler",this.st,
this.v,this.nm,this.sr,this.srt,c),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=a(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,c)))};for(g=0;g<h;g++)l=b.groupField[g],n=b.displayField[g],k=null==b.titleField?null:b.titleField[g],m=c[l],n=null==n?null:c[n],k=null==k?null:c[k],null==n&&(n=m),void 0!==m&&(0===d?(b.groups.push({idx:g,dataIndex:l,value:m,displayValue:n,titleValue:k,startRow:d,cnt:1,summary:[]}),b.lastvalues[g]=m,b.counters[g]={cnt:1,pos:b.groups.length-
1,summary:a.extend(!0,[],b.summary)}):"object"===typeof m||(a.isArray(b.isInTheSameGroup)&&a.isFunction(b.isInTheSameGroup[g])?b.isInTheSameGroup[g].call(f,b.lastvalues[g],m,g,b):b.lastvalues[g]===m)?1===p?(b.groups.push({idx:g,dataIndex:l,value:m,displayValue:n,titleValue:k,startRow:d,cnt:1,summary:[]}),b.lastvalues[g]=m,b.counters[g]={cnt:1,pos:b.groups.length-1,summary:a.extend(!0,[],b.summary)}):(b.counters[g].cnt+=1,b.groups[b.counters[g].pos].cnt=b.counters[g].cnt):(b.groups.push({idx:g,dataIndex:l,
value:m,displayValue:n,titleValue:k,startRow:d,cnt:1,summary:[]}),b.lastvalues[g]=m,p=1,b.counters[g]={cnt:1,pos:b.groups.length-1,summary:a.extend(!0,[],b.summary)}),a.each(b.counters[g].summary,r),b.groups[b.counters[g].pos].summary=b.counters[g].summary)});return this},groupingToggle:function(c){this.each(function(){var d=this.p.groupingView,b=c.split("_"),f=parseInt(b[b.length-2],10);b.splice(b.length-2,2);var g=b.join("_"),b=d.minusicon,h=d.plusicon,l=a("#"+a.jgrid.jqID(c)),l=l.length?l[0].nextSibling:
null,k=a("#"+a.jgrid.jqID(c)+" span.tree-wrap-"+this.p.direction),m=function(b){b=a.map(b.split(" "),function(a){if(a.substring(0,g.length+1)===g+"_")return parseInt(a.substring(g.length+1),10)});return 0<b.length?b[0]:void 0},n,p,r=!1,q=this.p.frozenColumns?this.p.id+"_frozen":!1,w=(n=q?a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(q)):!1)&&n.length?n[0].nextSibling:null;if(k.hasClass(b)){for(;l;){if(a(l).hasClass("jqfoot")){n=parseInt(a(l).data("jqfootlevel"),10);if(!d.showSummaryOnHide&&n===f||n>f)a(l).hide(),
q&&a(w).hide();if(n<f)break}else{n=m(l.className);if(void 0!==n&&n<=f)break;a(l).hide();q&&a(w).hide()}l=l.nextSibling;q&&(w=w.nextSibling)}k.removeClass(b).addClass(h);r=!0}else{for(p=void 0;l;){if(a(l).hasClass("jqfoot")){n=parseInt(a(l).data("jqfootlevel"),10);if(n===f||d.showSummaryOnHide&&n===f+1)a(l).show(),q&&a(w).show();if(n<=f)break}n=m(l.className);void 0===p&&(p=void 0===n);if(void 0!==n){if(n<f)break;n===f+1&&(a(l).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(b).addClass(h),
q&&a(w).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(b).addClass(h))}else p&&(a(l).show(),q&&a(w).show());l=l.nextSibling;q&&(w=w.nextSibling)}k.removeClass(h).addClass(b)}a(this).triggerHandler("jqGridGroupingClickGroup",[c,r]);a.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,c,r)});return!1},groupingRender:function(c,d,b,f){return this.each(function(){function g(a,b,d){var c=!1;if(0===b)c=d[a];else{var e=d[a].idx;if(0===e)c=d[a];else for(;0<=a;a--)if(d[a].idx===
e-b){c=d[a];break}}return c}function h(b,c,e,f){var k=g(b,c,e),h=l.p.colModel,m=k.cnt;b="";var n,p,q;c=function(){var b;if(this.nm===h[n].name){h[n].summaryTpl&&(q=h[n].summaryTpl);"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v/=this.vd:this.v&&0<m&&(this.v/=m));try{this.groupCount=k.cnt,this.groupIndex=k.dataIndex,this.groupValue=k.value,b=l.formatter("",this.v,n,this)}catch(V){b=this.v}p="<td "+l.formatCol(n,1,"")+">"+a.jgrid.format(q,b)+"</td>";return!1}};for(n=
f;n<d;n++)p="<td "+l.formatCol(n,1,"")+">&#160;</td>",q="{0}",a.each(k.summary,c),b+=p;return b}var l=this,k=l.p.groupingView,m="",n="",p,r,q=k.groupCollapse?k.plusicon:k.minusicon,w,v=[],y=k.groupField.length,q=q+(" tree-wrap-"+l.p.direction);a.each(l.p.colModel,function(a,b){var d;for(d=0;d<y;d++)if(k.groupField[d]===b.name){v[d]=a;break}});var e=0,x=a.makeArray(k.groupSummary);x.reverse();a.each(k.groups,function(g,u){if(k._locgr&&!(u.startRow+u.cnt>(b-1)*f&&u.startRow<b*f))return!0;e++;r=l.p.id+
"ghead_"+u.idx;p=r+"_"+g;n="<span style='cursor:pointer;' class='ui-icon "+q+"' onclick=\"jQuery('#"+a.jgrid.jqID(l.p.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+p+"');return false;\"></span>";try{a.isArray(k.formatDisplayField)&&a.isFunction(k.formatDisplayField[u.idx])?(u.displayValue=k.formatDisplayField[u.idx].call(l,u.displayValue,u.value,l.p.colModel[v[u.idx]],u.idx,k),w=u.displayValue):w=l.formatter(p,u.displayValue,v[u.idx],u.value)}catch(E){w=u.displayValue}m+='<tr id="'+p+'"'+
(k.groupCollapse&&0<u.idx?' style="display:none;" ':" ")+'role="row" class="ui-widget-content jqgroup ui-row-'+l.p.direction+" "+r+'" title="'+(null==u.titleValue?"":u.titleValue)+'"><td style="padding-left:'+12*u.idx+'px;"';var t=a.isFunction(k.groupText[u.idx])?k.groupText[u.idx].call(l,w,u.cnt,u.summary):a.jgrid.template(k.groupText[u.idx],w,u.cnt,u.summary);"string"!==typeof t&&"number"!==typeof t&&(t=w);if("header"===k.groupSummaryPos[u.idx]){var A=l.p.multiselect?' colspan="2"':"";m+=A+">"+
n+t+"</td>";m+=h(g,0,k.groups,!1===k.groupColumnShow[u.idx]?""===A?2:3:""===A?1:2)}else m+=' colspan="'+(!1===k.groupColumnShow[u.idx]?d-1:d)+'">'+n+t+"</td>";m+="</tr>";if(y-1===u.idx){var t=k.groups[g+1],z,A=0;z=u.startRow;var D=void 0!==t?t.startRow:k.groups[g].startRow+k.groups[g].cnt;k._locgr&&(A=(b-1)*f,A>u.startRow&&(z=A));for(;z<D&&c[z-A];z++)m+=c[z-A].join("");if("header"!==k.groupSummaryPos[u.idx]){var B;if(void 0!==t){for(B=0;B<k.groupField.length&&t.dataIndex!==k.groupField[B];B++);e=
k.groupField.length-B}for(t=0;t<e;t++)x[t]&&(A="",k.groupCollapse&&!k.showSummaryOnHide&&(A=' style="display:none;"'),m+="<tr"+A+' data-jqfootlevel="'+(u.idx-t)+'" role="row" class="ui-widget-content jqfoot ui-row-'+l.p.direction+'">',m+=h(g,t,k.groups,0),m+="</tr>");e=B}}});a("#"+a.jgrid.jqID(l.p.id)+" tbody:first").append(m);m=null})},groupingGroupBy:function(c,d){return this.each(function(){"string"===typeof c&&(c=[c]);var b=this.p.groupingView;this.p.grouping=!0;b._locgr=!1;void 0===b.visibiltyOnNextGrouping&&
(b.visibiltyOnNextGrouping=[]);var f;for(f=0;f<b.groupField.length;f++)!b.groupColumnShow[f]&&b.visibiltyOnNextGrouping[f]&&a(this).jqGrid("showCol",b.groupField[f]);for(f=0;f<c.length;f++)b.visibiltyOnNextGrouping[f]=a("#"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(c[f])).is(":visible");this.p.groupingView=a.extend(this.p.groupingView,d||{});b.groupField=c;a(this).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){void 0===c&&(c=!0);this.p.grouping=!1;if(!0===c){var d=
this.p.groupingView,b;for(b=0;b<d.groupField.length;b++)!d.groupColumnShow[b]&&d.visibiltyOnNextGrouping[b]&&a(this).jqGrid("showCol",d.groupField);a("tr.jqgroup, tr.jqfoot","#"+a.jgrid.jqID(this.p.id)+" tbody:first").remove();a("tr.jqgrow:hidden","#"+a.jgrid.jqID(this.p.id)+" tbody:first").show()}else a(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,d,b,f,g,h){var c={sum:function(){return parseFloat(d||0)+parseFloat(h[b]||0)},min:function(){return""===d?parseFloat(h[b]||
0):Math.min(parseFloat(d),parseFloat(h[b]||0))},max:function(){return""===d?parseFloat(h[b]||0):Math.max(parseFloat(d),parseFloat(h[b]||0))},count:function(){""===d&&(d=0);return h.hasOwnProperty(b)?d+1:0},avg:function(){return c.sum()}};if(!c[a])throw"jqGrid Grouping No such method: "+a;a=c[a]();null!=f&&("fixed"===g?a=a.toFixed(f):(f=Math.pow(10,f),a=Math.round(a*f)/f));return a}}})})(jQuery);
(function(a){a.jgrid.extend({setTreeNode:function(c,d){return this.each(function(){var b=this;if(b.grid&&b.p.treeGrid)for(var f=b.p.expColInd,g=b.p.treeReader.expanded_field,h=b.p.treeReader.leaf_field,l=b.p.treeReader.level_field,k=b.p.treeReader.icon_field,m=b.p.treeReader.loaded,n,p,r,q,w=function(d){d=a.jgrid.stripPref(b.p.idPrefix,a(d.target||d.srcElement,b.rows).closest("tr.jqgrow")[0].id);var c=b.p._index[d];b.p.data[c][h]||(b.p.data[c][g]?(a(b).jqGrid("collapseRow",b.p.data[c]),a(b).jqGrid("collapseNode",
b.p.data[c])):(a(b).jqGrid("expandRow",b.p.data[c]),a(b).jqGrid("expandNode",b.p.data[c])));a(b).jqGrid("setSelection",d);return!1},v=function(d){d=a.jgrid.stripPref(b.p.idPrefix,a(d.target||d.srcElement,b.rows).closest("tr.jqgrow")[0].id);d=b.p._index[d];b.p.data[d][h]||(b.p.data[d][g]?(a(b).jqGrid("collapseRow",b.p.data[d]),a(b).jqGrid("collapseNode",b.p.data[d])):(a(b).jqGrid("expandRow",b.p.data[d]),a(b).jqGrid("expandNode",b.p.data[d])));return!1};c<d;)q=a.jgrid.stripPref(b.p.idPrefix,b.rows[c].id),
q=b.p.data[b.p._index[q]],"nested"!==b.p.treeGridModel||q[h]||(n=parseInt(q[b.p.treeReader.left_field],10),p=parseInt(q[b.p.treeReader.right_field],10),q[h]=p===n+1?"true":"false",b.rows[c].cells[b.p._treeleafpos].innerHTML=q[h]),n=parseInt(q[l],10),0===b.p.tree_root_level?(r=n+1,p=n):(r=n,p=n-1),r="<div class='tree-wrap tree-wrap-"+b.p.direction+"' style='width:"+18*r+"px;'>",r+="<div style='"+("rtl"===b.p.direction?"right:":"left:")+18*p+"px;' class='ui-icon ",void 0!==q[m]&&(q[m]="true"===q[m]||
!0===q[m]?!0:!1),"true"===q[h]||!0===q[h]?(r+=(void 0!==q[k]&&""!==q[k]?q[k]:b.p.treeIcons.leaf)+" tree-leaf treeclick",q[h]=!0,p="leaf"):(q[h]=!1,p=""),q[g]=("true"===q[g]||!0===q[g]?!0:!1)&&(q[m]||void 0===q[m]),r=!1===q[g]?r+(!0===q[h]?"'":b.p.treeIcons.plus+" tree-plus treeclick'"):r+(!0===q[h]?"'":b.p.treeIcons.minus+" tree-minus treeclick'"),r+="></div></div>",a(b.rows[c].cells[f]).wrapInner("<span class='cell-wrapper"+p+"'></span>").prepend(r),n!==parseInt(b.p.tree_root_level,10)&&((q=(q=a(b).jqGrid("getNodeParent",
q))&&q.hasOwnProperty(g)?q[g]:!0)||a(b.rows[c]).css("display","none")),a(b.rows[c].cells[f]).find("div.treeclick").bind("click",v),!0===b.p.ExpandColClick&&a(b.rows[c].cells[f]).find("span.cell-wrapper").css("cursor","pointer").bind("click",w),c++})},setTreeGrid:function(){return this.each(function(){var c=this,d=0,b=!1,f,g,h,l=[];if(c.p.treeGrid){c.p.treedatatype||a.extend(c.p,{treedatatype:c.p.datatype});c.p.subGrid=!1;c.p.altRows=!1;c.p.pgbuttons=!1;c.p.pginput=!1;c.p.gridview=!0;null===c.p.rowTotal&&
(c.p.rowNum=c.p.maxRowNum);c.p.multiselect=!1;c.p.rowList=[];c.p.expColInd=0;c.p.treeIcons=a.extend({plus:"ui-icon-triangle-1-"+("rtl"===c.p.direction?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},c.p.treeIcons||{});"nested"===c.p.treeGridModel?c.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},c.p.treeReader):"adjacency"===c.p.treeGridModel&&(c.p.treeReader=a.extend({level_field:"level",
parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},c.p.treeReader));for(g in c.p.colModel)if(c.p.colModel.hasOwnProperty(g))for(h in f=c.p.colModel[g].name,f!==c.p.ExpandColumn||b||(b=!0,c.p.expColInd=d),d++,c.p.treeReader)c.p.treeReader.hasOwnProperty(h)&&c.p.treeReader[h]===f&&l.push(f);a.each(c.p.treeReader,function(b,f){f&&-1===a.inArray(f,l)&&("leaf_field"===b&&(c.p._treeleafpos=d),d++,c.p.colNames.push(f),c.p.colModel.push({name:f,width:1,
hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(c){this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var b=a(d).jqGrid("getNodeChildren",c),f=d.p.treeReader.expanded_field;a(b).each(function(){var b=d.p.idPrefix+a.jgrid.getAccessor(this,d.p.localReader.id);a(a(d).jqGrid("getGridRowById",b)).css("display","");this[f]&&a(d).jqGrid("expandRow",this)})}})},collapseRow:function(c){this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var b=a(d).jqGrid("getNodeChildren",
c),f=d.p.treeReader.expanded_field;a(b).each(function(){var b=d.p.idPrefix+a.jgrid.getAccessor(this,d.p.localReader.id);a(a(d).jqGrid("getGridRowById",b)).css("display","none");this[f]&&a(d).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var c=[];this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)switch(d.p.treeGridModel){case "nested":var b=d.p.treeReader.level_field;a(d.p.data).each(function(){parseInt(this[b],10)===parseInt(d.p.tree_root_level,10)&&c.push(this)});break;case "adjacency":var f=
d.p.treeReader.parent_id_field;a(d.p.data).each(function(){null!==this[f]&&"null"!==String(this[f]).toLowerCase()||c.push(this)})}});return c},getNodeDepth:function(c){var d=null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":d=parseInt(c[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case "adjacency":d=a(this).jqGrid("getNodeAncestors",c).length}});return d},getNodeParent:function(c){var d=null;this.each(function(){if(this.grid&&
this.p.treeGrid)switch(this.p.treeGridModel){case "nested":var b=this.p.treeReader.left_field,f=this.p.treeReader.right_field,g=this.p.treeReader.level_field,h=parseInt(c[b],10),l=parseInt(c[f],10),k=parseInt(c[g],10);a(this.p.data).each(function(){if(parseInt(this[g],10)===k-1&&parseInt(this[b],10)<h&&parseInt(this[f],10)>l)return d=this,!1});break;case "adjacency":for(var m=this.p.treeReader.parent_id_field,n=this.p.localReader.id,p=this.p._index[c[n]];p--;)if(this.p.data[p][n]===a.jgrid.stripPref(this.p.idPrefix,
c[m])){d=this.p.data[p];break}}});return d},getNodeChildren:function(c){var d=[];this.each(function(){var b=this;if(b.grid&&b.p.treeGrid)switch(b.p.treeGridModel){case "nested":var f=b.p.treeReader.left_field,g=b.p.treeReader.right_field,h=b.p.treeReader.level_field,l=parseInt(c[f],10),k=parseInt(c[g],10),m=parseInt(c[h],10);a(this.p.data).each(function(){parseInt(this[h],10)===m+1&&parseInt(this[f],10)>l&&parseInt(this[g],10)<k&&d.push(this)});break;case "adjacency":var n=b.p.treeReader.parent_id_field,
p=b.p.localReader.id;a(this.p.data).each(function(){this[n]==a.jgrid.stripPref(b.p.idPrefix,c[p])&&d.push(this)})}});return d},getFullTreeNode:function(c){var d=[];this.each(function(){var b=this,f;if(b.grid&&b.p.treeGrid)switch(b.p.treeGridModel){case "nested":var g=b.p.treeReader.left_field,h=b.p.treeReader.right_field,l=b.p.treeReader.level_field,k=parseInt(c[g],10),m=parseInt(c[h],10),n=parseInt(c[l],10);a(this.p.data).each(function(){parseInt(this[l],10)>=n&&parseInt(this[g],10)>=k&&parseInt(this[g],
10)<=m&&d.push(this)});break;case "adjacency":if(c){d.push(c);var p=b.p.treeReader.parent_id_field,r=b.p.localReader.id;a(this.p.data).each(function(c){f=d.length;for(c=0;c<f;c++)if(a.jgrid.stripPref(b.p.idPrefix,d[c][r])===this[p]){d.push(this);break}})}}});return d},getNodeAncestors:function(c){var d=[];this.each(function(){if(this.grid&&this.p.treeGrid)for(var b=a(this).jqGrid("getNodeParent",c);b;)d.push(b),b=a(this).jqGrid("getNodeParent",b)});return d},isVisibleNode:function(c){var d=!0;this.each(function(){if(this.grid&&
this.p.treeGrid){var b=a(this).jqGrid("getNodeAncestors",c),f=this.p.treeReader.expanded_field;a(b).each(function(){d=d&&this[f];if(!d)return!1})}});return d},isNodeLoaded:function(c){var d;this.each(function(){if(this.grid&&this.p.treeGrid){var b=this.p.treeReader.leaf_field,f=this.p.treeReader.loaded;d=void 0!==c?void 0!==c[f]?c[f]:c[b]||0<a(this).jqGrid("getNodeChildren",c).length?!0:!1:!1}});return d},expandNode:function(c){return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.treeReader.expanded_field,
b=this.p.treeReader.parent_id_field,f=this.p.treeReader.loaded,g=this.p.treeReader.level_field,h=this.p.treeReader.left_field,l=this.p.treeReader.right_field;if(!c[d]){var k=a.jgrid.getAccessor(c,this.p.localReader.id),m=a("#"+this.p.idPrefix+a.jgrid.jqID(k),this.grid.bDiv)[0],n=this.p._index[k];a(this).jqGrid("isNodeLoaded",this.p.data[n])?(c[d]=!0,a("div.treeclick",m).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(c[d]=!0,
a("div.treeclick",m).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=m.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:k,n_left:c[h],n_right:c[l],n_level:c[g]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:k,parentid:c[b],n_level:c[g]}}),a(this).trigger("reloadGrid"),c[f]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",
n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(c){return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.treeReader.expanded_field;c[d]&&(c[d]=!1,d=a.jgrid.getAccessor(c,this.p.localReader.id),d=a("#"+this.p.idPrefix+a.jgrid.jqID(d),this.grid.bDiv)[0],a("div.treeclick",d).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(c,
d,b,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var g,h,l,k=[],m=this,n;g=a(this).jqGrid("getRootNodes");g=a.jgrid.from(g);g.orderBy(c,d,b,f);n=g.select();g=0;for(h=n.length;g<h;g++)l=n[g],k.push(l),a(this).jqGrid("collectChildrenSortTree",k,l,c,d,b,f);a.each(k,function(b){var d=a.jgrid.getAccessor(this,m.p.localReader.id);a("#"+a.jgrid.jqID(m.p.id)+" tbody tr:eq("+b+")").after(a("tr#"+a.jgrid.jqID(d),m.grid.bDiv))});k=n=g=null}})},collectChildrenSortTree:function(c,d,b,f,g,h){return this.each(function(){if(this.grid&&
this.p.treeGrid){var l,k,m,n;l=a(this).jqGrid("getNodeChildren",d);l=a.jgrid.from(l);l.orderBy(b,f,g,h);n=l.select();l=0;for(k=n.length;l<k;l++)m=n[l],c.push(m),a(this).jqGrid("collectChildrenSortTree",c,m,b,f,g,h)}})},setTreeRow:function(c,d){var b=!1;this.each(function(){this.grid&&this.p.treeGrid&&(b=a(this).jqGrid("setRowData",c,d))});return b},delTreeNode:function(c){return this.each(function(){var d=this.p.localReader.id,b,f=this.p.treeReader.left_field,g=this.p.treeReader.right_field,h,l,k;
if(this.grid&&this.p.treeGrid&&(b=this.p._index[c],void 0!==b)){h=parseInt(this.p.data[b][g],10);l=h-parseInt(this.p.data[b][f],10)+1;var m=a(this).jqGrid("getFullTreeNode",this.p.data[b]);if(0<m.length)for(b=0;b<m.length;b++)a(this).jqGrid("delRowData",m[b][d]);if("nested"===this.p.treeGridModel){d=a.jgrid.from(this.p.data).greater(f,h,{stype:"integer"}).select();if(d.length)for(k in d)d.hasOwnProperty(k)&&(d[k][f]=parseInt(d[k][f],10)-l);d=a.jgrid.from(this.p.data).greater(g,h,{stype:"integer"}).select();
if(d.length)for(k in d)d.hasOwnProperty(k)&&(d[k][g]=parseInt(d[k][g],10)-l)}}})},addChildNode:function(c,d,b,f){var g=this[0];if(b){var h=g.p.treeReader.expanded_field,l=g.p.treeReader.leaf_field,k=g.p.treeReader.level_field,m=g.p.treeReader.parent_id_field,n=g.p.treeReader.left_field,p=g.p.treeReader.right_field,r=g.p.treeReader.loaded,q,w,v,y,e;q=0;var x=d,D;void 0===f&&(f=!1);if(null==c){e=g.p.data.length-1;if(0<=e)for(;0<=e;)q=Math.max(q,parseInt(g.p.data[e][g.p.localReader.id],10)),e--;c=q+
1}var u=a(g).jqGrid("getInd",d);D=!1;void 0===d||null===d||""===d?(x=d=null,q="last",y=g.p.tree_root_level,e=g.p.data.length+1):(q="after",w=g.p._index[d],v=g.p.data[w],d=v[g.p.localReader.id],y=parseInt(v[k],10)+1,e=a(g).jqGrid("getFullTreeNode",v),e.length?(x=e=e[e.length-1][g.p.localReader.id],e=a(g).jqGrid("getInd",x)+1):e=a(g).jqGrid("getInd",d)+1,v[l]&&(D=!0,v[h]=!0,a(g.rows[u]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(g.p.treeIcons.leaf+
" tree-leaf").addClass(g.p.treeIcons.minus+" tree-minus"),g.p.data[w][l]=!1,v[r]=!0));w=e+1;void 0===b[h]&&(b[h]=!1);void 0===b[r]&&(b[r]=!1);b[k]=y;void 0===b[l]&&(b[l]=!0);"adjacency"===g.p.treeGridModel&&(b[m]=d);if("nested"===g.p.treeGridModel){var t;if(null!==d){l=parseInt(v[p],10);k=a.jgrid.from(g.p.data);k=k.greaterOrEquals(p,l,{stype:"integer"});k=k.select();if(k.length)for(t in k)k.hasOwnProperty(t)&&(k[t][n]=k[t][n]>l?parseInt(k[t][n],10)+2:k[t][n],k[t][p]=k[t][p]>=l?parseInt(k[t][p],10)+
2:k[t][p]);b[n]=l;b[p]=l+1}else{l=parseInt(a(g).jqGrid("getCol",p,!1,"max"),10);k=a.jgrid.from(g.p.data).greater(n,l,{stype:"integer"}).select();if(k.length)for(t in k)k.hasOwnProperty(t)&&(k[t][n]=parseInt(k[t][n],10)+2);k=a.jgrid.from(g.p.data).greater(p,l,{stype:"integer"}).select();if(k.length)for(t in k)k.hasOwnProperty(t)&&(k[t][p]=parseInt(k[t][p],10)+2);b[n]=l+1;b[p]=l+2}}if(null===d||a(g).jqGrid("isNodeLoaded",v)||D)a(g).jqGrid("addRowData",c,b,q,x),a(g).jqGrid("setTreeNode",e,w);v&&!v[h]&&
f&&a(g.rows[u]).find("div.treeclick").click()}}})})(jQuery);
(function(a){function c(a,b){var d,c,h=[],l;if(!this||"function"!==typeof a||a instanceof RegExp)throw new TypeError;l=this.length;for(d=0;d<l;d++)if(this.hasOwnProperty(d)&&(c=this[d],a.call(b,c,d,this))){h.push(c);break}return h}a.assocArraySize=function(a){var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b};a.jgrid.extend({pivotSetup:function(d,b){var f=[],g=[],h=[],l=[],k=[],m={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},n=[],p=a.extend({rowTotals:!1,rowTotalsText:"Total",
colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},b||{});this.each(function(){function b(a,b,d){a=c.call(a,b,d);return 0<a.length?a[0]:null}function q(a,b){var d=0,c=!0,f;for(f in a)if(a.hasOwnProperty(f)){if(a[f]!=this[d]){c=!1;break}d++;if(d>=this.length)break}c&&(e=b);return c}function w(b,d,c,e){var f=d.length,g,h,m,n,p="",q=[];a.isArray(c)?(n=c.length,q=c):(n=1,q[0]=c);l=[];k=[];for(m=l.root=0;m<n;m++){var r=[],t;for(g=0;g<f;g++){if(null==c)t=h=a.trim(d[g].member)+"_"+
d[g].aggregator,q[0]=t;else{t=c[m].replace(/\s+/g,"");try{h=1===f?p+t:p+t+"_"+d[g].aggregator+"_"+String(g)}catch(ha){}}var w=h=isNaN(parseInt(h,10))?h:h+" ",v=r,u=h,x=e[h],y=d[g].member,z=b,G=void 0;switch(d[g].aggregator){case "sum":G=parseFloat(x||0)+parseFloat(z[y]||0);break;case "count":if(""===x||null==x)x=0;G=z.hasOwnProperty(y)?x+1:0;break;case "min":G=""===x||null==x?parseFloat(z[y]||0):Math.min(parseFloat(x),parseFloat(z[y]||0));break;case "max":G=""===x||null==x?parseFloat(z[y]||0):Math.max(parseFloat(x),
parseFloat(z[y]||0))}e[w]=v[u]=G;1>=m&&"_r_Totals"!==t&&""===p&&(p=t)}l[h]=r;k[h]=q[m]}return e}function v(a){var b,d,c,e,g;for(c in a)if(a.hasOwnProperty(c)){if("object"!==typeof a[c]){if("level"===c){void 0===ba[a.level]&&(ba[a.level]="",0<a.level&&"_r_Totals"!==a.text&&(n[a.level-1]={useColSpanStyle:!1,groupHeaders:[]}));if(ba[a.level]!==a.text&&a.children.length&&"_r_Totals"!==a.text&&0<a.level){n[a.level-1].groupHeaders.push({titleText:a.label,numberOfColumns:0});d=n[a.level-1].groupHeaders.length-
1;g=0===d?ea:ca+A;if(a.level-1===(p.rowTotals?1:0)&&0<d){var k=n[a.level-1].groupHeaders[d-1].numberOfColumns;k&&(g=k+1+p.aggregates.length)}n[a.level-1].groupHeaders[d].startColumnName=f[g].name;n[a.level-1].groupHeaders[d].numberOfColumns=f.length-g;ca=f.length}ba[a.level]=a.text}if(a.level===t&&"level"===c&&0<t)if(1<A){d=1;for(b in a.fields)a.fields.hasOwnProperty(b)&&(1===d&&n[t-1].groupHeaders.push({startColumnName:b,numberOfColumns:1,titleText:a.text}),d++);n[t-1].groupHeaders[n[t-1].groupHeaders.length-
1].numberOfColumns=d-1}else n.splice(t-1,1)}null!=a[c]&&"object"===typeof a[c]&&v(a[c]);if("level"===c&&0<a.level)for(b in d=0,a.fields)if(a.fields.hasOwnProperty(b)){g={};for(e in p.aggregates[d])if(p.aggregates[d].hasOwnProperty(e))switch(e){case "member":case "label":case "aggregator":break;default:g[e]=p.aggregates[d][e]}1<A?(g.name=b,g.label=p.aggregates[d].label||a.label):(g.name=a.text,g.label="_r_Totals"===a.text?p.rowTotalsText:a.label);f.push(g);d++}}}var y,e,x,D=d.length,u,t,A,z,H=0;p.rowTotals&&
0<p.yDimension.length&&(p.yDimension.splice(0,0,{dataName:p.yDimension[0].dataName}),p.yDimension[0].converter=function(){return"_r_Totals"});u=a.isArray(p.xDimension)?p.xDimension.length:0;t=p.yDimension.length;A=a.isArray(p.aggregates)?p.aggregates.length:0;if(0===u||0===A)throw"xDimension or aggregates optiona are not set!";var B;for(x=0;x<u;x++)B={name:p.xDimension[x].dataName,frozen:p.frozenStaticCols},null==p.xDimension[x].isGroupField&&(p.xDimension[x].isGroupField=!0),B=a.extend(!0,B,p.xDimension[x]),
f.push(B);B=u-1;for(var E={};H<D;){y=d[H];var F=[],R=[];z={};x=0;do F[x]=a.trim(y[p.xDimension[x].dataName]),z[p.xDimension[x].dataName]=F[x],x++;while(x<u);var L=0;e=-1;x=b(g,q,F);if(!x){L=0;if(1<=t){for(L=0;L<t;L++)R[L]=a.trim(y[p.yDimension[L].dataName]),p.yDimension[L].converter&&a.isFunction(p.yDimension[L].converter)&&(R[L]=p.yDimension[L].converter.call(this,R[L],F,R));z=w(y,p.aggregates,R,z)}else 0===t&&(z=w(y,p.aggregates,null,z));g.push(z)}else if(0<=e){L=0;if(1<=t){for(L=0;L<t;L++)R[L]=
a.trim(y[p.yDimension[L].dataName]),p.yDimension[L].converter&&a.isFunction(p.yDimension[L].converter)&&(R[L]=p.yDimension[L].converter.call(this,R[L],F,R));x=w(y,p.aggregates,R,x)}else 0===t&&(x=w(y,p.aggregates,null,x));g[e]=x}y=0;var F=z=null,V;for(V in l)if(l.hasOwnProperty(V)){if(0===y)E.children&&void 0!==E.children||(E={text:V,level:0,children:[],label:V}),z=E.children;else{F=null;for(x=0;x<z.length;x++)if(z[x].text===V){F=z[x];break}F?z=F.children:(z.push({children:[],text:V,level:y,fields:l[V],
label:k[V]}),z=z[z.length-1].children)}y++}H++}var ba=[],ca=f.length,ea=ca;0<t&&(n[t-1]={useColSpanStyle:!1,groupHeaders:[]});v(E);if(p.colTotals)for(H=g.length;H--;)for(x=u;x<f.length;x++)D=f[x].name,h[D]=h[D]?h[D]+parseFloat(g[H][D]||0):parseFloat(g[H][D]||0);if(0<B)for(x=0;x<B;x++)f[x].isGroupField&&(m.groupingView.groupField.push(f[x].name),m.groupingView.groupSummary.push(p.groupSummary),m.groupingView.groupSummaryPos.push(p.groupSummaryPos));else m.grouping=!1;m.sortname=f[B].name;m.groupingView.hideFirstGroupCol=
!0});return{colModel:f,rows:g,groupOptions:m,groupHeaders:n,summary:h}},jqPivot:function(d,b,c,g){return this.each(function(){function f(d){var f=jQuery(l).jqGrid("pivotSetup",d,b),g=0<a.assocArraySize(f.summary)?!0:!1,k=a.jgrid.from(f.rows);for(d=0;d<f.groupOptions.groupingView.groupField.length;d++)k.orderBy(f.groupOptions.groupingView.groupField[d],"a","text","");jQuery(l).jqGrid(a.extend(!0,{datastr:a.extend(k.select(),g?{userdata:f.summary}:{}),datatype:"jsonstring",footerrow:g,userDataOnFooter:g,
colModel:f.colModel,viewrecords:!0,sortname:b.xDimension[0].dataName},f.groupOptions,c||{}));f=f.groupHeaders;if(f.length)for(d=0;d<f.length;d++)f[d]&&f[d].groupHeaders.length&&jQuery(l).jqGrid("setGroupHeaders",f[d]);b.frozenStaticCols&&jQuery(l).jqGrid("setFrozenColumns")}var l=this;"string"===typeof d?a.ajax(a.extend({url:d,dataType:"json",success:function(b){f(a.jgrid.getAccessor(b,g&&g.reader?g.reader:"rows"))}},g||{})):f(d)})}})})(jQuery);
(function(a){a.jgrid.extend({jqGridImport:function(c){c=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},c||{});return this.each(function(){var d=this,b=function(b,c){var f=a(c.xmlGrid.config,b)[0],g=a(c.xmlGrid.data,b)[0],h,l;if(xmlJsonClass.xml2json&&a.jgrid.parse){f=xmlJsonClass.xml2json(f," ");f=a.jgrid.parse(f);for(l in f)f.hasOwnProperty(l)&&(h=f[l]);g?(g=f.grid.datatype,
f.grid.datatype="xmlstring",f.grid.datastr=b,a(d).jqGrid(h).jqGrid("setGridParam",{datatype:g})):a(d).jqGrid(h)}else alert("xml2json or parse are not present")},f=function(b,c){if(b&&"string"===typeof b){var f=!1;a.jgrid.useJSON&&(a.jgrid.useJSON=!1,f=!0);var g=a.jgrid.parse(b);f&&(a.jgrid.useJSON=!0);f=g[c.jsonGrid.config];if(g=g[c.jsonGrid.data]){var h=f.datatype;f.datatype="jsonstring";f.datastr=g;a(d).jqGrid(f).jqGrid("setGridParam",{datatype:h})}else a(d).jqGrid(f)}};switch(c.imptype){case "xml":a.ajax(a.extend({url:c.impurl,
type:c.mtype,data:c.impData,dataType:"xml",complete:function(f,g){"success"===g&&(b(f.responseXML,c),a(d).triggerHandler("jqGridImportComplete",[f,c]),a.isFunction(c.importComplete)&&c.importComplete(f))}},c.ajaxOptions));break;case "xmlstring":if(c.impstring&&"string"===typeof c.impstring){var g=a.parseXML(c.impstring);g&&(b(g,c),a(d).triggerHandler("jqGridImportComplete",[g,c]),a.isFunction(c.importComplete)&&c.importComplete(g),c.impstring=null);g=null}break;case "json":a.ajax(a.extend({url:c.impurl,
type:c.mtype,data:c.impData,dataType:"json",complete:function(b){try{f(b.responseText,c),a(d).triggerHandler("jqGridImportComplete",[b,c]),a.isFunction(c.importComplete)&&c.importComplete(b)}catch(l){}}},c.ajaxOptions));break;case "jsonstring":c.impstring&&"string"===typeof c.impstring&&(f(c.impstring,c),a(d).triggerHandler("jqGridImportComplete",[c.impstring,c]),a.isFunction(c.importComplete)&&c.importComplete(c.impstring),c.impstring=null)}})},jqGridExport:function(c){c=a.extend({exptype:"xmlstring",
root:"grid",ident:"\t"},c||{});var d=null;this.each(function(){if(this.grid){var b,f=a.extend(!0,{},a(this).jqGrid("getGridParam"));f.rownumbers&&(f.colNames.splice(0,1),f.colModel.splice(0,1));f.multiselect&&(f.colNames.splice(0,1),f.colModel.splice(0,1));f.subGrid&&(f.colNames.splice(0,1),f.colModel.splice(0,1));f.knv=null;if(f.treeGrid)for(b in f.treeReader)f.treeReader.hasOwnProperty(b)&&(f.colNames.splice(f.colNames.length-1),f.colModel.splice(f.colModel.length-1));switch(c.exptype){case "xmlstring":d=
"<"+c.root+">"+xmlJsonClass.json2xml(f,c.ident)+"</"+c.root+">";break;case "jsonstring":d="{"+xmlJsonClass.toJson(f,c.root,c.ident,!1)+"}",void 0!==f.postData.filters&&(d=d.replace(/filters":"/,'filters":'),d=d.replace(/}]}"/,"}]}"))}}});return d},excelExport:function(c){c=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},c||{});return this.each(function(){if(this.grid){var d;"remote"===c.exptype&&(d=a.extend({},this.p.postData),d[c.oper]=c.tag,d=jQuery.param(d),d=-1!==
c.url.indexOf("?")?c.url+"&"+d:c.url+"?"+d,window.location=d)}})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,c){9===a.nodeType&&(a=a.documentElement);var d=this.removeWhite(a),d=this.toObj(d),d=this.toJson(d,a.nodeName,"\t");return"{\n"+c+(c?d.replace(/\t/g,c):d.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,c){var d=function(a,b,c){var f="",g,h;if(a instanceof Array)if(0===a.length)f+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(g=0,h=a.length;g<h;g+=1)var l=c+d(a[g],b,c+"\t")+"\n",f=f+l;else if("object"===typeof a){g=!1;f+=c+"<"+b;for(h in a)a.hasOwnProperty(h)&&
("@"===h.charAt(0)?f+=" "+h.substr(1)+'="'+a[h].toString()+'"':g=!0);f+=g?">":"/>";if(g){for(h in a)a.hasOwnProperty(h)&&("#text"===h?f+=a[h]:"#cdata"===h?f+="<![CDATA["+a[h]+"]]\x3e":"@"!==h.charAt(0)&&(f+=d(a[h],h,c+"\t")));f+=("\n"===f.charAt(f.length-1)?c:"")+"</"+b+">"}}else"function"===typeof a?f+=c+"<"+b+"><![CDATA["+a+"]]\x3e</"+b+">":(void 0===a&&(a=""),f='""'===a.toString()||0===a.toString().length?f+(c+"<"+b+">__EMPTY_STRING_</"+b+">"):f+(c+"<"+b+">"+a.toString()+"</"+b+">"));return f},
b="",f;for(f in a)a.hasOwnProperty(f)&&(b+=d(a[f],f,""));return c?b.replace(/\t/g,c):b.replace(/\t|\n/g,"")},toObj:function(a){var c={},d=/function/i;if(1===a.nodeType){if(a.attributes.length){var b;for(b=0;b<a.attributes.length;b+=1)c["@"+a.attributes[b].nodeName]=(a.attributes[b].nodeValue||"").toString()}if(a.firstChild){var f=b=0,g=!1,h;for(h=a.firstChild;h;h=h.nextSibling)1===h.nodeType?g=!0:3===h.nodeType&&h.nodeValue.match(/[^ \f\n\r\t\v]/)?b+=1:4===h.nodeType&&(f+=1);if(g)if(2>b&&2>f)for(this.removeWhite(a),
h=a.firstChild;h;h=h.nextSibling)3===h.nodeType?c["#text"]=this.escape(h.nodeValue):4===h.nodeType?d.test(h.nodeValue)?c[h.nodeName]=[c[h.nodeName],h.nodeValue]:c["#cdata"]=this.escape(h.nodeValue):c[h.nodeName]?c[h.nodeName]instanceof Array?c[h.nodeName][c[h.nodeName].length]=this.toObj(h):c[h.nodeName]=[c[h.nodeName],this.toObj(h)]:c[h.nodeName]=this.toObj(h);else a.attributes.length?c["#text"]=this.escape(this.innerXml(a)):c=this.escape(this.innerXml(a));else if(b)a.attributes.length?c["#text"]=
this.escape(this.innerXml(a)):(c=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===c?c="[]":"__EMPTY_STRING_"===c&&(c=""));else if(f)if(1<f)c=this.escape(this.innerXml(a));else for(h=a.firstChild;h;h=h.nextSibling)if(d.test(a.firstChild.nodeValue)){c=a.firstChild.nodeValue;break}else c["#cdata"]=this.escape(h.nodeValue)}a.attributes.length||a.firstChild||(c=null)}else 9===a.nodeType?c=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return c},toJson:function(a,c,d,b){void 0===
b&&(b=!0);var f=c?'"'+c+'"':"",g="\t",h="\n";b||(h=g="");if("[]"===a)f+=c?":[]":"[]";else if(a instanceof Array){var l,k,m=[];k=0;for(l=a.length;k<l;k+=1)m[k]=this.toJson(a[k],"",d+g,b);f+=(c?":[":"[")+(1<m.length?h+d+g+m.join(","+h+d+g)+h+d:m.join(""))+"]"}else if(null===a)f+=(c&&":")+"null";else if("object"===typeof a){l=[];for(k in a)a.hasOwnProperty(k)&&(l[l.length]=this.toJson(a[k],k,d+g,b));f+=(c?":{":"{")+(1<l.length?h+d+g+l.join(","+h+d+g)+h+d:l.join(""))+"}"}else f="string"===typeof a?f+
((c&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):f+((c&&":")+a.toString());return f},innerXml:function(a){var c="";if("innerHTML"in a)c=a.innerHTML;else{var d=function(a){var b="",c;if(1===a.nodeType){b+="<"+a.nodeName;for(c=0;c<a.attributes.length;c+=1)b+=" "+a.attributes[c].nodeName+'="'+(a.attributes[c].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=d(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3===a.nodeType?b+=a.nodeValue:4===a.nodeType&&
(b+="<![CDATA["+a.nodeValue+"]]\x3e");return b};for(a=a.firstChild;a;a=a.nextSibling)c+=d(a)}return c},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var c;for(c=a.firstChild;c;)if(3===c.nodeType)if(c.nodeValue.match(/[^ \f\n\r\t\v]/))c=c.nextSibling;else{var d=c.nextSibling;a.removeChild(c);c=d}else 1===c.nodeType&&this.removeWhite(c),c=c.nextSibling;return a}};
(function(a){a.jgrid.msie&&8===a.jgrid.msiever()&&(a.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display});a.jgrid._multiselect=!1;if(a.ui&&a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var c=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(d,b){var f=c.call(this,d,b);if(b&&this.selectedList){var g=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(g)})}return f}}a.ui.multiselect.prototype.destroy&&
(a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===a.Widget?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)});a.jgrid._multiselect=!0}a.jgrid.extend({sortableColumns:function(d){return this.each(function(){function b(){c.p.disableClick=!0}var c=this,g=a.jgrid.jqID(c.p.id),g={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+g+"_cb,#jqgh_"+g+"_rn,#jqgh_"+g+"_subgrid),:hidden)",
placeholder:{element:function(b){return a(document.createElement(b[0].nodeName)).addClass(b[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10));b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(b,
d){var f=a(d.item).parent(),f=a(">th",f),g={},h=c.p.id+"_";a.each(c.p.colModel,function(a){g[this.name]=a});var k=[];f.each(function(){var b=a(">div",this).get(0).id.replace(/^jqgh_/,"").replace(h,"");g.hasOwnProperty(b)&&k.push(g[b])});a(c).jqGrid("remapColumns",k,!0,!0);a.isFunction(c.p.sortable.update)&&c.p.sortable.update(k);setTimeout(function(){c.p.disableClick=!1},50)}};c.p.sortable.options?a.extend(g,c.p.sortable.options):a.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable});if(g.start){var h=
g.start;g.start=function(a,d){b();h.call(this,a,d)}}else g.start=b;c.p.sortable.exclude&&(g.items+=":not("+c.p.sortable.exclude+")");g=d.sortable(g);g=g.data("sortable")||g.data("uiSortable");null!=g&&(g.data("sortable").floating=!0)})},columnChooser:function(d){function b(b,c){b&&("string"===typeof b?a.fn[b]&&a.fn[b].apply(c,a.makeArray(arguments).slice(2)):a.isFunction(b)&&b.apply(c,a.makeArray(arguments).slice(2)))}var c=this,g,h,l={},k=[],m,n,p=c.jqGrid("getGridParam","colModel"),r=c.jqGrid("getGridParam",
"colNames"),q=function(b){return a.ui.multiselect.prototype&&b.data(a.ui.multiselect.prototype.widgetFullName||a.ui.multiselect.prototype.widgetName)||b.data("ui-multiselect")||b.data("multiselect")};if(!a("#colchooser_"+a.jgrid.jqID(c[0].p.id)).length){g=a('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');h=a("select",g);d=a.extend({width:400,height:240,classname:null,done:function(a){a&&c.jqGrid("remapColumns",
a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(b){var c={};c[b.bSubmit]=function(){b.apply_perm();b.cleanup(!1)};c[b.bCancel]=function(){b.cleanup(!0)};return a.extend(!0,{buttons:c,close:function(){b.cleanup(!0)},modal:b.modal||!1,resizable:b.resizable||!0,width:b.width+70,resize:function(){var a=q(h),b=a.container.closest(".ui-dialog-content");0<b.length&&"object"===typeof b[0].style?b[0].style.width="":b.css("width","");a.selectedList.height(Math.max(a.selectedContainer.height()-
a.selectedActions.outerHeight()-1,1));a.availableList.height(Math.max(a.availableContainer.height()-a.availableActions.outerHeight()-1,1))}},b.dialog_opts||{})},apply_perm:function(){var b=[];a("option",h).each(function(){a(this).is("[selected]")?c.jqGrid("showCol",p[this.value].name):c.jqGrid("hideCol",p[this.value].name)});a("option[selected]",h).each(function(){b.push(parseInt(this.value,10))});a.each(b,function(){delete l[p[parseInt(this,10)].name]});a.each(l,function(){var a=parseInt(this,10);
var c=b,d=a,f,g;0<=d?(f=c.slice(),g=f.splice(d,Math.max(c.length-d,d)),d>c.length&&(d=c.length),f[d]=a,b=f.concat(g)):b=c});d.done&&d.done.call(c,b);c.jqGrid("setGridWidth",c[0].p.tblwidth,c[0].p.shrinkToFit)},cleanup:function(a){b(d.dlog,g,"destroy");b(d.msel,h,"destroy");g.remove();a&&d.done&&d.done.call(c)},msel_opts:{}},a.jgrid.col,d||{});if(a.ui&&a.ui.multiselect&&a.ui.multiselect.defaults){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");
return}d.msel_opts=a.extend(a.ui.multiselect.defaults,d.msel_opts)}d.caption&&g.attr("title",d.caption);d.classname&&(g.addClass(d.classname),h.addClass(d.classname));d.width&&(a(">div",g).css({width:d.width,margin:"0 auto"}),h.css("width",d.width));d.height&&(a(">div",g).css("height",d.height),h.css("height",d.height-10));h.empty();a.each(p,function(b){l[this.name]=b;this.hidedlg?this.hidden||k.push(b):h.append("<option value='"+b+"' "+(this.hidden?"":"selected='selected'")+">"+a.jgrid.stripHtml(r[b])+
"</option>")});m=a.isFunction(d.dlog_opts)?d.dlog_opts.call(c,d):d.dlog_opts;b(d.dlog,g,m);m=a.isFunction(d.msel_opts)?d.msel_opts.call(c,d):d.msel_opts;b(d.msel,h,m);m=a("#colchooser_"+a.jgrid.jqID(c[0].p.id));m.css({margin:"auto"});m.find(">div").css({width:"100%",height:"100%",margin:"auto"});m=q(h);m.container.css({width:"100%",height:"100%",margin:"auto"});m.selectedContainer.css({width:100*m.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});m.availableContainer.css({width:100-
100*m.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});m.selectedList.css("height","auto");m.availableList.css("height","auto");n=Math.max(m.selectedList.height(),m.availableList.height());n=Math.min(n,a(window).height());m.selectedList.css("height",n);m.availableList.css("height",n)}},sortableRows:function(c){return this.each(function(){var b=this;b.grid&&!b.p.treeGrid&&a.fn.sortable&&(c=a.extend({cursor:"move",axis:"y",items:">.jqgrow"},c||{}),c.start&&a.isFunction(c.start)?
(c._start_=c.start,delete c.start):c._start_=!1,c.update&&a.isFunction(c.update)?(c._update_=c.update,delete c.update):c._update_=!1,c.start=function(d,g){a(g.item).css("border-width","0");a("td",g.item).each(function(a){this.style.width=b.grid.cols[a].style.width});if(b.p.subGrid){var f=a(g.item).attr("id");try{a(b).jqGrid("collapseSubGridRow",f)}catch(l){}}c._start_&&c._start_.apply(this,[d,g])},c.update=function(d,g){a(g.item).css("border-width","");!0===b.p.rownumbers&&a("td.jqgrid-rownum",b.rows).each(function(c){a(this).html(c+
1+(parseInt(b.p.page,10)-1)*parseInt(b.p.rowNum,10))});c._update_&&c._update_.apply(this,[d,g])},a("tbody:first",b).sortable(c),a.isFunction(a.fn.disableSelection)&&a("tbody:first>.jqgrow",b).disableSelection())})},gridDnD:function(c){return this.each(function(){function b(){var b=a.data(d,"dnd");a("tr.jqgrow:not(.ui-draggable)",d).draggable(a.isFunction(b.drag)?b.drag.call(a(d),b):b.drag)}var d=this,g,h;if(d.grid&&!d.p.treeGrid&&a.fn.draggable&&a.fn.droppable)if(void 0===a("#jqgrid_dnd")[0]&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),
"string"===typeof c&&"updateDnD"===c&&!0===d.p.jqgdnd)b();else if(c=a.extend({drag:function(b){return a.extend({start:function(c,f){var g;if(d.p.subGrid){g=a(f.helper).attr("id");try{a(d).jqGrid("collapseSubGridRow",g)}catch(p){}}for(g=0;g<a.data(d,"dnd").connectWith.length;g++)0===a(a.data(d,"dnd").connectWith[g]).jqGrid("getGridParam","reccount")&&a(a.data(d,"dnd").connectWith[g]).jqGrid("addRowData","jqg_empty_row",{});f.helper.addClass("ui-state-highlight");a("td",f.helper).each(function(a){this.style.width=
d.grid.headers[a].width+"px"});b.onstart&&a.isFunction(b.onstart)&&b.onstart.call(a(d),c,f)},stop:function(c,f){var g;f.helper.dropped&&!b.dragcopy&&(g=a(f.helper).attr("id"),void 0===g&&(g=a(this).attr("id")),a(d).jqGrid("delRowData",g));for(g=0;g<a.data(d,"dnd").connectWith.length;g++)a(a.data(d,"dnd").connectWith[g]).jqGrid("delRowData","jqg_empty_row");b.onstop&&a.isFunction(b.onstop)&&b.onstop.call(a(d),c,f)}},b.drag_opts||{})},drop:function(b){return a.extend({accept:function(b){if(!a(b).hasClass("jqgrow"))return b;
b=a(b).closest("table.ui-jqgrid-btable");return 0<b.length&&void 0!==a.data(b[0],"dnd")?(b=a.data(b[0],"dnd").connectWith,-1!==a.inArray("#"+a.jgrid.jqID(this.id),b)?!0:!1):!1},drop:function(c,f){if(a(f.draggable).hasClass("jqgrow")){var g=a(f.draggable).attr("id"),g=f.draggable.parent().parent().jqGrid("getRowData",g);if(!b.dropbyname){var h=0,k={},l,m,v=a("#"+a.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(m in g)g.hasOwnProperty(m)&&(l=v[h].name,"cb"!==l&&"rn"!==l&&"subgrid"!==
l&&g.hasOwnProperty(m)&&v[h]&&(k[l]=g[m]),h++);g=k}catch(e){}}f.helper.dropped=!0;b.beforedrop&&a.isFunction(b.beforedrop)&&(l=b.beforedrop.call(this,c,f,g,a("#"+a.jgrid.jqID(d.p.id)),a(this)),void 0!==l&&null!==l&&"object"===typeof l&&(g=l));if(f.helper.dropped){var y;b.autoid&&(a.isFunction(b.autoid)?y=b.autoid.call(this,g):(y=Math.ceil(1E3*Math.random()),y=b.autoidprefix+y));a("#"+a.jgrid.jqID(this.id)).jqGrid("addRowData",y,g,b.droppos)}b.ondrop&&a.isFunction(b.ondrop)&&b.ondrop.call(this,c,f,
g)}}},b.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5E3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},c||{}),c.connectWith)for(c.connectWith=c.connectWith.split(","),c.connectWith=a.map(c.connectWith,function(b){return a.trim(b)}),a.data(d,"dnd",c),0===d.p.reccount||d.p.jqgdnd||b(),d.p.jqgdnd=
!0,g=0;g<c.connectWith.length;g++)h=c.connectWith[g],a(h).droppable(a.isFunction(c.drop)?c.drop.call(a(d),c):c.drop)})},gridResize:function(c){return this.each(function(){var b=this,d=a.jgrid.jqID(b.p.id);b.grid&&a.fn.resizable&&(c=a.extend({},c||{}),c.alsoResize?(c._alsoResize_=c.alsoResize,delete c.alsoResize):c._alsoResize_=!1,c.stop&&a.isFunction(c.stop)?(c._stop_=c.stop,delete c.stop):c._stop_=!1,c.stop=function(f,h){a(b).jqGrid("setGridParam",{height:a("#gview_"+d+" .ui-jqgrid-bdiv").height()});
a(b).jqGrid("setGridWidth",h.size.width,c.shrinkToFit);c._stop_&&c._stop_.call(b,f,h)},c.alsoResize=c._alsoResize_?eval("("+("{'#gview_"+d+" .ui-jqgrid-bdiv':true,'"+c._alsoResize_+"':true}")+")"):a(".ui-jqgrid-bdiv","#gview_"+d),delete c._alsoResize_,a("#gbox_"+d).resizable(c))})}})})(jQuery);
